(function($n,Qn){"object"==typeof exports&&typeof module<"u"?module.exports=Qn():"function"==typeof define&&define.amd?define(Qn):($n=typeof globalThis<"u"?globalThis:$n||self).bootstrap=Qn()})(this,function(){"use strict";const $n=new Map,Qn={set(E,m,y){$n.has(E)||$n.set(E,new Map);const S=$n.get(E);S.has(m)||0===S.size?S.set(m,y):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(S.keys())[0]}.`)},get:(E,m)=>$n.has(E)&&$n.get(E).get(m)||null,remove(E,m){if(!$n.has(E))return;const y=$n.get(E);y.delete(m),0===y.size&&$n.delete(E)}},al="transitionend",ll=E=>(E&&window.CSS&&window.CSS.escape&&(E=E.replace(/#([^\s"#']+)/g,(m,y)=>`#${CSS.escape(y)}`)),E),cl=E=>{E.dispatchEvent(new Event(al))},Jn=E=>!(!E||"object"!=typeof E)&&(void 0!==E.jquery&&(E=E[0]),void 0!==E.nodeType),nr=E=>Jn(E)?E.jquery?E[0]:E:"string"==typeof E&&E.length>0?document.querySelector(ll(E)):null,Br=E=>{if(!Jn(E)||0===E.getClientRects().length)return!1;const m="visible"===getComputedStyle(E).getPropertyValue("visibility"),y=E.closest("details:not([open])");if(!y)return m;if(y!==E){const S=E.closest("summary");if(S&&S.parentNode!==y||null===S)return!1}return m},vo=E=>!E||E.nodeType!==Node.ELEMENT_NODE||!!E.classList.contains("disabled")||(void 0!==E.disabled?E.disabled:E.hasAttribute("disabled")&&"false"!==E.getAttribute("disabled")),Wi=E=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof E.getRootNode){const m=E.getRootNode();return m instanceof ShadowRoot?m:null}return E instanceof ShadowRoot?E:E.parentNode?Wi(E.parentNode):null},Ks=()=>{},ht=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Pe=[],On=()=>"rtl"===document.documentElement.dir,Kt=E=>{var m;m=()=>{const y=ht();if(y){const S=E.NAME,$=y.fn[S];y.fn[S]=E.jQueryInterface,y.fn[S].Constructor=E,y.fn[S].noConflict=()=>(y.fn[S]=$,E.jQueryInterface)}},"loading"===document.readyState?(Pe.length||document.addEventListener("DOMContentLoaded",()=>{for(const y of Pe)y()}),Pe.push(m)):m()},se=(E,m=[],y=E)=>"function"==typeof E?E(...m):y,rr=(E,m,y=!0)=>{if(!y)return void se(E);const S=(K=>{if(!K)return 0;let{transitionDuration:nt,transitionDelay:rt}=window.getComputedStyle(K);const yt=Number.parseFloat(nt),Ct=Number.parseFloat(rt);return yt||Ct?(nt=nt.split(",")[0],rt=rt.split(",")[0],1e3*(Number.parseFloat(nt)+Number.parseFloat(rt))):0})(m)+5;let $=!1;const U=({target:K})=>{K===m&&($=!0,m.removeEventListener(al,U),se(E))};m.addEventListener(al,U),setTimeout(()=>{$||cl(m)},S)},Ne=(E,m,y,S)=>{const $=E.length;let U=E.indexOf(m);return-1===U?!y&&S?E[$-1]:E[0]:(U+=y?1:-1,S&&(U=(U+$)%$),E[Math.max(0,Math.min(U,$-1))])},he=/[^.]*(?=\..*)\.|.*/,ot=/\..*/,Ut=/::\d+$/,Tn={};let Lr=1;const Tt={mouseenter:"mouseover",mouseleave:"mouseout"},yo=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function dl(E,m){return m&&`${m}::${Lr++}`||E.uidEvent||Lr++}function st(E){const m=dl(E);return E.uidEvent=m,Tn[m]=Tn[m]||{},Tn[m]}function Ke(E,m,y=null){return Object.values(E).find(S=>S.callable===m&&S.delegationSelector===y)}function ul(E,m,y){const S="string"==typeof m,$=S?y:m||y;let U=Ki(E);return yo.has(U)||(U=E),[S,$,U]}function ft(E,m,y,S,$){if("string"!=typeof m||!E)return;let[U,K,nt]=ul(m,y,S);var Lt;m in Tt&&(Lt=K,K=function(Bt){if(!Bt.relatedTarget||Bt.relatedTarget!==Bt.delegateTarget&&!Bt.delegateTarget.contains(Bt.relatedTarget))return Lt.call(this,Bt)});const rt=st(E),yt=rt[nt]||(rt[nt]={}),Ct=Ke(yt,K,U?y:null);if(Ct)return void(Ct.oneOff=Ct.oneOff&&$);const bt=dl(K,m.replace(he,"")),It=U?function(Dt,Lt,Bt){return function Pt(oe){const de=Dt.querySelectorAll(Lt);for(let{target:jt}=oe;jt&&jt!==this;jt=jt.parentNode)for(const Ht of de)if(Ht===jt)return ee(oe,{delegateTarget:jt}),Pt.oneOff&&it.off(Dt,oe.type,Lt,Bt),Bt.apply(jt,[oe])}}(E,y,K):function(Dt,Lt){return function Bt(Pt){return ee(Pt,{delegateTarget:Dt}),Bt.oneOff&&it.off(Dt,Pt.type,Lt),Lt.apply(Dt,[Pt])}}(E,K);It.delegationSelector=U?y:null,It.callable=K,It.oneOff=$,It.uidEvent=bt,yt[bt]=It,E.addEventListener(nt,It,U)}function ds(E,m,y,S,$){const U=Ke(m[y],S,$);U&&(E.removeEventListener(y,U,Boolean($)),delete m[y][U.uidEvent])}function id(E,m,y,S){const $=m[y]||{};for(const[U,K]of Object.entries($))U.includes(S)&&ds(E,m,y,K.callable,K.delegationSelector)}function Ki(E){return E=E.replace(ot,""),Tt[E]||E}const it={on(E,m,y,S){ft(E,m,y,S,!1)},one(E,m,y,S){ft(E,m,y,S,!0)},off(E,m,y,S){if("string"!=typeof m||!E)return;const[$,U,K]=ul(m,y,S),nt=K!==m,rt=st(E),yt=rt[K]||{},Ct=m.startsWith(".");if(void 0===U){if(Ct)for(const bt of Object.keys(rt))id(E,rt,bt,m.slice(1));for(const[bt,It]of Object.entries(yt)){const Dt=bt.replace(Ut,"");nt&&!m.includes(Dt)||ds(E,rt,K,It.callable,It.delegationSelector)}}else{if(!Object.keys(yt).length)return;ds(E,rt,K,U,$?y:null)}},trigger(E,m,y){if("string"!=typeof m||!E)return null;const S=ht();let $=null,U=!0,K=!0,nt=!1;m!==Ki(m)&&S&&($=S.Event(m,y),S(E).trigger($),U=!$.isPropagationStopped(),K=!$.isImmediatePropagationStopped(),nt=$.isDefaultPrevented());const rt=ee(new Event(m,{bubbles:U,cancelable:!0}),y);return nt&&rt.preventDefault(),K&&E.dispatchEvent(rt),rt.defaultPrevented&&$&&$.preventDefault(),rt}};function ee(E,m={}){for(const[y,S]of Object.entries(m))try{E[y]=S}catch{Object.defineProperty(E,y,{configurable:!0,get:()=>S})}return E}function me(E){if("true"===E)return!0;if("false"===E)return!1;if(E===Number(E).toString())return Number(E);if(""===E||"null"===E)return null;if("string"!=typeof E)return E;try{return JSON.parse(decodeURIComponent(E))}catch{return E}}function w(E){return E.replace(/[A-Z]/g,m=>`-${m.toLowerCase()}`)}const Zn={setDataAttribute(E,m,y){E.setAttribute(`data-bs-${w(m)}`,y)},removeDataAttribute(E,m){E.removeAttribute(`data-bs-${w(m)}`)},getDataAttributes(E){if(!E)return{};const m={},y=Object.keys(E.dataset).filter(S=>S.startsWith("bs")&&!S.startsWith("bsConfig"));for(const S of y){let $=S.replace(/^bs/,"");$=$.charAt(0).toLowerCase()+$.slice(1,$.length),m[$]=me(E.dataset[S])}return m},getDataAttribute:(E,m)=>me(E.getAttribute(`data-bs-${w(m)}`))};class Ys{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(m){return m=this._mergeConfigObj(m),m=this._configAfterMerge(m),this._typeCheckConfig(m),m}_configAfterMerge(m){return m}_mergeConfigObj(m,y){const S=Jn(y)?Zn.getDataAttribute(y,"config"):{};return{...this.constructor.Default,..."object"==typeof S?S:{},...Jn(y)?Zn.getDataAttributes(y):{},..."object"==typeof m?m:{}}}_typeCheckConfig(m,y=this.constructor.DefaultType){for(const[$,U]of Object.entries(y)){const K=m[$],nt=Jn(K)?"element":null==(S=K)?`${S}`:Object.prototype.toString.call(S).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(U).test(nt))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${$}" provided type "${nt}" but expected type "${U}".`)}var S}}class to extends Ys{constructor(m,y){super(),(m=nr(m))&&(this._element=m,this._config=this._getConfig(y),Qn.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Qn.remove(this._element,this.constructor.DATA_KEY),it.off(this._element,this.constructor.EVENT_KEY);for(const m of Object.getOwnPropertyNames(this))this[m]=null}_queueCallback(m,y,S=!0){rr(m,y,S)}_getConfig(m){return m=this._mergeConfigObj(m,this._element),m=this._configAfterMerge(m),this._typeCheckConfig(m),m}static getInstance(m){return Qn.get(nr(m),this.DATA_KEY)}static getOrCreateInstance(m,y={}){return this.getInstance(m)||new this(m,"object"==typeof y?y:null)}static get VERSION(){return"5.3.2"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(m){return`${m}${this.EVENT_KEY}`}}const Yi=E=>{let m=E.getAttribute("data-bs-target");if(!m||"#"===m){let y=E.getAttribute("href");if(!y||!y.includes("#")&&!y.startsWith("."))return null;y.includes("#")&&!y.startsWith("#")&&(y=`#${y.split("#")[1]}`),m=y&&"#"!==y?ll(y.trim()):null}return m},gt={find:(E,m=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(m,E)),findOne:(E,m=document.documentElement)=>Element.prototype.querySelector.call(m,E),children:(E,m)=>[].concat(...E.children).filter(y=>y.matches(m)),parents(E,m){const y=[];let S=E.parentNode.closest(m);for(;S;)y.push(S),S=S.parentNode.closest(m);return y},prev(E,m){let y=E.previousElementSibling;for(;y;){if(y.matches(m))return[y];y=y.previousElementSibling}return[]},next(E,m){let y=E.nextElementSibling;for(;y;){if(y.matches(m))return[y];y=y.nextElementSibling}return[]},focusableChildren(E){const m=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(y=>`${y}:not([tabindex^="-"])`).join(",");return this.find(m,E).filter(y=>!vo(y)&&Br(y))},getSelectorFromElement(E){const m=Yi(E);return m&&gt.findOne(m)?m:null},getElementFromSelector(E){const m=Yi(E);return m?gt.findOne(m):null},getMultipleElementsFromSelector(E){const m=Yi(E);return m?gt.find(m):[]}},le=(E,m="hide")=>{const S=E.NAME;it.on(document,`click.dismiss${E.EVENT_KEY}`,`[data-bs-dismiss="${S}"]`,function($){if(["A","AREA"].includes(this.tagName)&&$.preventDefault(),vo(this))return;const U=gt.getElementFromSelector(this)||this.closest(`.${S}`);E.getOrCreateInstance(U)[m]()})},Mt=".bs.alert",W=`close${Mt}`,ad=`closed${Mt}`;class $o extends to{static get NAME(){return"alert"}close(){if(it.trigger(this._element,W).defaultPrevented)return;this._element.classList.remove("show");const m=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,m)}_destroyElement(){this._element.remove(),it.trigger(this._element,ad),this.dispose()}static jQueryInterface(m){return this.each(function(){const y=$o.getOrCreateInstance(this);if("string"==typeof m){if(void 0===y[m]||m.startsWith("_")||"constructor"===m)throw new TypeError(`No method named "${m}"`);y[m](this)}})}}le($o,"close"),Kt($o);const xt='[data-bs-toggle="button"]';class Uo extends to{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(m){return this.each(function(){const y=Uo.getOrCreateInstance(this);"toggle"===m&&y[m]()})}}it.on(document,"click.bs.button.data-api",xt,E=>{E.preventDefault();const m=E.target.closest(xt);Uo.getOrCreateInstance(m).toggle()}),Kt(Uo);const Me=".bs.swipe",ld=`touchstart${Me}`,ye=`touchmove${Me}`,Xs=`touchend${Me}`,cd=`pointerdown${Me}`,Un=`pointerup${Me}`,sr={endCallback:null,leftCallback:null,rightCallback:null},Gs={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Pr extends Ys{constructor(m,y){super(),this._element=m,m&&Pr.isSupported()&&(this._config=this._getConfig(y),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return sr}static get DefaultType(){return Gs}static get NAME(){return"swipe"}dispose(){it.off(this._element,Me)}_start(m){this._supportPointerEvents?this._eventIsPointerPenTouch(m)&&(this._deltaX=m.clientX):this._deltaX=m.touches[0].clientX}_end(m){this._eventIsPointerPenTouch(m)&&(this._deltaX=m.clientX-this._deltaX),this._handleSwipe(),se(this._config.endCallback)}_move(m){this._deltaX=m.touches&&m.touches.length>1?0:m.touches[0].clientX-this._deltaX}_handleSwipe(){const m=Math.abs(this._deltaX);if(m<=40)return;const y=m/this._deltaX;this._deltaX=0,y&&se(y>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(it.on(this._element,cd,m=>this._start(m)),it.on(this._element,Un,m=>this._end(m)),this._element.classList.add("pointer-event")):(it.on(this._element,ld,m=>this._start(m)),it.on(this._element,ye,m=>this._move(m)),it.on(this._element,Xs,m=>this._end(m)))}_eventIsPointerPenTouch(m){return this._supportPointerEvents&&("pen"===m.pointerType||"touch"===m.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const _o=".bs.carousel",ir=".data-api",ar="next",Ae="prev",zn="left",Ye="right",us=`slide${_o}`,Xe=`slid${_o}`,Rm=`keydown${_o}`,Xt=`mouseenter${_o}`,Xi=`mouseleave${_o}`,Dm=`dragstart${_o}`,ml=`load${_o}${ir}`,dd=`click${_o}${ir}`,ms="carousel",fs="active",gs={ArrowLeft:Ye,ArrowRight:zn},ud={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},md={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class lr extends to{constructor(m,y){super(m,y),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=gt.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===ms&&this.cycle()}static get Default(){return ud}static get DefaultType(){return md}static get NAME(){return"carousel"}next(){this._slide(ar)}nextWhenVisible(){!document.hidden&&Br(this._element)&&this.next()}prev(){this._slide(Ae)}pause(){this._isSliding&&cl(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?it.one(this._element,Xe,()=>this.cycle()):this.cycle())}to(m){const y=this._getItems();if(m>y.length-1||m<0)return;if(this._isSliding)return void it.one(this._element,Xe,()=>this.to(m));const S=this._getItemIndex(this._getActive());S!==m&&this._slide(m>S?ar:Ae,y[m])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(m){return m.defaultInterval=m.interval,m}_addEventListeners(){this._config.keyboard&&it.on(this._element,Rm,m=>this._keydown(m)),"hover"===this._config.pause&&(it.on(this._element,Xt,()=>this.pause()),it.on(this._element,Xi,()=>this._maybeEnableCycle())),this._config.touch&&Pr.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const y of gt.find(".carousel-item img",this._element))it.on(y,Dm,S=>S.preventDefault());this._swipeHelper=new Pr(this._element,{leftCallback:()=>this._slide(this._directionToOrder(zn)),rightCallback:()=>this._slide(this._directionToOrder(Ye)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(m){if(/input|textarea/i.test(m.target.tagName))return;const y=gs[m.key];y&&(m.preventDefault(),this._slide(this._directionToOrder(y)))}_getItemIndex(m){return this._getItems().indexOf(m)}_setActiveIndicatorElement(m){if(!this._indicatorsElement)return;const y=gt.findOne(".active",this._indicatorsElement);y.classList.remove(fs),y.removeAttribute("aria-current");const S=gt.findOne(`[data-bs-slide-to="${m}"]`,this._indicatorsElement);S&&(S.classList.add(fs),S.setAttribute("aria-current","true"))}_updateInterval(){const m=this._activeElement||this._getActive();if(!m)return;const y=Number.parseInt(m.getAttribute("data-bs-interval"),10);this._config.interval=y||this._config.defaultInterval}_slide(m,y=null){if(this._isSliding)return;const S=this._getActive(),$=m===ar,U=y||Ne(this._getItems(),S,$,this._config.wrap);if(U===S)return;const K=this._getItemIndex(U),nt=bt=>it.trigger(this._element,bt,{relatedTarget:U,direction:this._orderToDirection(m),from:this._getItemIndex(S),to:K});if(nt(us).defaultPrevented||!S||!U)return;const rt=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(K),this._activeElement=U;const yt=$?"carousel-item-start":"carousel-item-end",Ct=$?"carousel-item-next":"carousel-item-prev";U.classList.add(Ct),S.classList.add(yt),U.classList.add(yt),this._queueCallback(()=>{U.classList.remove(yt,Ct),U.classList.add(fs),S.classList.remove(fs,Ct,yt),this._isSliding=!1,nt(Xe)},S,this._isAnimated()),rt&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return gt.findOne(".active.carousel-item",this._element)}_getItems(){return gt.find(".carousel-item",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(m){return On()?m===zn?Ae:ar:m===zn?ar:Ae}_orderToDirection(m){return On()?m===Ae?zn:Ye:m===Ae?Ye:zn}static jQueryInterface(m){return this.each(function(){const y=lr.getOrCreateInstance(this,m);if("number"!=typeof m){if("string"==typeof m){if(void 0===y[m]||m.startsWith("_")||"constructor"===m)throw new TypeError(`No method named "${m}"`);y[m]()}}else y.to(m)})}}it.on(document,dd,"[data-bs-slide], [data-bs-slide-to]",function(E){const m=gt.getElementFromSelector(this);if(!m||!m.classList.contains(ms))return;E.preventDefault();const y=lr.getOrCreateInstance(m),S=this.getAttribute("data-bs-slide-to");return S?(y.to(S),void y._maybeEnableCycle()):"next"===Zn.getDataAttribute(this,"slide")?(y.next(),void y._maybeEnableCycle()):(y.prev(),void y._maybeEnableCycle())}),it.on(window,ml,()=>{const E=gt.find('[data-bs-ride="carousel"]');for(const m of E)lr.getOrCreateInstance(m)}),Kt(lr);const cr=".bs.collapse",fl=`show${cr}`,Qs=`shown${cr}`,Qi=`hide${cr}`,fd=`hidden${cr}`,Mr=`click${cr}.data-api`,zo="show",Ir="collapse",ps="collapsing",Js=`:scope .${Ir} .${Ir}`,Ji='[data-bs-toggle="collapse"]',gd={parent:null,toggle:!0},pd={parent:"(null|element)",toggle:"boolean"};class be extends to{constructor(m,y){super(m,y),this._isTransitioning=!1,this._triggerArray=[];const S=gt.find(Ji);for(const $ of S){const U=gt.getSelectorFromElement($),K=gt.find(U).filter(nt=>nt===this._element);null!==U&&K.length&&this._triggerArray.push($)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return gd}static get DefaultType(){return pd}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let m=[];if(this._config.parent&&(m=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter($=>$!==this._element).map($=>be.getOrCreateInstance($,{toggle:!1}))),m.length&&m[0]._isTransitioning||it.trigger(this._element,fl).defaultPrevented)return;for(const $ of m)$.hide();const y=this._getDimension();this._element.classList.remove(Ir),this._element.classList.add(ps),this._element.style[y]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const S=`scroll${y[0].toUpperCase()+y.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ps),this._element.classList.add(Ir,zo),this._element.style[y]="",it.trigger(this._element,Qs)},this._element,!0),this._element.style[y]=`${this._element[S]}px`}hide(){if(this._isTransitioning||!this._isShown()||it.trigger(this._element,Qi).defaultPrevented)return;const m=this._getDimension();this._element.style[m]=`${this._element.getBoundingClientRect()[m]}px`,this._element.classList.add(ps),this._element.classList.remove(Ir,zo);for(const y of this._triggerArray){const S=gt.getElementFromSelector(y);S&&!this._isShown(S)&&this._addAriaAndCollapsedClass([y],!1)}this._isTransitioning=!0,this._element.style[m]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ps),this._element.classList.add(Ir),it.trigger(this._element,fd)},this._element,!0)}_isShown(m=this._element){return m.classList.contains(zo)}_configAfterMerge(m){return m.toggle=Boolean(m.toggle),m.parent=nr(m.parent),m}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const m=this._getFirstLevelChildren(Ji);for(const y of m){const S=gt.getElementFromSelector(y);S&&this._addAriaAndCollapsedClass([y],this._isShown(S))}}_getFirstLevelChildren(m){const y=gt.find(Js,this._config.parent);return gt.find(m,this._config.parent).filter(S=>!y.includes(S))}_addAriaAndCollapsedClass(m,y){if(m.length)for(const S of m)S.classList.toggle("collapsed",!y),S.setAttribute("aria-expanded",y)}static jQueryInterface(m){const y={};return"string"==typeof m&&/show|hide/.test(m)&&(y.toggle=!1),this.each(function(){const S=be.getOrCreateInstance(this,y);if("string"==typeof m){if(void 0===S[m])throw new TypeError(`No method named "${m}"`);S[m]()}})}}it.on(document,Mr,Ji,function(E){("A"===E.target.tagName||E.delegateTarget&&"A"===E.delegateTarget.tagName)&&E.preventDefault();for(const m of gt.getMultipleElementsFromSelector(this))be.getOrCreateInstance(m,{toggle:!1}).toggle()}),Kt(be);var Gt="top",rn="bottom",sn="right",Oe="left",Zi="auto",Fr=[Gt,rn,sn,Oe],Qe="start",Co="end",Zs="clippingParents",ti="viewport",yn="popper",hd="reference",gl=Fr.reduce(function(E,m){return E.concat([m+"-"+Qe,m+"-"+Co])},[]),ta=[].concat(Fr,[Zi]).reduce(function(E,m){return E.concat([m,m+"-"+Qe,m+"-"+Co])},[]),pl="beforeRead",bl="afterRead",vl="beforeMain",_l="afterMain",bd="beforeWrite",Cl="afterWrite",wl=[pl,"read",bl,vl,"main",_l,bd,"write",Cl];function eo(E){return E?(E.nodeName||"").toLowerCase():null}function _n(E){if(null==E)return window;if("[object Window]"!==E.toString()){var m=E.ownerDocument;return m&&m.defaultView||window}return E}function dr(E){return E instanceof _n(E).Element||E instanceof Element}function Rn(E){return E instanceof _n(E).HTMLElement||E instanceof HTMLElement}function ea(E){return typeof ShadowRoot<"u"&&(E instanceof _n(E).ShadowRoot||E instanceof ShadowRoot)}const na={name:"applyStyles",enabled:!0,phase:"write",fn:function(E){var m=E.state;Object.keys(m.elements).forEach(function(y){var S=m.styles[y]||{},$=m.attributes[y]||{},U=m.elements[y];Rn(U)&&eo(U)&&(Object.assign(U.style,S),Object.keys($).forEach(function(K){var nt=$[K];!1===nt?U.removeAttribute(K):U.setAttribute(K,!0===nt?"":nt)}))})},effect:function(E){var m=E.state,y={popper:{position:m.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(m.elements.popper.style,y.popper),m.styles=y,m.elements.arrow&&Object.assign(m.elements.arrow.style,y.arrow),function(){Object.keys(m.elements).forEach(function(S){var $=m.elements[S],U=m.attributes[S]||{},K=Object.keys(m.styles.hasOwnProperty(S)?m.styles[S]:y[S]).reduce(function(nt,rt){return nt[rt]="",nt},{});Rn($)&&eo($)&&(Object.assign($.style,K),Object.keys(U).forEach(function(nt){$.removeAttribute(nt)}))})}},requires:["computeStyles"]};function wo(E){return E.split("-")[0]}var jr=Math.max,oa=Math.min,hs=Math.round;function Hn(){var E=navigator.userAgentData;return null!=E&&E.brands&&Array.isArray(E.brands)?E.brands.map(function(m){return m.brand+"/"+m.version}).join(" "):navigator.userAgent}function yd(){return!/^((?!chrome|android).)*safari/i.test(Hn())}function ur(E,m,y){void 0===m&&(m=!1),void 0===y&&(y=!1);var S=E.getBoundingClientRect(),$=1,U=1;m&&Rn(E)&&($=E.offsetWidth>0&&hs(S.width)/E.offsetWidth||1,U=E.offsetHeight>0&&hs(S.height)/E.offsetHeight||1);var K=(dr(E)?_n(E):window).visualViewport,nt=!yd()&&y,rt=(S.left+(nt&&K?K.offsetLeft:0))/$,yt=(S.top+(nt&&K?K.offsetTop:0))/U,Ct=S.width/$,bt=S.height/U;return{width:Ct,height:bt,top:yt,right:rt+Ct,bottom:yt+bt,left:rt,x:rt,y:yt}}function qn(E){var m=ur(E),y=E.offsetWidth,S=E.offsetHeight;return Math.abs(m.width-y)<=1&&(y=m.width),Math.abs(m.height-S)<=1&&(S=m.height),{x:E.offsetLeft,y:E.offsetTop,width:y,height:S}}function no(E,m){var y=m.getRootNode&&m.getRootNode();if(E.contains(m))return!0;if(y&&ea(y)){var S=m;do{if(S&&E.isSameNode(S))return!0;S=S.parentNode||S.host}while(S)}return!1}function an(E){return _n(E).getComputedStyle(E)}function Bm(E){return["table","td","th"].indexOf(eo(E))>=0}function Rt(E){return((dr(E)?E.ownerDocument:E.document)||window.document).documentElement}function ra(E){return"html"===eo(E)?E:E.assignedSlot||E.parentNode||(ea(E)?E.host:null)||Rt(E)}function El(E){return Rn(E)&&"fixed"!==an(E).position?E.offsetParent:null}function bs(E){for(var m=_n(E),y=El(E);y&&Bm(y)&&"static"===an(y).position;)y=El(y);return y&&("html"===eo(y)||"body"===eo(y)&&"static"===an(y).position)?m:y||function(S){var $=/firefox/i.test(Hn());if(/Trident/i.test(Hn())&&Rn(S)&&"fixed"===an(S).position)return null;var U=ra(S);for(ea(U)&&(U=U.host);Rn(U)&&["html","body"].indexOf(eo(U))<0;){var K=an(U);if("none"!==K.transform||"none"!==K.perspective||"paint"===K.contain||-1!==["transform","perspective"].indexOf(K.willChange)||$&&"filter"===K.willChange||$&&K.filter&&"none"!==K.filter)return U;U=U.parentNode}return null}(E)||m}function Q(E){return["top","bottom"].indexOf(E)>=0?"x":"y"}function Eo(E,m,y){return jr(E,oa(m,y))}function xl(E){return Object.assign({},{top:0,right:0,bottom:0,left:0},E)}function qe(E,m){return m.reduce(function(y,S){return y[S]=E,y},{})}const $r={name:"arrow",enabled:!0,phase:"main",fn:function(E){var m,ae,re,y=E.state,S=E.name,$=E.options,U=y.elements.arrow,K=y.modifiersData.popperOffsets,nt=wo(y.placement),rt=Q(nt),yt=[Oe,sn].indexOf(nt)>=0?"height":"width";if(U&&K){var Ct=(re=y,xl("number"!=typeof(ae="function"==typeof(ae=$.padding)?ae(Object.assign({},re.rects,{placement:re.placement})):ae)?ae:qe(ae,Fr))),bt=qn(U),It="y"===rt?Gt:Oe,Dt="y"===rt?rn:sn,Lt=y.rects.reference[yt]+y.rects.reference[rt]-K[rt]-y.rects.popper[yt],Bt=K[rt]-y.rects.reference[rt],Pt=bs(U),oe=Pt?"y"===rt?Pt.clientHeight||0:Pt.clientWidth||0:0,$t=oe/2-bt[yt]/2+(Lt/2-Bt/2),qt=Eo(Ct[It],$t,oe-bt[yt]-Ct[Dt]);y.modifiersData[S]=((m={})[rt]=qt,m.centerOffset=qt-$t,m)}},effect:function(E){var m=E.state,y=E.options.element,S=void 0===y?"[data-popper-arrow]":y;null!=S&&("string"!=typeof S||(S=m.elements.popper.querySelector(S)))&&no(m.elements.popper,S)&&(m.elements.arrow=S)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function vs(E){return E.split("-")[1]}var _d={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Cd(E){var m,y=E.popper,S=E.popperRect,$=E.placement,U=E.variation,K=E.offsets,nt=E.position,rt=E.gpuAcceleration,yt=E.adaptive,Ct=E.roundOffsets,bt=E.isFixed,It=K.x,Dt=void 0===It?0:It,Lt=K.y,Bt=void 0===Lt?0:Lt,Pt="function"==typeof Ct?Ct({x:Dt,y:Bt}):{x:Dt,y:Bt};Dt=Pt.x,Bt=Pt.y;var oe=K.hasOwnProperty("x"),de=K.hasOwnProperty("y"),jt=Oe,Ht=Gt,$t=window;if(yt){var qt=bs(y),ie="clientHeight",ae="clientWidth";qt===_n(y)&&"static"!==an(qt=Rt(y)).position&&"absolute"===nt&&(ie="scrollHeight",ae="scrollWidth"),($===Gt||($===Oe||$===sn)&&U===Co)&&(Ht=rn,Bt-=(bt&&qt===$t&&$t.visualViewport?$t.visualViewport.height:qt[ie])-S.height,Bt*=rt?1:-1),$!==Oe&&($!==Gt&&$!==rn||U!==Co)||(jt=sn,Dt-=(bt&&qt===$t&&$t.visualViewport?$t.visualViewport.width:qt[ae])-S.width,Dt*=rt?1:-1)}var re,Wn,tn,Kn,ue,we=Object.assign({position:nt},yt&&_d),wn=!0===Ct?(Wn={x:Dt,y:Bt},tn=_n(y),Kn=Wn.y,{x:hs(Wn.x*(ue=tn.devicePixelRatio||1))/ue||0,y:hs(Kn*ue)/ue||0}):{x:Dt,y:Bt};return Dt=wn.x,Bt=wn.y,Object.assign({},we,rt?((re={})[Ht]=de?"0":"",re[jt]=oe?"0":"",re.transform=($t.devicePixelRatio||1)<=1?"translate("+Dt+"px, "+Bt+"px)":"translate3d("+Dt+"px, "+Bt+"px, 0)",re):((m={})[Ht]=de?Bt+"px":"",m[jt]=oe?Dt+"px":"",m.transform="",m))}const kl={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(E){var m=E.state,y=E.options,S=y.gpuAcceleration,$=void 0===S||S,U=y.adaptive,K=void 0===U||U,nt=y.roundOffsets,rt=void 0===nt||nt,yt={placement:wo(m.placement),variation:vs(m.placement),popper:m.elements.popper,popperRect:m.rects.popper,gpuAcceleration:$,isFixed:"fixed"===m.options.strategy};null!=m.modifiersData.popperOffsets&&(m.styles.popper=Object.assign({},m.styles.popper,Cd(Object.assign({},yt,{offsets:m.modifiersData.popperOffsets,position:m.options.strategy,adaptive:K,roundOffsets:rt})))),null!=m.modifiersData.arrow&&(m.styles.arrow=Object.assign({},m.styles.arrow,Cd(Object.assign({},yt,{offsets:m.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:rt})))),m.attributes.popper=Object.assign({},m.attributes.popper,{"data-popper-placement":m.placement})},data:{}};var Wt={passive:!0};const sa={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(E){var m=E.state,y=E.instance,S=E.options,$=S.scroll,U=void 0===$||$,K=S.resize,nt=void 0===K||K,rt=_n(m.elements.popper),yt=[].concat(m.scrollParents.reference,m.scrollParents.popper);return U&&yt.forEach(function(Ct){Ct.addEventListener("scroll",y.update,Wt)}),nt&&rt.addEventListener("resize",y.update,Wt),function(){U&&yt.forEach(function(Ct){Ct.removeEventListener("scroll",y.update,Wt)}),nt&&rt.removeEventListener("resize",y.update,Wt)}},data:{}};var ia={left:"right",right:"left",bottom:"top",top:"bottom"};function ys(E){return E.replace(/left|right|bottom|top/g,function(m){return ia[m]})}var ln={start:"end",end:"start"};function Cn(E){return E.replace(/start|end/g,function(m){return ln[m]})}function Sl(E){var m=_n(E);return{scrollLeft:m.pageXOffset,scrollTop:m.pageYOffset}}function Nl(E){return ur(Rt(E)).left+Sl(E).scrollLeft}function ei(E){var m=an(E);return/auto|scroll|overlay|hidden/.test(m.overflow+m.overflowY+m.overflowX)}function Al(E){return["html","body","#document"].indexOf(eo(E))>=0?E.ownerDocument.body:Rn(E)&&ei(E)?E:Al(ra(E))}function fe(E,m){var y;void 0===m&&(m=[]);var S=Al(E),$=S===(null==(y=E.ownerDocument)?void 0:y.body),U=_n(S),K=$?[U].concat(U.visualViewport||[],ei(S)?S:[]):S,nt=m.concat(K);return $?nt:nt.concat(fe(ra(K)))}function xo(E){return Object.assign({},E,{left:E.x,top:E.y,right:E.x+E.width,bottom:E.y+E.height})}function cn(E,m,y){return m===ti?xo(function(S,$){var U=_n(S),K=Rt(S),nt=U.visualViewport,rt=K.clientWidth,yt=K.clientHeight,Ct=0,bt=0;if(nt){rt=nt.width,yt=nt.height;var It=yd();(It||!It&&"fixed"===$)&&(Ct=nt.offsetLeft,bt=nt.offsetTop)}return{width:rt,height:yt,x:Ct+Nl(S),y:bt}}(E,y)):dr(m)?((U=ur(S=m,!1,"fixed"===y)).top=U.top+S.clientTop,U.left=U.left+S.clientLeft,U.bottom=U.top+S.clientHeight,U.right=U.left+S.clientWidth,U.width=S.clientWidth,U.height=S.clientHeight,U.x=U.left,U.y=U.top,U):xo(function(S){var $,U=Rt(S),K=Sl(S),nt=null==($=S.ownerDocument)?void 0:$.body,rt=jr(U.scrollWidth,U.clientWidth,nt?nt.scrollWidth:0,nt?nt.clientWidth:0),yt=jr(U.scrollHeight,U.clientHeight,nt?nt.scrollHeight:0,nt?nt.clientHeight:0),Ct=-K.scrollLeft+Nl(S),bt=-K.scrollTop;return"rtl"===an(nt||U).direction&&(Ct+=jr(U.clientWidth,nt?nt.clientWidth:0)-rt),{width:rt,height:yt,x:Ct,y:bt}}(Rt(E)));var S,U}function ko(E){var m,y=E.reference,S=E.element,$=E.placement,U=$?wo($):null,K=$?vs($):null,nt=y.x+y.width/2-S.width/2,rt=y.y+y.height/2-S.height/2;switch(U){case Gt:m={x:nt,y:y.y-S.height};break;case rn:m={x:nt,y:y.y+y.height};break;case sn:m={x:y.x+y.width,y:rt};break;case Oe:m={x:y.x-S.width,y:rt};break;default:m={x:y.x,y:y.y}}var yt=U?Q(U):null;if(null!=yt){var Ct="y"===yt?"height":"width";switch(K){case Qe:m[yt]=m[yt]-(y[Ct]/2-S[Ct]/2);break;case Co:m[yt]=m[yt]+(y[Ct]/2-S[Ct]/2)}}return m}function So(E,m){void 0===m&&(m={});var tn,En,Kn,ue,Yt,gn,Mn,Pn,Mo,Ve,S=m.placement,$=void 0===S?E.placement:S,U=m.strategy,K=void 0===U?E.strategy:U,nt=m.boundary,rt=void 0===nt?Zs:nt,yt=m.rootBoundary,Ct=void 0===yt?ti:yt,bt=m.elementContext,It=void 0===bt?yn:bt,Dt=m.altBoundary,Lt=void 0!==Dt&&Dt,Bt=m.padding,Pt=void 0===Bt?0:Bt,oe=xl("number"!=typeof Pt?Pt:qe(Pt,Fr)),jt=E.rects.popper,Ht=E.elements[Lt?It===yn?hd:yn:It],$t=(tn=dr(Ht)?Ht:Ht.contextElement||Rt(E.elements.popper),Kn=Ct,ue=K,Pn="clippingParents"===(En=rt)?(gn=fe(ra(Yt=tn)),dr(Mn=["absolute","fixed"].indexOf(an(Yt).position)>=0&&Rn(Yt)?bs(Yt):Yt)?gn.filter(function(Io){return dr(Io)&&no(Io,Mn)&&"body"!==eo(Io)}):[]):[].concat(En),Ve=(Mo=[].concat(Pn,[Kn])).reduce(function(Yt,gn){var Mn=cn(tn,gn,ue);return Yt.top=jr(Mn.top,Yt.top),Yt.right=oa(Mn.right,Yt.right),Yt.bottom=oa(Mn.bottom,Yt.bottom),Yt.left=jr(Mn.left,Yt.left),Yt},cn(tn,Mo[0],ue)),Ve.width=Ve.right-Ve.left,Ve.height=Ve.bottom-Ve.top,Ve.x=Ve.left,Ve.y=Ve.top,Ve),qt=ur(E.elements.reference),ie=ko({reference:qt,element:jt,strategy:"absolute",placement:$}),ae=xo(Object.assign({},jt,ie)),re=It===yn?ae:qt,we={top:$t.top-re.top+oe.top,bottom:re.bottom-$t.bottom+oe.bottom,left:$t.left-re.left+oe.left,right:re.right-$t.right+oe.right},wn=E.modifiersData.offset;if(It===yn&&wn){var Wn=wn[$];Object.keys(we).forEach(function(tn){var En=[sn,rn].indexOf(tn)>=0?1:-1,Kn=[Gt,rn].indexOf(tn)>=0?"y":"x";we[tn]+=Wn[Kn]*En})}return we}const Ol={name:"flip",enabled:!0,phase:"main",fn:function(E){var m=E.state,y=E.options,S=E.name;if(!m.modifiersData[S]._skip){for(var $=y.mainAxis,U=void 0===$||$,K=y.altAxis,nt=void 0===K||K,rt=y.fallbackPlacements,yt=y.padding,Ct=y.boundary,bt=y.rootBoundary,It=y.altBoundary,Dt=y.flipVariations,Lt=void 0===Dt||Dt,Bt=y.allowedAutoPlacements,Pt=m.options.placement,oe=wo(Pt),de=rt||(oe!==Pt&&Lt?function(Yt){if(wo(Yt)===Zi)return[];var gn=ys(Yt);return[Cn(Yt),gn,Cn(gn)]}(Pt):[ys(Pt)]),jt=[Pt].concat(de).reduce(function(Yt,gn){return Yt.concat(wo(gn)===Zi?function Te(E,m){void 0===m&&(m={});var $=m.boundary,U=m.rootBoundary,K=m.padding,nt=m.flipVariations,rt=m.allowedAutoPlacements,yt=void 0===rt?ta:rt,Ct=vs(m.placement),bt=Ct?nt?gl:gl.filter(function(Lt){return vs(Lt)===Ct}):Fr,It=bt.filter(function(Lt){return yt.indexOf(Lt)>=0});0===It.length&&(It=bt);var Dt=It.reduce(function(Lt,Bt){return Lt[Bt]=So(E,{placement:Bt,boundary:$,rootBoundary:U,padding:K})[wo(Bt)],Lt},{});return Object.keys(Dt).sort(function(Lt,Bt){return Dt[Lt]-Dt[Bt]})}(m,{placement:gn,boundary:Ct,rootBoundary:bt,padding:yt,flipVariations:Lt,allowedAutoPlacements:Bt}):gn)},[]),Ht=m.rects.reference,$t=m.rects.popper,qt=new Map,ie=!0,ae=jt[0],re=0;re<jt.length;re++){var we=jt[re],wn=wo(we),Wn=vs(we)===Qe,tn=[Gt,rn].indexOf(wn)>=0,En=tn?"width":"height",Kn=So(m,{placement:we,boundary:Ct,rootBoundary:bt,altBoundary:It,padding:yt}),ue=tn?Wn?sn:Oe:Wn?rn:Gt;Ht[En]>$t[En]&&(ue=ys(ue));var Pn=ys(ue),Mo=[];if(U&&Mo.push(Kn[wn]<=0),nt&&Mo.push(Kn[ue]<=0,Kn[Pn]<=0),Mo.every(function(Yt){return Yt})){ae=we,ie=!1;break}qt.set(we,Mo)}if(ie)for(var Os=function(Yt){var gn=jt.find(function(Mn){var Io=qt.get(Mn);if(Io)return Io.slice(0,Yt).every(function(gi){return gi})});if(gn)return ae=gn,"break"},Ve=Lt?3:1;Ve>0&&"break"!==Os(Ve);Ve--);m.placement!==ae&&(m.modifiersData[S]._skip=!0,m.placement=ae,m.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function aa(E,m,y){return void 0===y&&(y={x:0,y:0}),{top:E.top-m.height-y.y,right:E.right-m.width+y.x,bottom:E.bottom-m.height+y.y,left:E.left-m.width-y.x}}function _s(E){return[Gt,sn,rn,Oe].some(function(m){return E[m]>=0})}const Tl={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(E){var m=E.state,y=E.name,S=m.rects.reference,$=m.rects.popper,U=m.modifiersData.preventOverflow,K=So(m,{elementContext:"reference"}),nt=So(m,{altBoundary:!0}),rt=aa(K,S),yt=aa(nt,$,U),Ct=_s(rt),bt=_s(yt);m.modifiersData[y]={referenceClippingOffsets:rt,popperEscapeOffsets:yt,isReferenceHidden:Ct,hasPopperEscaped:bt},m.attributes.popper=Object.assign({},m.attributes.popper,{"data-popper-reference-hidden":Ct,"data-popper-escaped":bt})}},Rl={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(E){var m=E.state,S=E.name,$=E.options.offset,U=void 0===$?[0,0]:$,K=ta.reduce(function(Ct,bt){return Ct[bt]=(Dt=m.rects,Lt=U,Bt=wo(It=bt),Pt=[Oe,Gt].indexOf(Bt)>=0?-1:1,de=(de=(oe="function"==typeof Lt?Lt(Object.assign({},Dt,{placement:It})):Lt)[0])||0,jt=((jt=oe[1])||0)*Pt,[Oe,sn].indexOf(Bt)>=0?{x:jt,y:de}:{x:de,y:jt}),Ct;var It,Dt,Lt,Bt,Pt,oe,de,jt},{}),nt=K[m.placement],yt=nt.y;null!=m.modifiersData.popperOffsets&&(m.modifiersData.popperOffsets.x+=nt.x,m.modifiersData.popperOffsets.y+=yt),m.modifiersData[S]=K}},la={name:"popperOffsets",enabled:!0,phase:"read",fn:function(E){var m=E.state;m.modifiersData[E.name]=ko({reference:m.rects.reference,element:m.rects.popper,strategy:"absolute",placement:m.placement})},data:{}},Ur={name:"preventOverflow",enabled:!0,phase:"main",fn:function(E){var vi,Gd,m=E.state,y=E.options,S=E.name,$=y.mainAxis,U=void 0===$||$,K=y.altAxis,nt=void 0!==K&&K,It=y.tether,Dt=void 0===It||It,Lt=y.tetherOffset,Bt=void 0===Lt?0:Lt,Pt=So(m,{boundary:y.boundary,rootBoundary:y.rootBoundary,padding:y.padding,altBoundary:y.altBoundary}),oe=wo(m.placement),de=vs(m.placement),jt=!de,Ht=Q(oe),$t="x"===Ht?"y":"x",qt=m.modifiersData.popperOffsets,ie=m.rects.reference,ae=m.rects.popper,re="function"==typeof Bt?Bt(Object.assign({},m.rects,{placement:m.placement})):Bt,we="number"==typeof re?{mainAxis:re,altAxis:re}:Object.assign({mainAxis:0,altAxis:0},re),wn=m.modifiersData.offset?m.modifiersData.offset[m.placement]:null,Wn={x:0,y:0};if(qt){if(U){var tn,En="y"===Ht?Gt:Oe,Kn="y"===Ht?rn:sn,ue="y"===Ht?"height":"width",Pn=qt[Ht],Mo=Pn+Pt[En],Os=Pn-Pt[Kn],Ve=Dt?-ae[ue]/2:0,Yt=de===Qe?ie[ue]:ae[ue],gn=de===Qe?-ae[ue]:-ie[ue],Mn=m.elements.arrow,Io=Dt&&Mn?qn(Mn):{width:0,height:0},gi=m.modifiersData["arrow#persistent"]?m.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Ql=gi[En],Na=gi[Kn],io=Eo(0,ie[ue],Io[ue]),Fe=jt?ie[ue]/2-Ve-io-Ql-we.mainAxis:Yt-io-Ql-we.mainAxis,Wd=jt?-ie[ue]/2+Ve+io+Na+we.mainAxis:gn+io+Na+we.mainAxis,Ts=m.elements.arrow&&bs(m.elements.arrow),Yn=null!=(tn=wn?.[Ht])?tn:0,Jl=Pn+Wd-Yn,Zl=Eo(Dt?oa(Mo,Pn+Fe-Yn-(Ts?"y"===Ht?Ts.clientTop||0:Ts.clientLeft||0:0)):Mo,Pn,Dt?jr(Os,Jl):Os);qt[Ht]=Zl,Wn[Ht]=Zl-Pn}if(nt){var tc,xn=qt[$t],Rs="y"===$t?"height":"width",Yd=xn+Pt["x"===Ht?Gt:Oe],nc=xn-Pt["x"===Ht?rn:sn],hi=-1!==[Gt,Oe].indexOf(oe),Xd=null!=(tc=wn?.[$t])?tc:0,Aa=hi?Yd:xn-ie[Rs]-ae[Rs]-Xd+we.altAxis,bi=hi?xn+ie[Rs]+ae[Rs]-Xd-we.altAxis:nc,Ds=Dt&&hi?(Gd=Eo(Aa,xn,vi=bi))>vi?vi:Gd:Eo(Dt?Aa:Yd,xn,Dt?bi:nc);qt[$t]=Ds,Wn[$t]=Ds-xn}m.modifiersData[S]=Wn}},requiresIfExists:["offset"]};function wd(E,m,y){void 0===y&&(y=!1);var S,$,bt,It,Dt,Lt,U=Rn(m),K=Rn(m)&&(It=(bt=m).getBoundingClientRect(),Dt=hs(It.width)/bt.offsetWidth||1,Lt=hs(It.height)/bt.offsetHeight||1,1!==Dt||1!==Lt),nt=Rt(m),rt=ur(E,K,y),yt={scrollLeft:0,scrollTop:0},Ct={x:0,y:0};return(U||!U&&!y)&&(("body"!==eo(m)||ei(nt))&&(yt=(S=m)!==_n(S)&&Rn(S)?{scrollLeft:($=S).scrollLeft,scrollTop:$.scrollTop}:Sl(S)),Rn(m)?((Ct=ur(m,!0)).x+=m.clientLeft,Ct.y+=m.clientTop):nt&&(Ct.x=Nl(nt))),{x:rt.left+yt.scrollLeft-Ct.x,y:rt.top+yt.scrollTop-Ct.y,width:rt.width,height:rt.height}}function ni(E){var m=new Map,y=new Set,S=[];function $(U){y.add(U.name),[].concat(U.requires||[],U.requiresIfExists||[]).forEach(function(K){if(!y.has(K)){var nt=m.get(K);nt&&$(nt)}}),S.push(U)}return E.forEach(function(U){m.set(U.name,U)}),E.forEach(function(U){y.has(U.name)||$(U)}),S}var ca={placement:"bottom",modifiers:[],strategy:"absolute"};function Cs(){for(var E=arguments.length,m=new Array(E),y=0;y<E;y++)m[y]=arguments[y];return!m.some(function(S){return!(S&&"function"==typeof S.getBoundingClientRect)})}function mr(E){void 0===E&&(E={});var y=E.defaultModifiers,S=void 0===y?[]:y,$=E.defaultOptions,U=void 0===$?ca:$;return function(K,nt,rt){void 0===rt&&(rt=U);var yt,Ct,bt={placement:"bottom",orderedModifiers:[],options:Object.assign({},ca,U),modifiersData:{},elements:{reference:K,popper:nt},attributes:{},styles:{}},It=[],Dt=!1,Lt={state:bt,setOptions:function(Pt){var oe="function"==typeof Pt?Pt(bt.options):Pt;Bt(),bt.options=Object.assign({},U,bt.options,oe),bt.scrollParents={reference:dr(K)?fe(K):K.contextElement?fe(K.contextElement):[],popper:fe(nt)};var de,jt,$t,qt,Ht=(de=[].concat(S,bt.options.modifiers),jt=de.reduce(function($t,qt){var ie=$t[qt.name];return $t[qt.name]=ie?Object.assign({},ie,qt,{options:Object.assign({},ie.options,qt.options),data:Object.assign({},ie.data,qt.data)}):qt,$t},{}),$t=Object.keys(jt).map(function($t){return jt[$t]}),qt=ni($t),wl.reduce(function(ie,ae){return ie.concat(qt.filter(function(re){return re.phase===ae}))},[]));return bt.orderedModifiers=Ht.filter(function($t){return $t.enabled}),bt.orderedModifiers.forEach(function($t){var ie=$t.options,re=$t.effect;if("function"==typeof re){var we=re({state:bt,name:$t.name,instance:Lt,options:void 0===ie?{}:ie});It.push(we||function(){})}}),Lt.update()},forceUpdate:function(){if(!Dt){var Pt=bt.elements,oe=Pt.reference,de=Pt.popper;if(Cs(oe,de)){bt.rects={reference:wd(oe,bs(de),"fixed"===bt.options.strategy),popper:qn(de)},bt.reset=!1,bt.placement=bt.options.placement,bt.orderedModifiers.forEach(function(re){return bt.modifiersData[re.name]=Object.assign({},re.data)});for(var jt=0;jt<bt.orderedModifiers.length;jt++)if(!0!==bt.reset){var Ht=bt.orderedModifiers[jt],$t=Ht.fn,qt=Ht.options;"function"==typeof $t&&(bt=$t({state:bt,options:void 0===qt?{}:qt,name:Ht.name,instance:Lt})||bt)}else bt.reset=!1,jt=-1}}},update:(yt=function(){return new Promise(function(Pt){Lt.forceUpdate(),Pt(bt)})},function(){return Ct||(Ct=new Promise(function(Pt){Promise.resolve().then(function(){Ct=void 0,Pt(yt())})})),Ct}),destroy:function(){Bt(),Dt=!0}};if(!Cs(K,nt))return Lt;function Bt(){It.forEach(function(Pt){return Pt()}),It=[]}return Lt.setOptions(rt).then(function(Pt){!Dt&&rt.onFirstUpdate&&rt.onFirstUpdate(Pt)}),Lt}}var Re=mr(),ws=mr({defaultModifiers:[sa,la,kl,na]}),O=mr({defaultModifiers:[sa,la,kl,na,Rl,Ol,Ur,$r,Tl]});const Ed=Object.freeze(Object.defineProperty({__proto__:null,afterMain:_l,afterRead:bl,afterWrite:Cl,applyStyles:na,arrow:$r,auto:Zi,basePlacements:Fr,beforeMain:vl,beforeRead:pl,beforeWrite:bd,bottom:rn,clippingParents:Zs,computeStyles:kl,createPopper:O,createPopperBase:Re,createPopperLite:ws,detectOverflow:So,end:Co,eventListeners:sa,flip:Ol,hide:Tl,left:Oe,main:"main",modifierPhases:wl,offset:Rl,placements:ta,popper:yn,popperGenerator:mr,popperOffsets:la,preventOverflow:Ur,read:"read",reference:hd,right:sn,start:Qe,top:Gt,variationPlacements:gl,viewport:ti,write:"write"},Symbol.toStringTag,{value:"Module"})),Dl="dropdown",Ge=".bs.dropdown",da=".data-api",zt="ArrowUp",No="ArrowDown",xd=`hide${Ge}`,Ho=`hidden${Ge}`,oi=`show${Ge}`,Vn=`shown${Ge}`,ri=`click${Ge}${da}`,Bl=`keydown${Ge}${da}`,zr=`keyup${Ge}${da}`,Ao="show",fr='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',kd=`${fr}.show`,_e=".dropdown-menu",Es=On()?"top-end":"top-start",Ll=On()?"top-start":"top-end",Pl=On()?"bottom-end":"bottom-start",Ml=On()?"bottom-start":"bottom-end",Il=On()?"left-start":"right-start",Sd=On()?"right-start":"left-start",Lm={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},gr={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Dn extends to{constructor(m,y){super(m,y),this._popper=null,this._parent=this._element.parentNode,this._menu=gt.next(this._element,_e)[0]||gt.prev(this._element,_e)[0]||gt.findOne(_e,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Lm}static get DefaultType(){return gr}static get NAME(){return Dl}toggle(){return this._isShown()?this.hide():this.show()}show(){if(vo(this._element)||this._isShown())return;const m={relatedTarget:this._element};if(!it.trigger(this._element,oi,m).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const y of[].concat(...document.body.children))it.on(y,"mouseover",Ks);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ao),this._element.classList.add(Ao),it.trigger(this._element,Vn,m)}}hide(){!vo(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(m){if(!it.trigger(this._element,xd,m).defaultPrevented){if("ontouchstart"in document.documentElement)for(const y of[].concat(...document.body.children))it.off(y,"mouseover",Ks);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ao),this._element.classList.remove(Ao),this._element.setAttribute("aria-expanded","false"),Zn.removeDataAttribute(this._menu,"popper"),it.trigger(this._element,Ho,m)}}_getConfig(m){if("object"==typeof(m=super._getConfig(m)).reference&&!Jn(m.reference)&&"function"!=typeof m.reference.getBoundingClientRect)throw new TypeError(`${Dl.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return m}_createPopper(){if(void 0===Ed)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let m=this._element;"parent"===this._config.reference?m=this._parent:Jn(this._config.reference)?m=nr(this._config.reference):"object"==typeof this._config.reference&&(m=this._config.reference);const y=this._getPopperConfig();this._popper=O(m,this._menu,y)}_isShown(){return this._menu.classList.contains(Ao)}_getPlacement(){const m=this._parent;if(m.classList.contains("dropend"))return Il;if(m.classList.contains("dropstart"))return Sd;if(m.classList.contains("dropup-center"))return"top";if(m.classList.contains("dropdown-center"))return"bottom";const y="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return m.classList.contains("dropup")?y?Ll:Es:y?Ml:Pl}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:m}=this._config;return"string"==typeof m?m.split(",").map(y=>Number.parseInt(y,10)):"function"==typeof m?y=>m(y,this._element):m}_getPopperConfig(){const m={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(Zn.setDataAttribute(this._menu,"popper","static"),m.modifiers=[{name:"applyStyles",enabled:!1}]),{...m,...se(this._config.popperConfig,[m])}}_selectMenuItem({key:m,target:y}){const S=gt.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter($=>Br($));S.length&&Ne(S,y,m===No,!S.includes(y)).focus()}static jQueryInterface(m){return this.each(function(){const y=Dn.getOrCreateInstance(this,m);if("string"==typeof m){if(void 0===y[m])throw new TypeError(`No method named "${m}"`);y[m]()}})}static clearMenus(m){if(2===m.button||"keyup"===m.type&&"Tab"!==m.key)return;const y=gt.find(kd);for(const S of y){const $=Dn.getInstance(S);if(!$||!1===$._config.autoClose)continue;const U=m.composedPath(),K=U.includes($._menu);if(U.includes($._element)||"inside"===$._config.autoClose&&!K||"outside"===$._config.autoClose&&K||$._menu.contains(m.target)&&("keyup"===m.type&&"Tab"===m.key||/input|select|option|textarea|form/i.test(m.target.tagName)))continue;const nt={relatedTarget:$._element};"click"===m.type&&(nt.clickEvent=m),$._completeHide(nt)}}static dataApiKeydownHandler(m){const y=/input|textarea/i.test(m.target.tagName),S="Escape"===m.key,$=[zt,No].includes(m.key);if(!$&&!S||y&&!S)return;m.preventDefault();const U=this.matches(fr)?this:gt.prev(this,fr)[0]||gt.next(this,fr)[0]||gt.findOne(fr,m.delegateTarget.parentNode),K=Dn.getOrCreateInstance(U);if($)return m.stopPropagation(),K.show(),void K._selectMenuItem(m);K._isShown()&&(m.stopPropagation(),K.hide(),U.focus())}}it.on(document,Bl,fr,Dn.dataApiKeydownHandler),it.on(document,Bl,_e,Dn.dataApiKeydownHandler),it.on(document,ri,Dn.clearMenus),it.on(document,zr,Dn.clearMenus),it.on(document,ri,fr,function(E){E.preventDefault(),Dn.getOrCreateInstance(this).toggle()}),Kt(Dn);const Nd="backdrop",Ad=`mousedown.bs.${Nd}`,xs={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Od={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Oo extends Ys{constructor(m){super(),this._config=this._getConfig(m),this._isAppended=!1,this._element=null}static get Default(){return xs}static get DefaultType(){return Od}static get NAME(){return Nd}show(m){if(!this._config.isVisible)return void se(m);this._append();this._getElement().classList.add("show"),this._emulateAnimation(()=>{se(m)})}hide(m){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),se(m)})):se(m)}dispose(){this._isAppended&&(it.off(this._element,Ad),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const m=document.createElement("div");m.className=this._config.className,this._config.isAnimated&&m.classList.add("fade"),this._element=m}return this._element}_configAfterMerge(m){return m.rootElement=nr(m.rootElement),m}_append(){if(this._isAppended)return;const m=this._getElement();this._config.rootElement.append(m),it.on(m,Ad,()=>{se(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(m){rr(m,this._getElement(),this._config.isAnimated)}}const To=".bs.focustrap",si=`focusin${To}`,ii=`keydown.tab${To}`,pr="backward",Hr={autofocus:!0,trapElement:null},Pm={autofocus:"boolean",trapElement:"element"};class ks extends Ys{constructor(m){super(),this._config=this._getConfig(m),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Hr}static get DefaultType(){return Pm}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),it.off(document,To),it.on(document,si,m=>this._handleFocusin(m)),it.on(document,ii,m=>this._handleKeydown(m)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,it.off(document,To))}_handleFocusin(m){const{trapElement:y}=this._config;if(m.target===document||m.target===y||y.contains(m.target))return;const S=gt.focusableChildren(y);0===S.length?y.focus():this._lastTabNavDirection===pr?S[S.length-1].focus():S[0].focus()}_handleKeydown(m){"Tab"===m.key&&(this._lastTabNavDirection=m.shiftKey?pr:"forward")}}const jl=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",$l=".sticky-top",qr="padding-right",oo="margin-right";class ua{constructor(){this._element=document.body}getWidth(){const m=document.documentElement.clientWidth;return Math.abs(window.innerWidth-m)}hide(){const m=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,qr,y=>y+m),this._setElementAttributes(jl,qr,y=>y+m),this._setElementAttributes($l,oo,y=>y-m)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,qr),this._resetElementAttributes(jl,qr),this._resetElementAttributes($l,oo)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(m,y,S){const $=this.getWidth();this._applyManipulationCallback(m,U=>{if(U!==this._element&&window.innerWidth>U.clientWidth+$)return;this._saveInitialAttribute(U,y);const K=window.getComputedStyle(U).getPropertyValue(y);U.style.setProperty(y,`${S(Number.parseFloat(K))}px`)})}_saveInitialAttribute(m,y){const S=m.style.getPropertyValue(y);S&&Zn.setDataAttribute(m,y,S)}_resetElementAttributes(m,y){this._applyManipulationCallback(m,S=>{const $=Zn.getDataAttribute(S,y);null!==$?(Zn.removeDataAttribute(S,y),S.style.setProperty(y,$)):S.style.removeProperty(y)})}_applyManipulationCallback(m,y){if(Jn(m))y(m);else for(const S of gt.find(m,this._element))y(S)}}const dn=".bs.modal",Td=`hide${dn}`,Rd=`hidePrevented${dn}`,Je=`hidden${dn}`,Ro=`show${dn}`,Dd=`shown${dn}`,ge=`resize${dn}`,Bd=`click.dismiss${dn}`,Vr=`mousedown.dismiss${dn}`,Ss=`keydown.dismiss${dn}`,ne=`click${dn}.data-api`,Do="modal-open",fa="modal-static",ga={backdrop:!0,focus:!0,keyboard:!0},Mm={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Wr extends to{constructor(m,y){super(m,y),this._dialog=gt.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ua,this._addEventListeners()}static get Default(){return ga}static get DefaultType(){return Mm}static get NAME(){return"modal"}toggle(m){return this._isShown?this.hide():this.show(m)}show(m){this._isShown||this._isTransitioning||it.trigger(this._element,Ro,{relatedTarget:m}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Do),this._adjustDialog(),this._backdrop.show(()=>this._showElement(m)))}hide(){this._isShown&&!this._isTransitioning&&(it.trigger(this._element,Td).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){it.off(window,dn),it.off(this._dialog,dn),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Oo({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new ks({trapElement:this._element})}_showElement(m){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const y=gt.findOne(".modal-body",this._dialog);y&&(y.scrollTop=0),this._element.classList.add("show"),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,it.trigger(this._element,Dd,{relatedTarget:m})},this._dialog,this._isAnimated())}_addEventListeners(){it.on(this._element,Ss,m=>{"Escape"===m.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),it.on(window,ge,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),it.on(this._element,Vr,m=>{it.one(this._element,Bd,y=>{this._element===m.target&&this._element===y.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Do),this._resetAdjustments(),this._scrollBar.reset(),it.trigger(this._element,Je)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(it.trigger(this._element,Rd).defaultPrevented)return;const m=this._element.scrollHeight>document.documentElement.clientHeight,y=this._element.style.overflowY;"hidden"===y||this._element.classList.contains(fa)||(m||(this._element.style.overflowY="hidden"),this._element.classList.add(fa),this._queueCallback(()=>{this._element.classList.remove(fa),this._queueCallback(()=>{this._element.style.overflowY=y},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const m=this._element.scrollHeight>document.documentElement.clientHeight,y=this._scrollBar.getWidth(),S=y>0;if(S&&!m){const $=On()?"paddingLeft":"paddingRight";this._element.style[$]=`${y}px`}if(!S&&m){const $=On()?"paddingRight":"paddingLeft";this._element.style[$]=`${y}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(m,y){return this.each(function(){const S=Wr.getOrCreateInstance(this,m);if("string"==typeof m){if(void 0===S[m])throw new TypeError(`No method named "${m}"`);S[m](y)}})}}it.on(document,ne,'[data-bs-toggle="modal"]',function(E){const m=gt.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&E.preventDefault(),it.one(m,Ro,S=>{S.defaultPrevented||it.one(m,Je,()=>{Br(this)&&this.focus()})});const y=gt.findOne(".modal.show");y&&Wr.getInstance(y).hide(),Wr.getOrCreateInstance(m).toggle(this)}),le(Wr),Kt(Wr);const Bo=".bs.offcanvas",Kr=".data-api",pa=`load${Bo}${Kr}`,ba="showing",zl=".offcanvas.show",Ld=`show${Bo}`,Pd=`shown${Bo}`,Md=`hide${Bo}`,De=`hidePrevented${Bo}`,Hl=`hidden${Bo}`,Ce=`resize${Bo}`,Yr=`click${Bo}${Kr}`,va=`keydown.dismiss${Bo}`,ct={backdrop:!0,keyboard:!0,scroll:!1},ai={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ie extends to{constructor(m,y){super(m,y),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return ct}static get DefaultType(){return ai}static get NAME(){return"offcanvas"}toggle(m){return this._isShown?this.hide():this.show(m)}show(m){this._isShown||it.trigger(this._element,Ld,{relatedTarget:m}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new ua).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(ba),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add("show"),this._element.classList.remove(ba),it.trigger(this._element,Pd,{relatedTarget:m})},this._element,!0))}hide(){this._isShown&&(it.trigger(this._element,Md).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding"),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new ua).reset(),it.trigger(this._element,Hl)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const m=Boolean(this._config.backdrop);return new Oo({className:"offcanvas-backdrop",isVisible:m,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:m?()=>{"static"!==this._config.backdrop?this.hide():it.trigger(this._element,De)}:null})}_initializeFocusTrap(){return new ks({trapElement:this._element})}_addEventListeners(){it.on(this._element,va,m=>{"Escape"===m.key&&(this._config.keyboard?this.hide():it.trigger(this._element,De))})}static jQueryInterface(m){return this.each(function(){const y=Ie.getOrCreateInstance(this,m);if("string"==typeof m){if(void 0===y[m]||m.startsWith("_")||"constructor"===m)throw new TypeError(`No method named "${m}"`);y[m](this)}})}}it.on(document,Yr,'[data-bs-toggle="offcanvas"]',function(E){const m=gt.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&E.preventDefault(),vo(this))return;it.one(m,Hl,()=>{Br(this)&&this.focus()});const y=gt.findOne(zl);y&&y!==m&&Ie.getInstance(y).hide(),Ie.getOrCreateInstance(m).toggle(this)}),it.on(window,pa,()=>{for(const E of gt.find(zl))Ie.getOrCreateInstance(E).show()}),it.on(window,Ce,()=>{for(const E of gt.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(E).position&&Ie.getOrCreateInstance(E).hide()}),le(Ie),Kt(Ie);const li={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Id=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Xr=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,qo=(E,m)=>{const y=E.nodeName.toLowerCase();return m.includes(y)?!Id.has(y)||Boolean(Xr.test(E.nodeValue)):m.filter(S=>S instanceof RegExp).some(S=>S.test(y))},Fd={allowList:li,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},ql={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},X={entry:"(string|element|function|null)",selector:"(string|element)"};class Im extends Ys{constructor(m){super(),this._config=this._getConfig(m)}static get Default(){return Fd}static get DefaultType(){return ql}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(m=>this._resolvePossibleFunction(m)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(m){return this._checkContent(m),this._config.content={...this._config.content,...m},this}toHtml(){const m=document.createElement("div");m.innerHTML=this._maybeSanitize(this._config.template);for(const[$,U]of Object.entries(this._config.content))this._setContent(m,U,$);const y=m.children[0],S=this._resolvePossibleFunction(this._config.extraClass);return S&&y.classList.add(...S.split(" ")),y}_typeCheckConfig(m){super._typeCheckConfig(m),this._checkContent(m.content)}_checkContent(m){for(const[y,S]of Object.entries(m))super._typeCheckConfig({selector:y,entry:S},X)}_setContent(m,y,S){const $=gt.findOne(S,m);$&&((y=this._resolvePossibleFunction(y))?Jn(y)?this._putElementInTemplate(nr(y),$):this._config.html?$.innerHTML=this._maybeSanitize(y):$.textContent=y:$.remove())}_maybeSanitize(m){return this._config.sanitize?function(y,S,$){if(!y.length)return y;if($&&"function"==typeof $)return $(y);const U=(new window.DOMParser).parseFromString(y,"text/html"),K=[].concat(...U.body.querySelectorAll("*"));for(const nt of K){const rt=nt.nodeName.toLowerCase();if(!Object.keys(S).includes(rt)){nt.remove();continue}const yt=[].concat(...nt.attributes),Ct=[].concat(S["*"]||[],S[rt]||[]);for(const bt of yt)qo(bt,Ct)||nt.removeAttribute(bt.nodeName)}return U.body.innerHTML}(m,this._config.allowList,this._config.sanitizeFn):m}_resolvePossibleFunction(m){return se(m,[this])}_putElementInTemplate(m,y){if(this._config.html)return y.innerHTML="",void y.append(m);y.textContent=m.textContent}}const Fm=new Set(["sanitize","allowList","sanitizeFn"]),Lo="fade",hr="show",ce="hide.bs.modal",Ns="hover",Bn="focus",Zt={AUTO:"auto",TOP:"top",RIGHT:On()?"left":"right",BOTTOM:"bottom",LEFT:On()?"right":"left"},_a={allowList:li,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},jm={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Ze extends to{constructor(m,y){if(void 0===Ed)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(m,y),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return _a}static get DefaultType(){return jm}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),it.off(this._element.closest(".modal"),ce,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const m=it.trigger(this._element,this.constructor.eventName("show")),y=(Wi(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(m.defaultPrevented||!y)return;this._disposePopper();const S=this._getTipElement();this._element.setAttribute("aria-describedby",S.getAttribute("id"));const{container:$}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||($.append(S),it.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(S),S.classList.add(hr),"ontouchstart"in document.documentElement)for(const U of[].concat(...document.body.children))it.on(U,"mouseover",Ks);this._queueCallback(()=>{it.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!it.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(hr),"ontouchstart"in document.documentElement)for(const m of[].concat(...document.body.children))it.off(m,"mouseover",Ks);this._activeTrigger.click=!1,this._activeTrigger[Bn]=!1,this._activeTrigger[Ns]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),it.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(m){const y=this._getTemplateFactory(m).toHtml();if(!y)return null;y.classList.remove(Lo,hr),y.classList.add(`bs-${this.constructor.NAME}-auto`);const S=($=>{do{$+=Math.floor(1e6*Math.random())}while(document.getElementById($));return $})(this.constructor.NAME).toString();return y.setAttribute("id",S),this._isAnimated()&&y.classList.add(Lo),y}setContent(m){this._newContent=m,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(m){return this._templateFactory?this._templateFactory.changeContent(m):this._templateFactory=new Im({...this._config,content:m,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(m){return this.constructor.getOrCreateInstance(m.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Lo)}_isShown(){return this.tip&&this.tip.classList.contains(hr)}_createPopper(m){const y=se(this._config.placement,[this,m,this._element]),S=Zt[y.toUpperCase()];return O(this._element,m,this._getPopperConfig(S))}_getOffset(){const{offset:m}=this._config;return"string"==typeof m?m.split(",").map(y=>Number.parseInt(y,10)):"function"==typeof m?y=>m(y,this._element):m}_resolvePossibleFunction(m){return se(m,[this._element])}_getPopperConfig(m){const y={placement:m,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:S=>{this._getTipElement().setAttribute("data-popper-placement",S.state.placement)}}]};return{...y,...se(this._config.popperConfig,[y])}}_setListeners(){const m=this._config.trigger.split(" ");for(const y of m)if("click"===y)it.on(this._element,this.constructor.eventName("click"),this._config.selector,S=>{this._initializeOnDelegatedTarget(S).toggle()});else if("manual"!==y){const S=this.constructor.eventName(y===Ns?"mouseenter":"focusin"),$=this.constructor.eventName(y===Ns?"mouseleave":"focusout");it.on(this._element,S,this._config.selector,U=>{const K=this._initializeOnDelegatedTarget(U);K._activeTrigger["focusin"===U.type?Bn:Ns]=!0,K._enter()}),it.on(this._element,$,this._config.selector,U=>{const K=this._initializeOnDelegatedTarget(U);K._activeTrigger["focusout"===U.type?Bn:Ns]=K._element.contains(U.relatedTarget),K._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},it.on(this._element.closest(".modal"),ce,this._hideModalHandler)}_fixTitle(){const m=this._element.getAttribute("title");m&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",m),this._element.setAttribute("data-bs-original-title",m),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(m,y){clearTimeout(this._timeout),this._timeout=setTimeout(m,y)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(m){const y=Zn.getDataAttributes(this._element);for(const S of Object.keys(y))Fm.has(S)&&delete y[S];return m={...y,..."object"==typeof m&&m?m:{}},m=this._mergeConfigObj(m),m=this._configAfterMerge(m),this._typeCheckConfig(m),m}_configAfterMerge(m){return m.container=!1===m.container?document.body:nr(m.container),"number"==typeof m.delay&&(m.delay={show:m.delay,hide:m.delay}),"number"==typeof m.title&&(m.title=m.title.toString()),"number"==typeof m.content&&(m.content=m.content.toString()),m}_getDelegateConfig(){const m={};for(const[y,S]of Object.entries(this._config))this.constructor.Default[y]!==S&&(m[y]=S);return m.selector=!1,m.trigger="manual",m}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(m){return this.each(function(){const y=Ze.getOrCreateInstance(this,m);if("string"==typeof m){if(void 0===y[m])throw new TypeError(`No method named "${m}"`);y[m]()}})}}Kt(Ze);const $m={...Ze.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},jd={...Ze.DefaultType,content:"(null|string|element|function)"};class Ca extends Ze{static get Default(){return $m}static get DefaultType(){return jd}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(m){return this.each(function(){const y=Ca.getOrCreateInstance(this,m);if("string"==typeof m){if(void 0===y[m])throw new TypeError(`No method named "${m}"`);y[m]()}})}}Kt(Ca);const Gr=".bs.scrollspy",Ee=`activate${Gr}`,wa=`click${Gr}`,Vl=`load${Gr}.data-api`,Vo="active",Ea="[href]",$d=".nav-link",br=`${$d}, .nav-item > ${$d}, .list-group-item`,Ln={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},xa={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ro extends to{constructor(m,y){super(m,y),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Ln}static get DefaultType(){return xa}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const m of this._observableSections.values())this._observer.observe(m)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(m){return m.target=nr(m.target)||document.body,m.rootMargin=m.offset?`${m.offset}px 0px -30%`:m.rootMargin,"string"==typeof m.threshold&&(m.threshold=m.threshold.split(",").map(y=>Number.parseFloat(y))),m}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(it.off(this._config.target,wa),it.on(this._config.target,wa,Ea,m=>{const y=this._observableSections.get(m.target.hash);if(y){m.preventDefault();const S=this._rootElement||window,$=y.offsetTop-this._element.offsetTop;if(S.scrollTo)return void S.scrollTo({top:$,behavior:"smooth"});S.scrollTop=$}}))}_getNewObserver(){return new IntersectionObserver(y=>this._observerCallback(y),{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}_observerCallback(m){const y=K=>this._targetLinks.get(`#${K.target.id}`),S=K=>{this._previousScrollData.visibleEntryTop=K.target.offsetTop,this._process(y(K))},$=(this._rootElement||document.documentElement).scrollTop,U=$>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=$;for(const K of m){if(!K.isIntersecting){this._activeTarget=null,this._clearActiveClass(y(K));continue}const nt=K.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(U&&nt){if(S(K),!$)return}else U||nt||S(K)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const m=gt.find(Ea,this._config.target);for(const y of m){if(!y.hash||vo(y))continue;const S=gt.findOne(decodeURI(y.hash),this._element);Br(S)&&(this._targetLinks.set(decodeURI(y.hash),y),this._observableSections.set(y.hash,S))}}_process(m){this._activeTarget!==m&&(this._clearActiveClass(this._config.target),this._activeTarget=m,m.classList.add(Vo),this._activateParents(m),it.trigger(this._element,Ee,{relatedTarget:m}))}_activateParents(m){if(m.classList.contains("dropdown-item"))gt.findOne(".dropdown-toggle",m.closest(".dropdown")).classList.add(Vo);else for(const y of gt.parents(m,".nav, .list-group"))for(const S of gt.prev(y,br))S.classList.add(Vo)}_clearActiveClass(m){m.classList.remove(Vo);const y=gt.find(`${Ea}.${Vo}`,m);for(const S of y)S.classList.remove(Vo)}static jQueryInterface(m){return this.each(function(){const y=ro.getOrCreateInstance(this,m);if("string"==typeof m){if(void 0===y[m]||m.startsWith("_")||"constructor"===m)throw new TypeError(`No method named "${m}"`);y[m]()}})}}it.on(window,Vl,()=>{for(const E of gt.find('[data-bs-spy="scroll"]'))ro.getOrCreateInstance(E)}),Kt(ro);const vr=".bs.tab",Wl=`hide${vr}`,ci=`hidden${vr}`,Um=`show${vr}`,di=`shown${vr}`,ka=`click${vr}`,zm=`keydown${vr}`,Hm=`load${vr}`,ui="ArrowLeft",Wo="ArrowRight",qm="ArrowUp",xe="ArrowDown",As="Home",un="End",Qr="active",yr="show",Ko=".dropdown-toggle",mn=`:not(${Ko})`,Kl='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',mi=`.nav-link${mn}, .list-group-item${mn}, [role="tab"]${mn}, ${Kl}`,Yl=`.${Qr}[data-bs-toggle="tab"], .${Qr}[data-bs-toggle="pill"], .${Qr}[data-bs-toggle="list"]`;class Po extends to{constructor(m){super(m),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),it.on(this._element,zm,y=>this._keydown(y)))}static get NAME(){return"tab"}show(){const m=this._element;if(this._elemIsActive(m))return;const y=this._getActiveElem(),S=y?it.trigger(y,Wl,{relatedTarget:m}):null;it.trigger(m,Um,{relatedTarget:y}).defaultPrevented||S&&S.defaultPrevented||(this._deactivate(y,m),this._activate(m,y))}_activate(m,y){m&&(m.classList.add(Qr),this._activate(gt.getElementFromSelector(m)),this._queueCallback(()=>{"tab"===m.getAttribute("role")?(m.removeAttribute("tabindex"),m.setAttribute("aria-selected",!0),this._toggleDropDown(m,!0),it.trigger(m,di,{relatedTarget:y})):m.classList.add(yr)},m,m.classList.contains("fade")))}_deactivate(m,y){m&&(m.classList.remove(Qr),m.blur(),this._deactivate(gt.getElementFromSelector(m)),this._queueCallback(()=>{"tab"===m.getAttribute("role")?(m.setAttribute("aria-selected",!1),m.setAttribute("tabindex","-1"),this._toggleDropDown(m,!1),it.trigger(m,ci,{relatedTarget:y})):m.classList.remove(yr)},m,m.classList.contains("fade")))}_keydown(m){if(![ui,Wo,qm,xe,As,un].includes(m.key))return;m.stopPropagation(),m.preventDefault();const y=this._getChildren().filter($=>!vo($));let S;if([As,un].includes(m.key))S=y[m.key===As?0:y.length-1];else{const $=[Wo,xe].includes(m.key);S=Ne(y,m.target,$,!0)}S&&(S.focus({preventScroll:!0}),Po.getOrCreateInstance(S).show())}_getChildren(){return gt.find(mi,this._parent)}_getActiveElem(){return this._getChildren().find(m=>this._elemIsActive(m))||null}_setInitialAttributes(m,y){this._setAttributeIfNotExists(m,"role","tablist");for(const S of y)this._setInitialAttributesOnChild(S)}_setInitialAttributesOnChild(m){m=this._getInnerElement(m);const y=this._elemIsActive(m),S=this._getOuterElement(m);m.setAttribute("aria-selected",y),S!==m&&this._setAttributeIfNotExists(S,"role","presentation"),y||m.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(m,"role","tab"),this._setInitialAttributesOnTargetPanel(m)}_setInitialAttributesOnTargetPanel(m){const y=gt.getElementFromSelector(m);y&&(this._setAttributeIfNotExists(y,"role","tabpanel"),m.id&&this._setAttributeIfNotExists(y,"aria-labelledby",`${m.id}`))}_toggleDropDown(m,y){const S=this._getOuterElement(m);if(!S.classList.contains("dropdown"))return;const $=(U,K)=>{const nt=gt.findOne(U,S);nt&&nt.classList.toggle(K,y)};$(Ko,Qr),$(".dropdown-menu",yr),S.setAttribute("aria-expanded",y)}_setAttributeIfNotExists(m,y,S){m.hasAttribute(y)||m.setAttribute(y,S)}_elemIsActive(m){return m.classList.contains(Qr)}_getInnerElement(m){return m.matches(mi)?m:gt.findOne(mi,m)}_getOuterElement(m){return m.closest(".nav-item, .list-group-item")||m}static jQueryInterface(m){return this.each(function(){const y=Po.getOrCreateInstance(this);if("string"==typeof m){if(void 0===y[m]||m.startsWith("_")||"constructor"===m)throw new TypeError(`No method named "${m}"`);y[m]()}})}}it.on(document,ka,Kl,function(E){["A","AREA"].includes(this.tagName)&&E.preventDefault(),vo(this)||Po.getOrCreateInstance(this).show()}),it.on(window,Hm,()=>{for(const E of gt.find(Yl))Po.getOrCreateInstance(E)}),Kt(Po);const so=".bs.toast",Xl=`mouseover${so}`,Ud=`mouseout${so}`,zd=`focusin${so}`,Vm=`focusout${so}`,Wm=`hide${so}`,Km=`hidden${so}`,Ym=`show${so}`,Hd=`shown${so}`,Sa="show",fn="showing",Gl={animation:"boolean",autohide:"boolean",delay:"number"},Vd={animation:!0,autohide:!0,delay:5e3};class fi extends to{constructor(m,y){super(m,y),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Vd}static get DefaultType(){return Gl}static get NAME(){return"toast"}show(){it.trigger(this._element,Ym).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.classList.add(Sa,fn),this._queueCallback(()=>{this._element.classList.remove(fn),it.trigger(this._element,Hd),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(it.trigger(this._element,Wm).defaultPrevented||(this._element.classList.add(fn),this._queueCallback(()=>{this._element.classList.add("hide"),this._element.classList.remove(fn,Sa),it.trigger(this._element,Km)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Sa),super.dispose()}isShown(){return this._element.classList.contains(Sa)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(m,y){switch(m.type){case"mouseover":case"mouseout":this._hasMouseInteraction=y;break;case"focusin":case"focusout":this._hasKeyboardInteraction=y}if(y)return void this._clearTimeout();const S=m.relatedTarget;this._element===S||this._element.contains(S)||this._maybeScheduleHide()}_setListeners(){it.on(this._element,Xl,m=>this._onInteraction(m,!0)),it.on(this._element,Ud,m=>this._onInteraction(m,!1)),it.on(this._element,zd,m=>this._onInteraction(m,!0)),it.on(this._element,Vm,m=>this._onInteraction(m,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(m){return this.each(function(){const y=fi.getOrCreateInstance(this,m);if("string"==typeof m){if(void 0===y[m])throw new TypeError(`No method named "${m}"`);y[m](this)}})}}return le(fi),Kt(fi),{Alert:$o,Button:Uo,Carousel:lr,Collapse:be,Dropdown:Dn,Modal:Wr,Offcanvas:Ie,Popover:Ca,ScrollSpy:ro,Tab:Po,Toast:fi,Tooltip:Ze}}),function(){"use strict";var $n=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},Qn=function(t){return{eq:t}},al=Qn(function(t,e){return t===e}),ll=function(t){return Qn(function(e,n){if(e.length!==n.length)return!1;for(var o=e.length,r=0;r<o;r++)if(!t.eq(e[r],n[r]))return!1;return!0})},cl=function(t){return Qn(function(e,n){var l,d,u,o=Object.keys(e),r=Object.keys(n);if(!(l=al,d=ll(l),u=function(d){return Array.prototype.slice.call(d).sort(void 0)},Qn(function(f,h){return d.eq(u(f),u(h))})).eq(o,r))return!1;for(var s=o.length,i=0;i<s;i++){var a=o[i];if(!t.eq(e[a],n[a]))return!1}return!0})},Jn=Qn(function(t,e){if(t===e)return!0;var n=$n(t);return n===$n(e)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?t===e:"array"===n?ll(Jn).eq(t,e):"object"===n&&cl(Jn).eq(t,e))});const nr=Object.getPrototypeOf,Br=(t,e,n)=>{var o;return!!n(t,e.prototype)||(null===(o=t.constructor)||void 0===o?void 0:o.name)===e.name},vo=t=>e=>(n=>{const o=typeof n;return null===n?"null":"object"===o&&Array.isArray(n)?"array":"object"===o&&Br(n,String,(r,s)=>s.isPrototypeOf(r))?"string":o})(e)===t,Wi=t=>e=>typeof e===t,Ks=t=>e=>t===e,or=(t,e)=>Pe(t)&&Br(t,e,(n,o)=>nr(n)===o),ht=vo("string"),Pe=vo("object"),On=t=>or(t,Object),Kt=vo("array"),se=Ks(null),rr=Wi("boolean"),Ne=Ks(void 0),he=t=>null==t,ot=t=>!he(t),Ut=Wi("function"),Tn=Wi("number"),Lr=(t,e)=>{if(Kt(t)){for(let n=0,o=t.length;n<o;++n)if(!e(t[n]))return!1;return!0}return!1},Tt=()=>{},yo=(t,e)=>(...n)=>t(e.apply(null,n)),dl=(t,e)=>n=>t(e(n)),st=t=>()=>t,Ke=t=>t,ul=(t,e)=>t===e;function ft(t,...e){return(...n)=>{const o=e.concat(n);return t.apply(null,o)}}const ds=t=>e=>!t(e),id=t=>()=>{throw new Error(t)},Ki=t=>t(),it=t=>{t()},ee=st(!1),me=st(!0);class w{constructor(e,n){this.tag=e,this.value=n}static some(e){return new w(!0,e)}static none(){return w.singletonNone}fold(e,n){return this.tag?n(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?w.some(e(this.value)):w.none()}bind(e){return this.tag?e(this.value):w.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:w.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e??"Called getOrDie on None")}static from(e){return ot(e)?w.some(e):w.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}w.singletonNone=new w(!1);const Zn=Array.prototype.slice,Ys=Array.prototype.indexOf,to=Array.prototype.push,Yi=(t,e)=>Ys.call(t,e),gt=(t,e)=>Yi(t,e)>-1,le=(t,e)=>{for(let n=0,o=t.length;n<o;n++)if(e(t[n],n))return!0;return!1},Mt=(t,e)=>{const n=t.length,o=new Array(n);for(let r=0;r<n;r++)o[r]=e(t[r],r);return o},W=(t,e)=>{for(let n=0,o=t.length;n<o;n++)e(t[n],n)},ad=(t,e)=>{for(let n=t.length-1;n>=0;n--)e(t[n],n)},$o=(t,e)=>{const n=[],o=[];for(let r=0,s=t.length;r<s;r++){const i=t[r];(e(i,r)?n:o).push(i)}return{pass:n,fail:o}},xt=(t,e)=>{const n=[];for(let o=0,r=t.length;o<r;o++){const s=t[o];e(s,o)&&n.push(s)}return n},Uo=(t,e,n)=>(ad(t,(o,r)=>{n=e(n,o,r)}),n),Me=(t,e,n)=>(W(t,(o,r)=>{n=e(n,o,r)}),n),ld=(t,e,n)=>{for(let o=0,r=t.length;o<r;o++){const s=t[o];if(e(s,o))return w.some(s);if(n(s,o))break}return w.none()},ye=(t,e)=>ld(t,e,ee),Xs=(t,e)=>{for(let n=0,o=t.length;n<o;n++)if(e(t[n],n))return w.some(n);return w.none()},cd=t=>{const e=[];for(let n=0,o=t.length;n<o;++n){if(!Kt(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);to.apply(e,t[n])}return e},Un=(t,e)=>cd(Mt(t,e)),sr=(t,e)=>{for(let n=0,o=t.length;n<o;++n)if(!0!==e(t[n],n))return!1;return!0},Gs=t=>{const e=Zn.call(t,0);return e.reverse(),e},Pr=(t,e)=>xt(t,n=>!gt(e,n)),_o=(t,e)=>{const n={};for(let o=0,r=t.length;o<r;o++){const s=t[o];n[String(s)]=e(s,o)}return n},ir=(t,e)=>{const n=Zn.call(t,0);return n.sort(e),n},ar=(t,e)=>e>=0&&e<t.length?w.some(t[e]):w.none(),Ae=t=>ar(t,0),zn=t=>ar(t,t.length-1),Ye=Ut(Array.from)?Array.from:t=>Zn.call(t),us=(t,e)=>{for(let n=0;n<t.length;n++){const o=e(t[n],n);if(o.isSome())return o}return w.none()},Xe=Object.keys,Rm=Object.hasOwnProperty,Xt=(t,e)=>{const n=Xe(t);for(let o=0,r=n.length;o<r;o++){const s=n[o];e(t[s],s)}},Xi=(t,e)=>Dm(t,(n,o)=>({k:o,v:e(n,o)})),Dm=(t,e)=>{const n={};return Xt(t,(o,r)=>{const s=e(o,r);n[s.k]=s.v}),n},ml=t=>(e,n)=>{t[n]=e},dd=(t,e,n,o)=>{Xt(t,(r,s)=>{(e(r,s)?n:o)(r,s)})},ms=(t,e)=>{const n={};return dd(t,e,ml(n),Tt),n},fs=(t,e)=>{const n=[];return Xt(t,(o,r)=>{n.push(e(o,r))}),n},Gi=t=>fs(t,Ke),Jt=(t,e)=>Ot(t,e)?w.from(t[e]):w.none(),Ot=(t,e)=>Rm.call(t,e),gs=(t,e)=>Ot(t,e)&&null!=t[e],ud=t=>{const e={};return W(t,n=>{e[n]={}}),Xe(e)},md=t=>void 0!==t.length,lr=Array.isArray,cr=(t,e,n)=>{if(!t)return!1;if(n=n||t,md(t)){for(let o=0,r=t.length;o<r;o++)if(!1===e.call(n,t[o],o,t))return!1}else for(const o in t)if(Ot(t,o)&&!1===e.call(n,t[o],o,t))return!1;return!0},fl=(t,e)=>{const n=[];return cr(t,(o,r)=>{n.push(e(o,r,t))}),n},Qs=(t,e)=>{const n=[];return cr(t,(o,r)=>{e&&!e(o,r,t)||n.push(o)}),n},Qi=(t,e,n,o)=>{let r=Ne(n)?t[0]:n;for(let s=0;s<t.length;s++)r=e.call(o,r,t[s],s);return r},fd=(t,e,n)=>{for(let o=0,r=t.length;o<r;o++)if(e.call(n,t[o],o,t))return o;return-1},Mr=t=>t[t.length-1],zo=t=>{let e,n=!1;return(...o)=>(n||(n=!0,e=t.apply(null,o)),e)},Ir=()=>ps(0,0),ps=(t,e)=>({major:t,minor:e}),Js={nu:ps,detect:(t,e)=>{const n=String(e).toLowerCase();return 0===t.length?Ir():((o,r)=>{const s=((a,l)=>{for(let c=0;c<a.length;c++){const d=a[c];if(d.test(l))return d}})(o,r);if(!s)return{major:0,minor:0};const i=a=>Number(r.replace(s,"$"+a));return ps(i(1),i(2))})(t,n)},unknown:Ir},Ji=(t,e)=>{const n=String(e).toLowerCase();return ye(t,o=>o.search(n))},gd=(t,e,n)=>""===e||t.length>=e.length&&t.substr(n,n+e.length)===e,pd=(t,e)=>Gt(t,e)?t.substring(e.length):t,be=(t,e,n=0,o)=>{const r=t.indexOf(e,n);return-1!==r&&(!!Ne(o)||r+e.length<=o)},Gt=(t,e)=>gd(t,e,0),rn=(t,e)=>gd(t,e,t.length-e.length),sn=t=>e=>e.replace(t,""),Oe=sn(/^\s+|\s+$/g),Zi=sn(/^\s+/g),Fr=sn(/\s+$/g),Qe=t=>t.length>0,Co=t=>!Qe(t),Zs=(t,e=10)=>{const n=parseInt(t,e);return isNaN(n)?w.none():w.some(n)},ti=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,yn=t=>e=>be(e,t),hd=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>be(t,"edge/")&&be(t,"chrome")&&be(t,"safari")&&be(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ti],search:t=>be(t,"chrome")&&!be(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>be(t,"msie")||be(t,"trident")},{name:"Opera",versionRegexes:[ti,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:yn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:yn("firefox")},{name:"Safari",versionRegexes:[ti,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(be(t,"safari")||be(t,"mobile/"))&&be(t,"applewebkit")}],gl=[{name:"Windows",search:yn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>be(t,"iphone")||be(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:yn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:yn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:yn("linux"),versionRegexes:[]},{name:"Solaris",search:yn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:yn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:yn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ta={browsers:st(hd),oses:st(gl)},hl="Chromium",vl="Firefox",_l=t=>{const e=t.current,o=r=>()=>e===r;return{current:e,version:t.version,isEdge:o("Edge"),isChromium:o(hl),isIE:o("IE"),isOpera:o("Opera"),isFirefox:o(vl),isSafari:o("Safari")}},bd=()=>_l({current:void 0,version:Js.unknown()}),vd=_l,Cl=(st("Edge"),st(hl),st("IE"),st("Opera"),st(vl),st("Safari"),"Windows"),wl="Android",dr="Solaris",Rn="FreeBSD",ea="ChromeOS",na=t=>{const e=t.current,o=r=>()=>e===r;return{current:e,version:t.version,isWindows:o(Cl),isiOS:o("iOS"),isAndroid:o(wl),isMacOS:o("macOS"),isLinux:o("Linux"),isSolaris:o(dr),isFreeBSD:o(Rn),isChromeOS:o(ea)}},wo=()=>na({current:void 0,version:Js.unknown()}),jr=na,oa=(st(Cl),st("iOS"),st(wl),st("Linux"),st("macOS"),st(dr),st(Rn),st(ea),t=>window.matchMedia(t).matches);let hs=zo(()=>((t,e,n)=>{const o=ta.browsers(),r=ta.oses(),s=e.bind(l=>{return c=o,us(l.brands,u=>{const f=u.brand.toLowerCase();return ye(c,h=>{var g;return f===(null===(g=h.brand)||void 0===g?void 0:g.toLowerCase())}).map(h=>({current:h.name,version:Js.nu(parseInt(u.version,10),0)}))});var c}).orThunk(()=>{return Ji(o,c=t).map(d=>{const u=Js.detect(d.versionRegexes,c);return{current:d.name,version:u}});var c}).fold(bd,vd),i=(l=r,c=t,Ji(l,c).map(d=>{const u=Js.detect(d.versionRegexes,c);return{current:d.name,version:u}})).fold(wo,jr),a=((l,c,d,u)=>{const f=l.isiOS()&&!0===/ipad/i.test(d),h=l.isiOS()&&!f,g=l.isiOS()||l.isAndroid(),b=g||u("(pointer:coarse)"),p=f||!h&&g&&u("(min-device-width:768px)"),v=h||g&&!p,_=c.isSafari()&&l.isiOS()&&!1===/safari/i.test(d),C=!v&&!p&&!_;return{isiPad:st(f),isiPhone:st(h),isTablet:st(p),isPhone:st(v),isTouch:st(b),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:st(_),isDesktop:st(C)}})(i,s,t,n);var l,c;return{browser:s,os:i,deviceType:a}})(navigator.userAgent,w.from(navigator.userAgentData),oa));const Hn=()=>hs(),yd=navigator.userAgent,ur=Hn(),qn=ur.browser,no=ur.os,an=ur.deviceType,Bm=-1!==yd.indexOf("Windows Phone"),Rt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:qn.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!qn.isIE(),windowsPhone:Bm,browser:{current:qn.current,version:qn.version,isChromium:qn.isChromium,isEdge:qn.isEdge,isFirefox:qn.isFirefox,isIE:qn.isIE,isOpera:qn.isOpera,isSafari:qn.isSafari},os:{current:no.current,version:no.version,isAndroid:no.isAndroid,isChromeOS:no.isChromeOS,isFreeBSD:no.isFreeBSD,isiOS:no.isiOS,isLinux:no.isLinux,isMacOS:no.isMacOS,isSolaris:no.isSolaris,isWindows:no.isWindows},deviceType:{isDesktop:an.isDesktop,isiPad:an.isiPad,isiPhone:an.isiPhone,isPhone:an.isPhone,isTablet:an.isTablet,isTouch:an.isTouch,isWebView:an.isWebView}},ra=/^\s*|\s*$/g,El=t=>he(t)?"":(""+t).replace(ra,""),bs=function(t,e,n,o){o=o||this,t&&(n&&(t=t[n]),cr(t,(r,s)=>!1!==e.call(o,r,s,n)&&(bs(r,e,n,o),!0)))},Q={trim:El,isArray:lr,is:(t,e)=>e?!("array"!==e||!lr(t))||typeof t===e:void 0!==t,toArray:t=>{if(lr(t))return t;{const e=[];for(let n=0,o=t.length;n<o;n++)e[n]=t[n];return e}},makeMap:(t,e,n={})=>{const o=ht(t)?t.split(e||","):t||[];let r=o.length;for(;r--;)n[o[r]]={};return n},each:cr,map:fl,grep:Qs,inArray:(t,e)=>{if(t)for(let n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1},hasOwn:Ot,extend:(t,...e)=>{for(let n=0;n<e.length;n++){const o=e[n];for(const r in o)if(Ot(o,r)){const s=o[r];void 0!==s&&(t[r]=s)}}return t},walk:bs,resolve:(t,e=window)=>{const n=t.split(".");for(let o=0,r=n.length;o<r&&(e=e[n[o]]);o++);return e},explode:(t,e)=>Kt(t)?t:""===t?[]:fl(t.split(e||","),El),_addCacheSuffix:t=>{const e=Rt.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}},Eo=(t,e,n=ul)=>t.exists(o=>n(o,e)),xl=(t,e,n=ul)=>qe(t,e,n).getOr(t.isNone()&&e.isNone()),qe=(t,e,n)=>t.isSome()&&e.isSome()?w.some(n(t.getOrDie(),e.getOrDie())):w.none(),$r=(t,e)=>t?w.some(e):w.none(),vs=typeof window<"u"?window:Function("return this;")(),_d=(t,e)=>((n,o)=>{let r=o??vs;for(let s=0;s<n.length&&null!=r;++s)r=r[n[s]];return r})(t.split("."),e),Cd=Object.getPrototypeOf,Wt=t=>t.dom.nodeName.toLowerCase(),sa=t=>t.dom.nodeType,ia=t=>e=>sa(e)===t,ys=t=>ln(t)&&(t=>{const e=_d("ownerDocument.defaultView",t);return Pe(t)&&((n=e,((o,r)=>{const s=_d("HTMLElement",r);if(null==s)throw new Error("HTMLElement not available on this browser");return s})(0,n)).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Cd(t).constructor.name));var n})(t.dom),ln=ia(1),Cn=ia(3),Sl=ia(9),Nl=ia(11),ei=t=>e=>ln(e)&&Wt(e)===t,Al=(t,e,n)=>{if(!(ht(n)||rr(n)||Tn(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},fe=(t,e,n)=>{Al(t.dom,e,n)},xo=(t,e)=>{const n=t.dom;Xt(e,(o,r)=>{Al(n,r,o)})},cn=(t,e)=>{const n=t.dom.getAttribute(e);return null===n?void 0:n},ko=(t,e)=>w.from(cn(t,e)),So=(t,e)=>{const n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},Te=(t,e)=>{t.dom.removeAttribute(e)},Ol=t=>Me(t.dom.attributes,(e,n)=>(e[n.name]=n.value,e),{}),aa=(t,e)=>{const n=cn(t,e);return void 0===n||""===n?[]:n.split(" ")},_s=t=>void 0!==t.dom.classList,Tl=t=>aa(t,"class"),Rl=(t,e)=>((n,o,r)=>{const s=aa(n,o).concat([r]);return fe(n,o,s.join(" ")),!0})(t,"class",e),la=(t,e)=>((n,o,r)=>{const s=xt(aa(n,o),i=>i!==r);return s.length>0?fe(n,o,s.join(" ")):Te(n,o),!1})(t,"class",e),Ur=(t,e)=>{_s(t)?t.dom.classList.add(e):Rl(t,e)},wd=t=>{0===(_s(t)?t.dom.classList:Tl(t)).length&&Te(t,"class")},ni=(t,e)=>{_s(t)?t.dom.classList.remove(e):la(t,e),wd(t)},ca=(t,e)=>_s(t)&&t.dom.classList.contains(e),Cs=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},mr=(t,e)=>{const n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,t),new Error(o)}return Cs(n.childNodes[0])},Re=(t,e)=>{const n=(e||document).createElement(t);return Cs(n)},ws=(t,e)=>{const n=(e||document).createTextNode(t);return Cs(n)},O=Cs,Dl=(t,e)=>{const n=[],o=s=>(n.push(s),e(s));let r=e(t);do{r=r.bind(o)}while(r.isSome());return n},Ge=(t,e)=>{const n=t.dom;if(1!==n.nodeType)return!1;{const o=n;if(void 0!==o.matches)return o.matches(e);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(e);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},da=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,zt=(t,e)=>t.dom===e.dom,No=(t,e)=>{const n=t.dom,o=e.dom;return n!==o&&n.contains(o)},xd=t=>O(t.dom.ownerDocument),Ho=t=>Sl(t)?t:xd(t),oi=t=>O(Ho(t).dom.defaultView),Vn=t=>w.from(t.dom.parentNode).map(O),ri=t=>w.from(t.dom.parentElement).map(O),Bl=(t,e)=>{const n=Ut(e)?e:ee;let o=t.dom;const r=[];for(;null!=o.parentNode;){const s=o.parentNode,i=O(s);if(r.push(i),!0===n(i))break;o=s}return r},zr=t=>w.from(t.dom.previousSibling).map(O),Ao=t=>w.from(t.dom.nextSibling).map(O),fr=t=>Gs(Dl(t,zr)),kd=t=>Dl(t,Ao),_e=t=>Mt(t.dom.childNodes,O),Es=(t,e)=>w.from(t.dom.childNodes[e]).map(O),Ll=t=>Es(t,0),Pl=t=>Es(t,t.dom.childNodes.length-1),Ml=t=>t.dom.childNodes.length,Il=t=>Nl(t)&&ot(t.dom.host),Sd=Ut(Element.prototype.attachShadow)&&Ut(Node.prototype.getRootNode),Lm=st(Sd),gr=Sd?t=>O(t.dom.getRootNode()):Ho,Dn=t=>Il(t)?t:(e=>{const n=e.dom.head;if(null==n)throw new Error("Head is not available yet");return O(n)})(Ho(t)),Nd=t=>O(t.dom.host),Fl=t=>{if(Lm()&&ot(t.target)){const e=O(t.target);if(ln(e)&&Ad(e)&&t.composed&&t.composedPath){const n=t.composedPath();if(n)return Ae(n)}}return w.from(t.target)},Ad=t=>ot(t.dom.shadowRoot),xs=t=>{const e=Cn(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;const n=e.ownerDocument;return(o=>{const r=gr(o);return Il(r)?w.some(r):w.none()})(O(e)).fold(()=>n.body.contains(e),dl(xs,Nd))};var Od=(t,e,n,o,r)=>t(n,o)?w.some(n):Ut(r)&&r(n)?w.none():e(n,o,r);const Oo=(t,e,n)=>{let o=t.dom;const r=Ut(n)?n:ee;for(;o.parentNode;){o=o.parentNode;const s=O(o);if(e(s))return w.some(s);if(r(s))break}return w.none()},To=(t,e,n)=>Od((o,r)=>r(o),Oo,t,e,n),si=(t,e,n)=>Oo(t,o=>Ge(o,e),n),ii=(t,e)=>((n,o)=>{const r=void 0===o?document:o.dom;return da(r)?w.none():w.from(r.querySelector(n)).map(O)})(e,t),pr=(t,e,n)=>Od((o,r)=>Ge(o,r),si,t,e,n),Hr=(t,e=!1)=>{return xs(t)?t.dom.isContentEditable:(n=t,pr(n,"[contenteditable]")).fold(st(e),o=>"true"===Pm(o));var n},Pm=t=>t.dom.contentEditable,ks=t=>void 0!==t.style&&Ut(t.style.getPropertyValue),jl=(t,e,n)=>{if(!ht(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);ks(t)&&t.style.setProperty(e,n)},$l=(t,e,n)=>{jl(t.dom,e,n)},qr=(t,e)=>{const n=t.dom;Xt(e,(o,r)=>{jl(n,r,o)})},oo=(t,e)=>{const n=t.dom,o=window.getComputedStyle(n).getPropertyValue(e);return""!==o||xs(t)?o:ua(n,e)},ua=(t,e)=>ks(t)?t.style.getPropertyValue(e):"",dn=(t,e)=>{const o=ua(t.dom,e);return w.from(o).filter(r=>r.length>0)},Td=t=>{const e={},n=t.dom;if(ks(n))for(let o=0;o<n.style.length;o++){const r=n.style.item(o);e[r]=n.style[r]}return e},Rd=(t,e)=>{var n,o;o=e,ks(n=t.dom)&&n.style.removeProperty(o),Eo(ko(t,"style").map(Oe),"")&&Te(t,"style")},Je=(t,e)=>{Vn(t).each(n=>{n.dom.insertBefore(e.dom,t.dom)})},Ro=(t,e)=>{Ao(t).fold(()=>{Vn(t).each(n=>{ge(n,e)})},n=>{Je(n,e)})},Dd=(t,e)=>{Ll(t).fold(()=>{ge(t,e)},n=>{t.dom.insertBefore(e.dom,n.dom)})},ge=(t,e)=>{t.dom.appendChild(e.dom)},Bd=(t,e)=>{Je(t,e),ge(e,t)},Vr=(t,e)=>{W(e,n=>{ge(t,n)})},Ss=t=>{t.dom.textContent="",W(_e(t),e=>{ne(e)})},ne=t=>{const e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Do=t=>{const e=_e(t);var n,o;e.length>0&&(n=t,W(o=e,(r,s)=>{Ro(0===s?n:o[s-1],r)})),ne(t)},ma=t=>Mt(t,O),fa=t=>t.dom.innerHTML,ga=(t,e)=>{const n=xd(t).dom,o=O(n.createDocumentFragment()),r=((s,i)=>{const a=(i||document).createElement("div");return a.innerHTML=s,_e(O(a))})(e,n);Vr(o,r),Ss(t),ge(t,o)},Wr=(t,e,n,o)=>{t.dom.removeEventListener(e,n,o)},Bo=(t,e)=>({left:t,top:e,translate:(n,o)=>Bo(t+n,e+o)}),Kr=Bo,pa=(t,e)=>void 0!==t?t:void 0!==e?e:0,ha=t=>{const e=t.dom,n=e.ownerDocument.body;return n===e?Kr(n.offsetLeft,n.offsetTop):xs(t)?(o=>{const r=o.getBoundingClientRect();return Kr(r.left,r.top)})(e):Kr(0,0)},ba=t=>{const e=void 0!==t?t.dom:document;return Kr(e.body.scrollLeft||e.documentElement.scrollLeft,e.body.scrollTop||e.documentElement.scrollTop)},Ul=(t,e,n)=>{const o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollTo(t,e)},zl=(t,e)=>{Hn().browser.isSafari()&&Ut(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},Ld=(t,e,n,o)=>({x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}),Pd=t=>{const e=void 0===t?window:t,o=ba(O(e.document));return(r=>{const s=void 0===r?window:r;return Hn().browser.isFirefox()?w.none():w.from(s.visualViewport)})(e).fold(()=>{const r=e.document.documentElement;return Ld(o.left,o.top,r.clientWidth,r.clientHeight)},r=>Ld(Math.max(r.pageLeft,o.left),Math.max(r.pageTop,o.top),r.width,r.height))},Md=(t,e)=>{let n=[];return W(_e(t),o=>{e(o)&&(n=n.concat([o])),n=n.concat(Md(o,e))}),n},De=(t,e)=>((n,o)=>{const r=void 0===o?document:o.dom;return da(r)?[]:Mt(r.querySelectorAll(n),O)})(e,t),Hl=(t,e,n)=>si(t,e,n).isSome();class Ce{constructor(e,n){this.node=e,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,n,o,r){if(e){if(!r&&e[n])return e[n];if(e!==this.rootNode){let s=e[o];if(s)return s;for(let i=e.parentNode;i&&i!==this.rootNode;i=i.parentNode)if(s=i[o],s)return s}}}findPreviousNode(e,n){if(e){const o=e.previousSibling;if(this.rootNode&&o===this.rootNode)return;if(o){if(!n)for(let s=o.lastChild;s;s=s.lastChild)if(!s.lastChild)return s;return o}const r=e.parentNode;if(r&&r!==this.rootNode)return r}}}const Yr=t=>e=>!!e&&e.nodeType===t,va=t=>!!t&&!Object.getPrototypeOf(t),ct=Yr(1),ai=t=>{const e=t.toLowerCase();return n=>ot(n)&&n.nodeName.toLowerCase()===e},Ie=t=>{const e=t.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const o=n.nodeName.toLowerCase();return gt(e,o)}return!1}},li=(t,e)=>{const n=e.toLowerCase().split(" ");return o=>{if(ct(o)){const r=o.ownerDocument.defaultView;if(r)for(let s=0;s<n.length;s++){const i=r.getComputedStyle(o,null);if((i?i.getPropertyValue(t):null)===n[s])return!0}}return!1}},Id=t=>e=>ct(e)&&e.hasAttribute(t),Xr=t=>ct(t)&&t.hasAttribute("data-mce-bogus"),qo=t=>ct(t)&&"TABLE"===t.tagName,Fd=t=>e=>!(!ct(e)||e.contentEditable!==t&&e.getAttribute("data-mce-contenteditable")!==t),ql=Ie(["textarea","input"]),X=Yr(3),Im=Yr(4),Fm=Yr(7),Lo=Yr(8),hr=Yr(9),ya=Yr(11),ce=ai("br"),Ns=ai("img"),Bn=Fd("true"),Zt=Fd("false"),_a=Ie(["td","th"]),jm=Ie(["td","th","caption"]),Ze=Ie(["video","audio","object","embed"]),$m=ai("li"),jd=ai("details"),Ca=ai("summary"),Ee="\xa0",wa=t=>"\ufeff"===t,Vl=((t,e)=>{const n=o=>t(o)?w.from(o.dom.nodeValue):w.none();return{get:o=>{if(!t(o))throw new Error("Can only get text value of a text node");return n(o).getOr("")},getOption:n,set:(o,r)=>{if(!t(o))throw new Error("Can only set raw text value of a text node");o.dom.nodeValue=r}}})(Cn),Vo=t=>Vl.get(t),Ea=t=>Vl.getOption(t),$d=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),br=t=>{let e;return n=>(e=e||_o(t,me),Ot(e,Wt(n)))},Ln=br(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),xa=t=>ln(t)&&!Ln(t),ro=t=>ln(t)&&"br"===Wt(t),vr=br(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Wl=br(["ul","ol","dl"]),ci=br(["li","dd","dt"]),Um=br(["thead","tbody","tfoot"]),di=br(["td","th"]),ka=br(["pre","script","textarea","style"]),zm=br($d),Hm=t=>zm(t)||xa(t),ui=()=>{const t=Re("br");return fe(t,"data-mce-bogus","1"),t},Wo=t=>{Ss(t),ge(t,ui())},qm=t=>{Pl(t).each(e=>{zr(e).each(n=>{Ln(t)&&ro(e)&&Ln(n)&&ne(e)})})},xe="\ufeff",As=wa,un=t=>t.replace(/\uFEFF/g,""),Qr=ct,Jr=X,yr=t=>(Jr(t)&&(t=t.parentNode),Qr(t)&&t.hasAttribute("data-mce-caret")),Ko=t=>Jr(t)&&As(t.data),mn=t=>yr(t)||Ko(t),Kl=t=>t.firstChild!==t.lastChild||!ce(t.firstChild),mi=t=>{const e=t.container();return!!X(e)&&(e.data.charAt(t.offset())===xe||t.isAtStart()&&Ko(e.previousSibling))},Yl=t=>{const e=t.container();return!!X(e)&&(e.data.charAt(t.offset()-1)===xe||t.isAtEnd()&&Ko(e.nextSibling))},Po=t=>Jr(t)&&t.data[0]===xe,so=t=>Jr(t)&&t.data[t.data.length-1]===xe,Xl=t=>t&&t.hasAttribute("data-mce-caret")?((e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Xr(r)&&(null===(n=r.parentNode)||void 0===n||n.removeChild(r))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,Ud=t=>yr(t.startContainer),zd=Bn,Vm=Zt,Wm=ce,Km=X,Ym=Ie(["script","style","textarea"]),Hd=Ie(["img","input","textarea","hr","iframe","video","audio","object","embed"]),qd=Ie(["table"]),Sa=mn,fn=t=>!Sa(t)&&(Km(t)?!Ym(t.parentNode):Hd(t)||Wm(t)||qd(t)||Gl(t)),Gl=t=>{return!(ct(e=t)&&"true"===e.getAttribute("unselectable"))&&Vm(t);var e},Vd=(t,e)=>fn(t)&&((n,o)=>{for(let r=n.parentNode;r&&r!==o;r=r.parentNode){if(Gl(r))return!1;if(zd(r))return!0}return!0})(t,e),fi=/^[ \t\r\n]*$/,E=t=>fi.test(t),m=t=>{for(const e of t)if(!wa(e))return!1;return!0},y=t=>"\n"===t||"\r"===t,S=(t,e=4,n=!0,o=!0)=>{const r=(l=e)<=0?"":new Array(l+1).join(" "),s=t.replace(/\t/g,r);var l;return Me(s,(a,l)=>{return-1!==" \f\t\v".indexOf(l)||l===Ee?a.pcIsSpace||""===a.str&&n||a.str.length===s.length-1&&o||(d=a.str.length+1)<(c=s).length&&d>=0&&y(c[d])?{pcIsSpace:!1,str:a.str+Ee}:{pcIsSpace:!0,str:a.str+" "}:{pcIsSpace:y(l),str:a.str+l};var c,d},{pcIsSpace:!1,str:""}).str},$=(t,e)=>{return fn(t)&&(o=e,!(X(n=t)&&E(n.data)&&!((r,s)=>{const i=O(s),a=O(r);return Hl(a,"pre,code",ft(zt,i))})(n,o)))||(n=>ct(n)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id")))(t)||U(t);var n,o},U=Id("data-mce-bookmark"),K=Id("data-mce-bogus"),nt=t=>ct(t)&&"all"===t.getAttribute("data-mce-bogus"),rt=(t,e=!0)=>((n,o)=>{let r=0;if($(n,n))return!1;{let s=n.firstChild;if(!s)return!0;const i=new Ce(s,n);do{if(o){if(nt(s)){s=i.next(!0);continue}if(K(s)){s=i.next();continue}}if(ce(s))r++,s=i.next();else{if($(s,n))return!1;s=i.next()}}while(s);return r<=1}})(t.dom,e),yt="data-mce-block",Ct=t=>{return(e=t,xt(Xe(e),n=>!/[A-Z]/.test(n))).join(",");var e},bt=(t,e)=>ot(e.querySelector(t))?(e.setAttribute(yt,"true"),"inline-boundary"===e.getAttribute("data-mce-selected")&&e.removeAttribute("data-mce-selected"),!0):(e.removeAttribute(yt),!1),It=(t,e)=>{const n=Ct(t.getTransparentElements()),o=Ct(t.getBlockElements());return xt(e.querySelectorAll(n),r=>bt(o,r))},Dt=(t,e)=>{var n;const o=e?"lastChild":"firstChild";for(let r=t[o];r;r=r[o])if(rt(O(r)))return void(null===(n=r.parentNode)||void 0===n||n.removeChild(r))},Bt=(t,e)=>{const n=It(t,e);var o,r,s;((t,e,n)=>{const o=t.getBlockElements(),r=O(e),s=a=>Wt(a)in o,i=a=>zt(a,r);W(ma(n),a=>{Oo(a,s,i).each(l=>{const c=xt(_e(a),f=>s(f)&&!t.isValidChild(Wt(l),Wt(f)));if(c.length>0){const d=ri(l);W(c,u=>{Oo(u,s,i).each(f=>{((h,g)=>{const b=document.createRange(),p=h.parentNode;if(p){b.setStartBefore(h),b.setEndBefore(g);const v=b.extractContents();Dt(v,!0),b.setStartAfter(g),b.setEndAfter(h);const _=b.extractContents();Dt(_,!1),rt(O(v))||p.insertBefore(v,h),rt(O(g))||p.insertBefore(g,h),rt(O(_))||p.insertBefore(_,h),p.removeChild(h)}})(f.dom,u.dom)})}),d.each(u=>It(t,u.dom))}})})})(t,e,n),o=t,r=e,s=n,W([...s,...Ht(o,r)?[r]:[]],i=>W(De(O(i),i.nodeName.toLowerCase()),a=>{$t(o,a.dom)&&Do(a)}))},Pt=(t,e)=>{if(jt(t,e)){const n=Ct(t.getBlockElements());bt(n,e)}},oe=t=>t.hasAttribute(yt),de=(t,e)=>Ot(t.getTransparentElements(),e),jt=(t,e)=>ct(e)&&de(t,e.nodeName),Ht=(t,e)=>jt(t,e)&&oe(e),$t=(t,e)=>jt(t,e)&&!oe(e),qt=(t,e)=>1===e.type&&de(t,e.name)&&ht(e.attr(yt)),ie=Hn().browser,ae=t=>ye(t,ln),re=(t,e)=>t.children&&gt(t.children,e),we=(t,e={})=>{let n=0;const o={},r=O(t),s=Ho(r),i=l=>new Promise((c,d)=>{let u;const f=Q._addCacheSuffix(l),h=Jt(o,f).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0}));o[f]=h,h.count++;const g=(C,k)=>{W(C,it),h.status=k,h.passed=[],h.failed=[],u&&(u.onload=null,u.onerror=null,u=null)},b=()=>g(h.passed,2),p=()=>g(h.failed,3);if(c&&h.passed.push(c),d&&h.failed.push(d),1===h.status)return;if(2===h.status)return void b();if(3===h.status)return void p();h.status=1;const v=Re("link",s.dom);var _;xo(v,{rel:"stylesheet",type:"text/css",id:h.id}),e.contentCssCors&&fe(v,"crossOrigin","anonymous"),e.referrerPolicy&&fe(v,"referrerpolicy",e.referrerPolicy),u=v.dom,u.onload=b,u.onerror=p,_=v,ge(Dn(r),_),fe(v,"href",f)}),a=l=>{const c=Q._addCacheSuffix(l);Jt(o,c).each(d=>{0==--d.count&&(delete o[c],(u=>{const f=Dn(r);ii(f,"#"+u).each(ne)})(d.id))})};return{load:i,loadAll:l=>Promise.allSettled(Mt(l,c=>i(c).then(st(c)))).then(c=>{const d=$o(c,u=>"fulfilled"===u.status);return d.fail.length>0?Promise.reject(Mt(d.fail,u=>u.reason)):Mt(d.pass,u=>u.value)}),unload:a,unloadAll:l=>{W(l,c=>{a(c)})},_setReferrerPolicy:l=>{e.referrerPolicy=l},_setContentCssCors:l=>{e.contentCssCors=l}}},wn=(()=>{const t=new WeakMap;return{forElement:(e,n)=>{const o=gr(e).dom;return w.from(t.get(o)).getOrThunk(()=>{const r=we(o,n);return t.set(o,r),r})}}})(),Wn=(t,e)=>ot(t)&&($(t,e)||xa(O(t))),tn=t=>"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type"),En=(t,e,n)=>{var o;const r=n||e;if(ct(e)&&tn(e))return e;const s=e.childNodes;for(let i=s.length-1;i>=0;i--)En(t,s[i],r);if(ct(e)){const i=e.childNodes;1===i.length&&tn(i[0])&&(null===(o=e.parentNode)||void 0===o||o.insertBefore(i[0],e))}return ya(i=e)||hr(i)||$(e,r)||(i=>!!ct(i)&&i.childNodes.length>0)(e)||((i,a)=>X(i)&&i.data.length>0&&((l,c)=>{const d=new Ce(l,c).prev(!1),u=new Ce(l,c).next(!1),f=Ne(d)||Wn(d,c),h=Ne(u)||Wn(u,c);return f&&h})(i,a))(e,r)||t.remove(e),e;var i},Kn=Q.makeMap,ue=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Pn=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Mo=/[<>&\"\']/g,Os=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Ve={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},Yt={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},gn={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Mn=(t,e)=>{const n={};if(t){const o=t.split(",");e=e||10;for(let r=0;r<o.length;r+=2){const s=String.fromCharCode(parseInt(o[r],e));if(!Yt[s]){const i="&"+o[r+1]+";";n[s]=i,n[i]=s}}return n}},Io=Mn("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),gi=(t,e)=>t.replace(e?ue:Pn,n=>Yt[n]||n),Ql=(t,e)=>t.replace(e?ue:Pn,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":Yt[n]||"&#"+n.charCodeAt(0)+";"),Na=(t,e,n)=>{const o=n||Io;return t.replace(e?ue:Pn,r=>Yt[r]||o[r]||r)},io={encodeRaw:gi,encodeAllRaw:t=>(""+t).replace(Mo,e=>Yt[e]||e),encodeNumeric:Ql,encodeNamed:Na,getEncodeFunc:(t,e)=>{const n=Mn(e)||Io,o=Kn(t.replace(/\+/g,","));return o.named&&o.numeric?(r,s)=>r.replace(s?ue:Pn,i=>void 0!==Yt[i]?Yt[i]:void 0!==n[i]?n[i]:i.length>1?"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";":"&#"+i.charCodeAt(0)+";"):o.named?e?(r,s)=>Na(r,s,n):Na:o.numeric?Ql:gi},decode:t=>t.replace(Os,(e,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):Ve[n]||String.fromCharCode(n):gn[e]||Io[e]||(o=>{const r=Re("div").dom;return r.innerHTML=o,r.textContent||r.innerText||o})(e))},Fe=(t,e)=>(t=Q.trim(t))?t.split(e||" "):[],Wd=t=>new RegExp("^"+t.replace(/([?+*])/g,".$1")+"$"),Ts={},pi=Q.makeMap,Yn=Q.each,Jl=Q.extend,Zl=Q.explode,tc=(t,e={})=>{const n=pi(t," ",pi(t.toUpperCase()," "));return Jl(n,e)},Kd=t=>tc("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),ec=(t,e)=>{if(t){const n={};return ht(t)&&(t={"*":t}),Yn(t,(o,r)=>{n[r]=n[r.toUpperCase()]="map"===e?pi(o,/[, ]/):Zl(o,/[, ]/)}),n}},xn=(t={})=>{var e;const n={},o={};let r=[];const s={},i={},a=(M,Y,J)=>{const tt=t[M];if(tt)return pi(tt,/[, ]/,pi(tt.toUpperCase(),/[, ]/));{let et=Ts[M];return et||(et=tc(Y,J),Ts[M]=et),et}},l=null!==(e=t.schema)&&void 0!==e?e:"html5",c=(M=>{const{globalAttributes:Y,phrasingContent:J,flowContent:tt}=(Ft=>{let bn,ke,pe,vn;return bn="id accesskey class dir lang style tabindex title role",ke="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",pe="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==Ft&&(bn+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",ke+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",pe+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==Ft&&(bn+=" xml:lang",pe=[pe,"acronym applet basefont big font strike tt"].join(" "),ke=[ke,"center dir isindex noframes"].join(" "),vn=[ke,pe].join(" ")),vn=vn||[ke,pe].join(" "),{globalAttributes:bn,blockContent:ke,phrasingContent:pe,flowContent:vn}})(M),et={},Z=(Ft,bn="",ke="")=>{const pe=Fe(ke),vn=Fe(Ft);let ho=vn.length;for(;ho--;){const We=Fe([Y,bn].join(" "));et[vn[ho]]={attributes:_o(We,st({})),attributesOrder:We,children:_o(pe,st({}))}}},Et=(Ft,bn)=>{const ke=Fe(Ft),pe=Fe(bn);let vn=ke.length;for(;vn--;){const ho=et[ke[vn]];for(let We=0,ss=pe.length;We<ss;We++)ho.attributes[pe[We]]={},ho.attributesOrder.push(pe[We])}};return"html5-strict"!==M&&(W(Fe("acronym applet basefont big font strike tt"),Ft=>{Z(Ft,"",J)}),W(Fe("center dir isindex noframes"),Ft=>{Z(Ft,"",tt)})),Z("html","manifest","head body"),Z("head","","base command link meta noscript script style title"),Z("title hr noscript br"),Z("base","href target"),Z("link","href rel media hreflang type sizes hreflang"),Z("meta","name http-equiv content charset"),Z("style","media type scoped"),Z("script","src async defer type charset"),Z("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",tt),Z("dd div","",tt),Z("address dt caption","","html4"===M?J:tt),Z("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",J),Z("blockquote","cite",tt),Z("ol","reversed start type","li"),Z("ul","","li"),Z("li","value",tt),Z("dl","","dt dd"),Z("a","href target rel media hreflang type","html4"===M?J:tt),Z("q","cite",J),Z("ins del","cite datetime",tt),Z("img","src sizes srcset alt usemap ismap width height"),Z("iframe","src name width height",tt),Z("embed","src type width height"),Z("object","data type typemustmatch name usemap form width height",[tt,"param"].join(" ")),Z("param","name value"),Z("map","name",[tt,"area"].join(" ")),Z("area","alt coords shape href target rel media hreflang type"),Z("table","border","caption colgroup thead tfoot tbody tr"+("html4"===M?" col":"")),Z("colgroup","span","col"),Z("col","span"),Z("tbody thead tfoot","","tr"),Z("tr","","td th"),Z("td","colspan rowspan headers",tt),Z("th","colspan rowspan headers scope abbr",tt),Z("form","accept-charset action autocomplete enctype method name novalidate target",tt),Z("fieldset","disabled form name",[tt,"legend"].join(" ")),Z("label","form for",J),Z("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),Z("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===M?tt:J),Z("select","disabled form multiple name required size","option optgroup"),Z("optgroup","disabled label","option"),Z("option","disabled label selected value"),Z("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),Z("menu","type label",[tt,"li"].join(" ")),Z("noscript","",tt),"html4"!==M&&(Z("wbr"),Z("ruby","",[J,"rt rp"].join(" ")),Z("figcaption","",tt),Z("mark rt rp summary bdi","",J),Z("canvas","width height",tt),Z("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[tt,"track source"].join(" ")),Z("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[tt,"track source"].join(" ")),Z("picture","","img source"),Z("source","src srcset type media sizes"),Z("track","kind src srclang label default"),Z("datalist","",[J,"option"].join(" ")),Z("article section nav aside main header footer","",tt),Z("hgroup","","h1 h2 h3 h4 h5 h6"),Z("figure","",[tt,"figcaption"].join(" ")),Z("time","datetime",J),Z("dialog","open",tt),Z("command","type label icon disabled checked radiogroup command"),Z("output","for form name",J),Z("progress","value max",J),Z("meter","value min max low high optimum",J),Z("details","open",[tt,"summary"].join(" ")),Z("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==M&&(Et("script","language xml:space"),Et("style","xml:space"),Et("object","declare classid code codebase codetype archive standby align border hspace vspace"),Et("embed","align name hspace vspace"),Et("param","valuetype type"),Et("a","charset name rev shape coords"),Et("br","clear"),Et("applet","codebase archive code object alt name width height align hspace vspace"),Et("img","name longdesc align border hspace vspace"),Et("iframe","longdesc frameborder marginwidth marginheight scrolling align"),Et("font basefont","size color face"),Et("input","usemap align"),Et("select"),Et("textarea"),Et("h1 h2 h3 h4 h5 h6 div p legend caption","align"),Et("ul","type compact"),Et("li","type"),Et("ol dl menu dir","compact"),Et("pre","width xml:space"),Et("hr","align noshade size width"),Et("isindex","prompt"),Et("table","summary width frame rules cellspacing cellpadding align bgcolor"),Et("col","width align char charoff valign"),Et("colgroup","width align char charoff valign"),Et("thead","align char charoff valign"),Et("tr","align char charoff valign bgcolor"),Et("th","axis align char charoff valign nowrap bgcolor width height"),Et("form","accept"),Et("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),Et("tfoot","align char charoff valign"),Et("tbody","align char charoff valign"),Et("area","nohref"),Et("body","background bgcolor text link vlink alink")),"html4"!==M&&(Et("input button select textarea","autofocus"),Et("input textarea","placeholder"),Et("a","download"),Et("link script img","crossorigin"),Et("img","loading"),Et("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==M&&W([et.video,et.audio],Ft=>{delete Ft.children.audio,delete Ft.children.video}),W(Fe("a form meter progress dfn"),Ft=>{et[Ft]&&delete et[Ft].children[Ft]}),delete et.caption.children.table,delete et.script,et})(l);!1===t.verify_html&&(t.valid_elements="*[*]");const d=ec(t.valid_styles),u=ec(t.invalid_styles,"map"),f=ec(t.valid_classes,"map"),h=a("whitespace_elements","pre script noscript style textarea video audio iframe object code"),g=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),b=a("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),p=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),v="td th iframe video audio object script code",_=a("non_empty_elements",v+" pre",b),C=a("move_caret_before_on_enter_elements",v+" table",b),k=a("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),x=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",k),N=a("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),D=a("transparent_elements","a ins del canvas map");Yn("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),M=>{i[M]=new RegExp("</"+M+"[^>]*>","gi")});const B=M=>{const Y=w.from(n["@"]),J=/[*?+]/;W(((tt,et)=>{const Z=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Un(Fe(et,","),Et=>{const Ft=Z.exec(Et);if(Ft){const bn=Ft[1],ke=Ft[2],pe=Ft[3],vn=Ft[4],ho=Ft[5],We={attributes:{},attributesOrder:[]};if(tt.each(ss=>{return tr=We,Xt((Le=ss).attributes,(Rr,Ws)=>{tr.attributes[Ws]=Rr}),void tr.attributesOrder.push(...Le.attributesOrder);var Le,tr}),"#"===bn?We.paddEmpty=!0:"-"===bn&&(We.removeEmpty=!0),"!"===vn&&(We.removeEmptyAttrs=!0),ho&&((ss,Le)=>{const tr=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Rr=/[*?+]/,{attributes:Ws,attributesOrder:rl}=Le;W(Fe(ss,"|"),Am=>{const is=tr.exec(Am);if(is){const as={},sl=is[1],Gn=is[2].replace(/[\\:]:/g,":"),bo=is[3],Dr=is[4];if("!"===sl&&(Le.attributesRequired=Le.attributesRequired||[],Le.attributesRequired.push(Gn),as.required=!0),"-"===sl)return delete Ws[Gn],void rl.splice(Q.inArray(rl,Gn),1);if(bo&&("="===bo?(Le.attributesDefault=Le.attributesDefault||[],Le.attributesDefault.push({name:Gn,value:Dr}),as.defaultValue=Dr):"~"===bo?(Le.attributesForced=Le.attributesForced||[],Le.attributesForced.push({name:Gn,value:Dr}),as.forcedValue=Dr):"<"===bo&&(as.validValues=Q.makeMap(Dr,"?"))),Rr.test(Gn)){const rd=as;Le.attributePatterns=Le.attributePatterns||[],rd.pattern=Wd(Gn),Le.attributePatterns.push(rd)}else Ws[Gn]||rl.push(Gn),Ws[Gn]=as}})})(ho,We),pe&&(We.outputName=ke),"@"===ke){if(!tt.isNone())return[];tt=w.some(We)}return[pe?{name:ke,element:We,aliasName:pe}:{name:ke,element:We}]}return[]})})(Y,M??""),({name:tt,element:et,aliasName:Z})=>{if(Z&&(n[Z]=et),J.test(tt)){const Et=et;Et.pattern=Wd(tt),r.push(Et)}else n[tt]=et})},P=M=>{r=[],W(Xe(n),Y=>{delete n[Y]}),B(M)},j=M=>{delete Ts.text_block_elements,delete Ts.block_elements,W((Y=>{const J=/^(~)?(.+)$/;return Un(Fe(Y,","),tt=>{const et=J.exec(tt);if(et){const Z="~"===et[1];return[{inline:Z,cloneName:Z?"span":"div",name:et[2]}]}return[]})})(M??""),({inline:Y,name:J,cloneName:tt})=>{if(o[J]=o[tt],s[J]=tt,_[J.toUpperCase()]={},_[J]={},Y||(x[J.toUpperCase()]={},x[J]={}),!n[J]){let et=n[tt];et=Jl({},et),delete et.removeEmptyAttrs,delete et.removeEmpty,n[J]=et}Xt(o,(et,Z)=>{et[tt]&&(o[Z]=et=Jl({},o[Z]),et[J]=et[tt])})})},A=M=>{W((Y=>{const J=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Un(Fe(Y,","),tt=>{const et=J.exec(tt);if(et){const Z=et[1];return[{operation:Z?(Ft=Z,"-"===Ft?"remove":"add"):"replace",name:et[2],validChildren:Fe(et[3],"|")}]}var Ft;return[]})})(M??""),({operation:Y,name:J,validChildren:tt})=>{const et="replace"===Y?{"#comment":{}}:o[J];W(tt,Z=>{"remove"===Y?delete et[Z]:et[Z]={}}),o[J]=et})},T=M=>{const Y=n[M];if(Y)return Y;let J=r.length;for(;J--;){const tt=r[J];if(tt.pattern.test(M))return tt}};t.valid_elements?(P(t.valid_elements),Yn(c,(M,Y)=>{o[Y]=M.children})):(Yn(c,(M,Y)=>{n[Y]={attributes:M.attributes,attributesOrder:M.attributesOrder},o[Y]=M.children}),Yn(Fe("strong/b em/i"),M=>{const Y=Fe(M,"/");n[Y[1]].outputName=Y[0]}),Yn(N,(M,Y)=>{n[Y]&&(t.padd_empty_block_inline_children&&(n[Y].paddInEmptyBlock=!0),n[Y].removeEmpty=!0)}),Yn(Fe("ol ul blockquote a table tbody"),M=>{n[M]&&(n[M].removeEmpty=!0)}),Yn(Fe("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),M=>{n[M]&&(n[M].paddEmpty=!0)}),Yn(Fe("span"),M=>{n[M].removeEmptyAttrs=!0})),j(t.custom_elements),A(t.valid_children),B(t.extended_valid_elements),A("+ol[ul|ol],+ul[ul|ol]"),Yn({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(M,Y)=>{n[Y]&&(n[Y].parentsRequired=Fe(M))}),t.invalid_elements&&Yn(Zl(t.invalid_elements),M=>{n[M]&&delete n[M]}),T("span")||B("span[!data-mce-type|*]");const I=st(d),q=st(u),at=st(f),G=st(p),pt=st(x),mt=st(k),kt=st(N),St=st(Object.seal(b)),dt=st(g),wt=st(_),Nt=st(C),R=st(h),L=st(D),H=st(Object.seal(i)),V=st(s);return{type:l,children:o,elements:n,getValidStyles:I,getValidClasses:at,getBlockElements:pt,getInvalidStyles:q,getVoidElements:St,getTextBlockElements:mt,getTextInlineElements:kt,getBoolAttrs:G,getElementRule:T,getSelfClosingElements:dt,getNonEmptyElements:wt,getMoveCaretBeforeOnEnterElements:Nt,getWhitespaceElements:R,getTransparentElements:L,getSpecialElements:H,isValidChild:(M,Y)=>{const J=o[M.toLowerCase()];return!(!J||!J[Y.toLowerCase()])},isValid:(M,Y)=>{const J=T(M);if(J){if(!Y)return!0;{if(J.attributes[Y])return!0;const tt=J.attributePatterns;if(tt){let et=tt.length;for(;et--;)if(tt[et].pattern.test(Y))return!0}}}return!1},getCustomElements:V,addValidElements:B,setValidElements:P,addCustomElements:j,addValidChildren:A}},Rs=(t={},e)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,o=/\s*([^:]+):\s*([^;]+);?/g,r=/\s+$/,s={};let i,a;e&&(i=e.getValidStyles(),a=e.getInvalidStyles());const c="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let u=0;u<c.length;u++)s[c[u]]="\ufeff"+u,s["\ufeff"+u]=c[u];const d={parse:u=>{const f={};let h=!1;const g=t.url_converter,b=t.url_converter_scope||d,p=(j,A,T)=>{const I=f[j+"-top"+A];if(!I)return;const q=f[j+"-right"+A];if(!q)return;const at=f[j+"-bottom"+A];if(!at)return;const G=f[j+"-left"+A];if(!G)return;const pt=[I,q,at,G];let mt=pt.length-1;for(;mt--&&pt[mt]===pt[mt+1];);mt>-1&&T||(f[j+A]=-1===mt?pt[0]:pt.join(" "),delete f[j+"-top"+A],delete f[j+"-right"+A],delete f[j+"-bottom"+A],delete f[j+"-left"+A])},v=j=>{const A=f[j];if(!A)return;const T=A.indexOf(",")>-1?[A]:A.split(" ");let I=T.length;for(;I--;)if(T[I]!==T[0])return!1;return f[j]=T[0],!0},_=j=>(h=!0,s[j]),C=(j,A)=>(h&&(j=j.replace(/\uFEFF[0-9]/g,T=>s[T])),A||(j=j.replace(/\\([\'\";:])/g,"$1")),j),k=j=>String.fromCharCode(parseInt(j.slice(1),16)),x=j=>j.replace(/\\[0-9a-f]+/gi,k),N=(j,A,T,I,q,at)=>{if(q=q||at)return"'"+(q=C(q)).replace(/\'/g,"\\'")+"'";if(A=C(A||T||I||""),!t.allow_script_urls){const G=A.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(G)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(G))return""}return g&&(A=g.call(b,A,"style")),"url('"+A.replace(/\'/g,"\\'")+"')"};if(u){let j;for(u=(u=u.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,_).replace(/\"[^\"]+\"|\'[^\']+\'/g,A=>A.replace(/[;:]/g,_));j=o.exec(u);){o.lastIndex=j.index+j[0].length;let A=j[1].replace(r,"").toLowerCase(),T=j[2].replace(r,"");if(A&&T){if(A=x(A),T=x(T),-1!==A.indexOf("\ufeff")||-1!==A.indexOf('"')||!t.allow_script_urls&&("behavior"===A||/expression\s*\(|\/\*|\*\//.test(T)))continue;"font-weight"===A&&"700"===T?T="bold":"color"!==A&&"background-color"!==A||(T=T.toLowerCase()),T=T.replace(n,N),f[A]=h?C(T,!0):T}}p("border","",!0),p("border","-width"),p("border","-color"),p("border","-style"),p("padding",""),p("margin",""),B="border-style",P="border-color",v(D="border-width")&&v(B)&&v(P)&&(f.border=f[D]+" "+f[B]+" "+f[P],delete f[D],delete f[B],delete f[P]),"medium none"===f.border&&delete f.border,"none"===f["border-image"]&&delete f["border-image"]}var D,B,P;return f},serialize:(u,f)=>{let h="";const g=(b,p)=>{const v=p[b];if(v)for(let _=0,C=v.length;_<C;_++){const k=v[_],x=u[k];x&&(h+=(h.length>0?" ":"")+k+": "+x+";")}};return f&&i?(g("*",i),g(f,i)):Xt(u,(b,p)=>{b&&((v,_)=>{if(!a||!_)return!0;let C=a["*"];return!(C&&C[v]||(C=a[_],C&&C[v]))})(p,f)&&(h+=(h.length>0?" ":"")+p+": "+b+";")}),h}};return d},Yd={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},nc=(t,e)=>{const n=e??{};for(const o in t)Ot(Yd,o)||(n[o]=t[o]);return ot(t.composedPath)&&(n.composedPath=()=>t.composedPath()),ot(t.getModifierState)&&(n.getModifierState=o=>t.getModifierState(o)),n},hi=(t,e,n,o)=>{var r;const s=nc(e,o);return s.type=t,he(s.target)&&(s.target=null!==(r=s.srcElement)&&void 0!==r?r:n),(he((i=e).preventDefault)||(a=i)instanceof Event||Ut(a.initEvent))&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=me,Ut(e.preventDefault)&&e.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=me,Ut(e.stopPropagation)&&e.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=me,s.stopPropagation()},(i=>i.isDefaultPrevented===me||i.isDefaultPrevented===ee)(s)||(s.isDefaultPrevented=!0===s.defaultPrevented?me:ee,s.isPropagationStopped=!0===s.cancelBubble?me:ee,s.isImmediatePropagationStopped=ee)),s;var i,a},Xd=/^(?:mouse|contextmenu)|click/,Aa=(t,e,n,o)=>{t.addEventListener(e,n,o||!1)},bi=(t,e,n,o)=>{t.removeEventListener(e,n,o||!1)},Ds=(t,e)=>{const n=hi(t.type,t,document,e);if(ot(o=t)&&Xd.test(o.type)&&Ne(t.pageX)&&!Ne(t.clientX)){const o=n.target.ownerDocument||document,r=o.documentElement,s=o.body,i=n;i.pageX=t.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),i.pageY=t.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)}var o;return n},Xm=(t,e,n)=>{const o=t.document,r={type:"ready"};if(n.domLoaded)return void e(r);const s=()=>{bi(t,"DOMContentLoaded",s),bi(t,"load",s),n.domLoaded||(n.domLoaded=!0,e(r)),t=null};"complete"===o.readyState||"interactive"===o.readyState&&o.body?s():Aa(t,"DOMContentLoaded",s),n.domLoaded||Aa(t,"load",s)};class Zr{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,n,o,r){const s=this;let i;const a=window,l=f=>{s.executeHandlers(Ds(f||a.event),c)};if(!e||X(e)||Lo(e))return o;let c;e[s.expando]?c=e[s.expando]:(c=s.count++,e[s.expando]=c,s.events[c]={}),r=r||e;const d=n.split(" ");let u=d.length;for(;u--;){let f=d[u],h=l,g=!1,b=!1;"DOMContentLoaded"===f&&(f="ready"),s.domLoaded&&"ready"===f&&"complete"===e.readyState?o.call(r,Ds({type:f})):(s.hasFocusIn||"focusin"!==f&&"focusout"!==f||(g=!0,b="focusin"===f?"focus":"blur",h=p=>{const v=Ds(p||a.event);v.type="focus"===v.type?"focusin":"focusout",s.executeHandlers(v,c)}),i=s.events[c][f],i?"ready"===f&&s.domLoaded?o(Ds({type:f})):i.push({func:o,scope:r}):(s.events[c][f]=i=[{func:o,scope:r}],i.fakeName=b,i.capture=g,i.nativeHandler=h,"ready"===f?Xm(e,h,s):Aa(e,b||f,h,g)))}return e=i=null,o}unbind(e,n,o){if(!e||X(e)||Lo(e))return this;const r=e[this.expando];if(r){let s=this.events[r];if(n){const i=n.split(" ");let a=i.length;for(;a--;){const l=i[a],c=s[l];if(c){if(o){let d=c.length;for(;d--;)if(c[d].func===o){const u=c.nativeHandler,f=c.fakeName,h=c.capture,g=c.slice(0,d).concat(c.slice(d+1));g.nativeHandler=u,g.fakeName=f,g.capture=h,s[l]=g}}o&&0!==c.length||(delete s[l],bi(e,c.fakeName||l,c.nativeHandler,c.capture))}}}else Xt(s,(i,a)=>{bi(e,i.fakeName||a,i.nativeHandler,i.capture)}),s={};for(const i in s)if(Ot(s,i))return this;delete this.events[r];try{delete e[this.expando]}catch{e[this.expando]=null}}return this}fire(e,n,o){return this.dispatch(e,n,o)}dispatch(e,n,o){if(!e||X(e)||Lo(e))return this;const r=Ds({type:n,target:e},o);do{const s=e[this.expando];s&&this.executeHandlers(r,s),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!r.isPropagationStopped());return this}clean(e){if(!e||X(e)||Lo(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);const n=e.getElementsByTagName("*");let o=n.length;for(;o--;)(e=n[o])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,n){const o=this.events[n],r=o&&o[e.type];if(r)for(let s=0,i=r.length;s<i;s++){const a=r[s];if(a&&!1===a.func.call(a.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}Zr.Event=new Zr;const vi=Q.each,Gd=Q.grep,Gm="data-mce-style",Px=Q.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),oc=(t,e,n)=>{he(n)||""===n?Te(t,e):fe(t,e,n)},kh=t=>t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),Oa=(t,e)=>{let n=0;if(t)for(let o=t.nodeType,r=t.previousSibling;r;r=r.previousSibling){const s=r.nodeType;(!e||!X(r)||s!==o&&r.data.length)&&(n++,o=s)}return n},Sh=(t,e)=>{const n=cn(e,"style"),o=t.serialize(t.parse(n),Wt(e));oc(e,Gm,o)},Nh=(t,e,n)=>{const o=kh(e);var r,s;he(n)||""===n?Rd(t,o):$l(t,o,(s=o,Tn(r=n)?Ot(Px,s)?r+"":r+"px":r))},Qt=(t,e={})=>{const n={},o=window,r={};let s=0;const i=wn.forElement(O(t),{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),a=[],l=e.schema?e.schema:xn({}),c=Rs({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope},e.schema),d=e.ownEvents?new Zr:Zr.Event,u=l.getBlockElements(),f=R=>R&&t&&ht(R)?t.getElementById(R):R,h=R=>{const L=f(R);return ot(L)?O(L):null},g=(R,L,H="")=>{let V;const M=h(R);if(ot(M)&&ln(M)){const Y=Nt[L];V=Y&&Y.get?Y.get(M.dom,L):cn(M,L)}return ot(V)?V:H},b=R=>{const L=f(R);return he(L)?[]:L.attributes},p=(R,L,H)=>{B(R,V=>{if(ct(V)){const M=O(V),Y=""===H?null:H,J=cn(M,L),tt=Nt[L];tt&&tt.set?tt.set(M.dom,Y,L):oc(M,L,Y),J!==Y&&e.onSetAttrib&&e.onSetAttrib({attrElm:M.dom,attrName:L,attrValue:Y})}})},v=()=>e.root_element||t.body,_=(R,L)=>((H,V,M)=>{let Y=0,J=0;const tt=H.ownerDocument;if(M=M||H,V){if(M===H&&V.getBoundingClientRect&&"static"===oo(O(H),"position")){const Z=V.getBoundingClientRect();return Y=Z.left+(tt.documentElement.scrollLeft||H.scrollLeft)-tt.documentElement.clientLeft,J=Z.top+(tt.documentElement.scrollTop||H.scrollTop)-tt.documentElement.clientTop,{x:Y,y:J}}let et=V;for(;et&&et!==M&&et.nodeType&&!re(et,M);)Y+=et.offsetLeft||0,J+=et.offsetTop||0,et=et.offsetParent;for(et=V.parentNode;et&&et!==M&&et.nodeType&&!re(et,M);)Y-=et.scrollLeft||0,J-=et.scrollTop||0,et=et.parentNode;J+=(Z=O(V),ie.isFirefox()&&"table"===Wt(Z)?ae(_e(Z)).filter(Et=>"caption"===Wt(Et)).bind(Et=>ae(kd(Et)).map(Ft=>Ft.dom.offsetTop<=Et.dom.offsetTop?-Et.dom.offsetHeight:0)).getOr(0):0)}var Z;return{x:Y,y:J}})(t.body,f(R),L),C=(R,L,H)=>{const V=f(R);if(!he(V)&&ct(V))return H?oo(O(V),kh(L)):("float"===(L=L.replace(/-(\D)/g,(M,Y)=>Y.toUpperCase()))&&(L="cssFloat"),V.style?V.style[L]:void 0)},k=R=>{const L=f(R);if(!L)return{w:0,h:0};let H=C(L,"width"),V=C(L,"height");return H&&-1!==H.indexOf("px")||(H="0"),V&&-1!==V.indexOf("px")||(V="0"),{w:parseInt(H,10)||L.offsetWidth||L.clientWidth,h:parseInt(V,10)||L.offsetHeight||L.clientHeight}},x=(R,L)=>{if(!R)return!1;const H=Kt(R)?R:[R];return le(H,V=>Ge(O(V),L))},N=(R,L,H,V)=>{const M=[];let Y=f(R);V=void 0===V;const J=H||("BODY"!==v().nodeName?v().parentNode:null);if(ht(L))if("*"===L)L=ct;else{const tt=L;L=et=>x(et,tt)}for(;Y&&!(Y===J||he(Y.nodeType)||hr(Y)||ya(Y));){if(!L||L(Y)){if(!V)return[Y];M.push(Y)}Y=Y.parentNode}return V?M:null},D=(R,L,H)=>{let V=L;if(R){ht(L)&&(V=M=>x(M,L));for(let M=R[H];M;M=M[H])if(Ut(V)&&V(M))return M}return null},B=function(R,L,H){const V=H??this;if(Kt(R)){const M=[];return vi(R,(Y,J)=>{const tt=f(Y);tt&&M.push(L.call(V,tt,J))}),M}{const M=f(R);return!!M&&L.call(V,M)}},P=(R,L)=>{B(R,H=>{Xt(L,(V,M)=>{p(H,M,V)})})},j=(R,L)=>{B(R,H=>{const V=O(H);ga(V,L)})},A=(R,L,H,V,M)=>B(R,Y=>{const J=ht(L)?t.createElement(L):L;return ot(H)&&P(J,H),V&&(!ht(V)&&V.nodeType?J.appendChild(V):ht(V)&&j(J,V)),M?J:Y.appendChild(J)}),T=(R,L,H)=>A(t.createElement(R),R,L,H,!0),I=io.encodeAllRaw,q=(R,L)=>B(R,H=>{const V=O(H);return L&&W(_e(V),M=>{Cn(M)&&0===M.dom.length?ne(M):Je(V,M)}),ne(V),V.dom}),at=(R,L,H)=>{B(R,V=>{if(ct(V)){const M=O(V),Y=L.split(" ");W(Y,J=>{var tt,et,Et,Ft;ot(H)?(H?Ur:ni)(M,J):(et=J,_s(tt=M)?tt.dom.classList.toggle(et):(Ft=et,gt(Tl(Et=tt),Ft)?la(Et,Ft):Rl(Et,Ft)),wd(tt))})}})},G=(R,L,H)=>B(L,V=>{var M;const Y=Kt(L)?R.cloneNode(!0):R;return H&&vi(Gd(V.childNodes),J=>{Y.appendChild(J)}),null===(M=V.parentNode)||void 0===M||M.replaceChild(Y,V),V}),pt=R=>{if(ct(R)){const L="a"===R.nodeName.toLowerCase()&&!g(R,"href")&&g(R,"id");if(g(R,"name")||g(R,"data-mce-bookmark")||L)return!0}return!1},mt=()=>t.createRange(),kt=(R,L,H,V)=>{if(Kt(R)){let M=R.length;const Y=[];for(;M--;)Y[M]=kt(R[M],L,H,V);return Y}return!e.collect||R!==t&&R!==o||a.push([R,L,H,V]),d.bind(R,L,H,V||wt)},St=(R,L,H)=>{if(Kt(R)){let V=R.length;const M=[];for(;V--;)M[V]=St(R[V],L,H);return M}if(a.length>0&&(R===t||R===o)){let V=a.length;for(;V--;){const[M,Y,J]=a[V];R!==M||L&&L!==Y||H&&H!==J||d.unbind(M,Y,J)}}return d.unbind(R,L,H)},dt=R=>{if(R&&ct(R)){const L=R.getAttribute("data-mce-contenteditable");return L&&"inherit"!==L?L:"inherit"!==R.contentEditable?R.contentEditable:null}return null},wt={doc:t,settings:e,win:o,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:i,boundEvents:a,styles:c,schema:l,events:d,isBlock:R=>ht(R)?Ot(u,R):ct(R)&&(Ot(u,R.nodeName)||Ht(l,R)),root:null,clone:(R,L)=>R.cloneNode(L),getRoot:v,getViewPort:R=>{const L=Pd(R);return{x:L.x,y:L.y,w:L.width,h:L.height}},getRect:R=>{const L=f(R),H=_(L),V=k(L);return{x:H.x,y:H.y,w:V.w,h:V.h}},getSize:k,getParent:(R,L,H)=>{const V=N(R,L,H,!1);return V&&V.length>0?V[0]:null},getParents:N,get:f,getNext:(R,L)=>D(R,L,"nextSibling"),getPrev:(R,L)=>D(R,L,"previousSibling"),select:(R,L)=>{var H,V;const M=null!==(V=null!==(H=f(L))&&void 0!==H?H:e.root_element)&&void 0!==V?V:t;return Ut(M.querySelectorAll)?Ye(M.querySelectorAll(R)):[]},is:x,add:A,create:T,createHTML:(R,L,H="")=>{let V="<"+R;for(const M in L)gs(L,M)&&(V+=" "+M+'="'+I(L[M])+'"');return Co(H)&&Ot(l.getVoidElements(),R)?V+" />":V+">"+H+"</"+R+">"},createFragment:R=>{const L=t.createElement("div"),H=t.createDocumentFragment();let V;for(H.appendChild(L),R&&(L.innerHTML=R);V=L.firstChild;)H.appendChild(V);return H.removeChild(L),H},remove:q,setStyle:(R,L,H)=>{B(R,V=>{const M=O(V);Nh(M,L,H),e.update_styles&&Sh(c,M)})},getStyle:C,setStyles:(R,L)=>{B(R,H=>{const V=O(H);Xt(L,(M,Y)=>{Nh(V,Y,M)}),e.update_styles&&Sh(c,V)})},removeAllAttribs:R=>B(R,L=>{const H=L.attributes;for(let V=H.length-1;V>=0;V--)L.removeAttributeNode(H.item(V))}),setAttrib:p,setAttribs:P,getAttrib:g,getPos:_,parseStyle:R=>c.parse(R),serializeStyle:(R,L)=>c.serialize(R,L),addStyle:R=>{if(wt!==Qt.DOM&&t===document){if(n[R])return;n[R]=!0}let L=t.getElementById("mceDefaultStyles");if(!L){L=t.createElement("style"),L.id="mceDefaultStyles",L.type="text/css";const H=t.head;H.firstChild?H.insertBefore(L,H.firstChild):H.appendChild(L)}L.styleSheet?L.styleSheet.cssText+=R:L.appendChild(t.createTextNode(R))},loadCSS:R=>{R||(R=""),W(R.split(","),L=>{r[L]=!0,i.load(L).catch(Tt)})},addClass:(R,L)=>{at(R,L,!0)},removeClass:(R,L)=>{at(R,L,!1)},hasClass:(R,L)=>{const H=h(R),V=L.split(" ");return ot(H)&&sr(V,M=>ca(H,M))},toggleClass:at,show:R=>{B(R,L=>Rd(O(L),"display"))},hide:R=>{B(R,L=>$l(O(L),"display","none"))},isHidden:R=>{const L=h(R);return ot(L)&&Eo(dn(L,"display"),"none")},uniqueId:R=>(R||"mce_")+s++,setHTML:j,getOuterHTML:R=>{const L=h(R);return ot(L)?ct(L.dom)?L.dom.outerHTML:(H=>{const V=Re("div"),M=O(H.dom.cloneNode(!0));return ge(V,M),fa(V)})(L):""},setOuterHTML:(R,L)=>{B(R,H=>{ct(H)&&(H.outerHTML=L)})},decode:io.decode,encode:I,insertAfter:(R,L)=>{const H=f(L);return B(R,V=>{const M=H?.parentNode,Y=H?.nextSibling;return M&&(Y?M.insertBefore(V,Y):M.appendChild(V)),V})},replace:G,rename:(R,L)=>{if(R.nodeName!==L.toUpperCase()){const H=T(L);return vi(b(R),V=>{p(H,V.nodeName,g(R,V.nodeName))}),G(H,R,!0),H}return R},findCommonAncestor:(R,L)=>{let H=R;for(;H;){let V=L;for(;V&&H!==V;)V=V.parentNode;if(H===V)break;H=H.parentNode}return!H&&R.ownerDocument?R.ownerDocument.documentElement:H},run:B,getAttribs:b,isEmpty:(R,L,H)=>{let V=0;if(pt(R))return!1;const M=R.firstChild;if(M){const Y=new Ce(M,R),J=l?l.getWhitespaceElements():{},tt=L||(l?l.getNonEmptyElements():null);let et=M;do{if(ct(et)){const Z=et.getAttribute("data-mce-bogus");if(Z){et=Y.next("all"===Z);continue}const Et=et.nodeName.toLowerCase();if(tt&&tt[Et]){if("br"===Et){V++,et=Y.next();continue}return!1}if(pt(et))return!1}if(Lo(et)||X(et)&&!E(et.data)&&(!H?.includeZwsp||!m(et.data))||X(et)&&et.parentNode&&J[et.parentNode.nodeName]&&E(et.data))return!1;et=Y.next()}while(et)}return V<=1},createRng:mt,nodeIndex:Oa,split:(R,L,H)=>{let V,M,Y=mt();if(R&&L&&R.parentNode&&L.parentNode){const J=R.parentNode;return Y.setStart(J,Oa(R)),Y.setEnd(L.parentNode,Oa(L)),V=Y.extractContents(),Y=mt(),Y.setStart(L.parentNode,Oa(L)+1),Y.setEnd(J,Oa(R)+1),M=Y.extractContents(),J.insertBefore(En(wt,V),R),J.insertBefore(H||L,R),J.insertBefore(En(wt,M),R),q(R),H||L}},bind:kt,unbind:St,fire:(R,L,H)=>d.dispatch(R,L,H),dispatch:(R,L,H)=>d.dispatch(R,L,H),getContentEditable:dt,getContentEditableParent:R=>{const L=v();let H=null;for(let V=R;V&&V!==L&&(H=dt(V),null===H);V=V.parentNode);return H},isEditable:R=>{if(ot(R)){const L=ct(R)?R:R.parentElement;return ot(L)&&Hr(O(L))}return!1},destroy:()=>{if(a.length>0){let R=a.length;for(;R--;){const[L,H,V]=a[R];d.unbind(L,H,V)}}Xt(r,(R,L)=>{i.unload(L),delete r[L]})},isChildOf:(R,L)=>R===L||L.contains(R),dumpRng:R=>"startContainer: "+R.startContainer.nodeName+", startOffset: "+R.startOffset+", endContainer: "+R.endContainer.nodeName+", endOffset: "+R.endOffset},Nt=((R,L,H)=>{const V=L.keep_values,Y={style:{set:(J,tt)=>{const et=O(J);V&&oc(et,Gm,tt),Te(et,"style"),ht(tt)&&qr(et,R.parse(tt))},get:J=>{const tt=O(J),et=cn(tt,Gm)||cn(tt,"style");return R.serialize(R.parse(et),Wt(tt))}}};return V&&(Y.href=Y.src={set:(J,tt,et)=>{const Z=O(J);Ut(L.url_converter)&&ot(tt)&&(tt=L.url_converter.call(L.url_converter_scope||H(),String(tt),et,J)),oc(Z,"data-mce-"+et,tt),oc(Z,et,tt)},get:(J,tt)=>{const et=O(J);return cn(et,"data-mce-"+tt)||cn(et,tt)}}),Y})(c,e,st(wt));return wt};Qt.DOM=Qt(document),Qt.nodeIndex=Oa;const Mx=Qt.DOM;class ts{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((n,o)=>{const r=Mx;let s;const i=()=>{r.remove(a),s&&(s.onerror=s.onload=s=null)},a=r.uniqueId();s=document.createElement("script"),s.id=a,s.type="text/javascript",s.src=Q._addCacheSuffix(e),this.settings.referrerPolicy&&r.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=()=>{i(),n()},s.onerror=()=>{i(),o("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const n=this;return n.queue.push(e),void 0===n.states[e]&&(n.states[e]=0),new Promise((o,r)=>{n.scriptLoadedCallbacks[e]||(n.scriptLoadedCallbacks[e]=[]),n.scriptLoadedCallbacks[e].push({resolve:o,reject:r})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const n=this,o=(l,c)=>{Jt(n.scriptLoadedCallbacks,c).each(d=>{W(d,u=>u[l](c))}),delete n.scriptLoadedCallbacks[c]},r=l=>{const c=xt(l,d=>"rejected"===d.status);return c.length>0?Promise.reject(Un(c,({reason:d})=>Kt(d)?d:[d])):Promise.resolve()},s=l=>Promise.allSettled(Mt(l,c=>2===n.states[c]?(o("resolve",c),Promise.resolve()):3===n.states[c]?(o("reject",c),Promise.reject(c)):(n.states[c]=1,n.loadScript(c).then(()=>{n.states[c]=2,o("resolve",c);const d=n.queue;return d.length>0?(n.queue=[],s(d).then(r)):Promise.resolve()},()=>(n.states[c]=3,o("reject",c),Promise.reject(c)))))),i=l=>(n.loading=!0,s(l).then(c=>{n.loading=!1;const d=n.queueLoadedCallbacks.shift();return w.from(d).each(it),r(c)})),a=ud(e);return n.loading?new Promise((l,c)=>{n.queueLoadedCallbacks.push(()=>{i(a).then(l,c)})}):i(a)}}ts.ScriptLoader=new ts;const je=t=>{let e=t;return{get:()=>e,set:n=>{e=n}}},rc={},Qm=je("en"),Ah=()=>Jt(rc,Qm.get()),Yo={getData:()=>Xi(rc,t=>({...t})),setCode:t=>{t&&Qm.set(t)},getCode:()=>Qm.get(),add:(t,e)=>{let n=rc[t];n||(rc[t]=n={});const o=Mt(Xe(e),r=>r.toLowerCase());Xt(e,(r,s)=>{const i=s.toLowerCase();i!==s&&((a,l)=>{const c=a.indexOf(l);return-1!==c&&a.indexOf(l,c+1)>c})(o,i)?(Ot(e,i)||(n[i]=r),n[s]=r):n[i]=r})},translate:t=>{const e=Ah().getOr({}),n=a=>Ut(a)?Object.prototype.toString.call(a):o(a)?"":""+a,o=a=>""===a||null==a,r=a=>{const l=n(a);return Ot(e,l)?n(e[l]):Jt(e,l.toLowerCase()).map(n).getOr(l)},s=a=>a.replace(/{context:\w+}$/,"");if(o(t))return"";if(Pe(i=t)&&Ot(i,"raw"))return n(t.raw);var i,a;if(Kt(a=t)&&a.length>1){const a=t.slice(1);return s(r(t[0]).replace(/\{([0-9]+)\}/g,(l,c)=>Ot(a,c)?n(a[c]):l))}return s(r(t))},isRtl:()=>Ah().bind(t=>Jt(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>Ot(rc,t)},pn=()=>{const t=[],e={},n={},o=[],r=(l,c)=>{const d=xt(o,u=>u.name===l&&u.state===c);W(d,u=>u.resolve())},s=l=>Ot(e,l),i=(l,c)=>{const d=Yo.getCode();!d||c&&-1===(","+(c||"")+",").indexOf(","+d+",")||ts.ScriptLoader.add(e[l]+"/langs/"+d+".js")},a=(l,c="added")=>"added"===c&&Ot(n,l)||"loaded"===c&&s(l)?Promise.resolve():new Promise(d=>{o.push({name:l,state:c,resolve:d})});return{items:t,urls:e,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,c)=>{!1!==pn.languageLoad&&(s(l)?i(l,c):a(l,"loaded").then(()=>i(l,c)))},add:(l,c)=>(t.push(c),n[l]={instance:c},r(l,"added"),c),remove:l=>{delete e[l],delete n[l]},createUrl:(l,c)=>ht(c)?ht(l)?{prefix:"",resource:c,suffix:""}:{prefix:l.prefix,resource:c,suffix:l.suffix}:c,load:(l,c)=>{if(e[l])return Promise.resolve();let d=ht(c)?c:c.prefix+c.resource+c.suffix;0!==d.indexOf("/")&&-1===d.indexOf("://")&&(d=pn.baseURL+"/"+d),e[l]=d.substring(0,d.lastIndexOf("/"));const u=()=>(r(l,"loaded"),Promise.resolve());return n[l]?u():ts.ScriptLoader.add(d).then(u)},waitFor:a}};pn.languageLoad=!0,pn.baseURL="",pn.PluginManager=pn(),pn.ThemeManager=pn(),pn.ModelManager=pn();const Ix=t=>{const e=je(w.none()),n=()=>e.get().each(o=>clearInterval(o));return{clear:()=>{n(),e.set(w.none())},isSet:()=>e.get().isSome(),get:()=>e.get(),set:o=>{n(),e.set(w.some(setInterval(o,t)))}}},Bs=()=>{const t=(e=>{const n=je(w.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(w.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:r=>{o(),n.set(w.some(r))}}})(Tt);return{...t,on:e=>t.get().each(e)}},Qd=(t,e)=>{let n=null;return{cancel:()=>{se(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{se(n)&&(n=setTimeout(()=>{n=null,t.apply(null,o)},e))}}},Jm=(t,e)=>{let n=null;const o=()=>{se(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout(()=>{n=null,t.apply(null,r)},e)}}},sc=st("mce-annotation"),yi=st("data-mce-annotation"),Ta=st("data-mce-annotation-uid"),ic=st("data-mce-annotation-active"),ac=st("data-mce-annotation-classes"),lc=st("data-mce-annotation-attrs"),Oh=t=>e=>zt(e,t),Th=(t,e)=>{const n=t.selection.getRng(),o=O(n.startContainer),r=O(t.getBody()),s=e.fold(()=>"."+sc(),a=>`[${yi()}="${a}"]`),i=Es(o,n.startOffset).getOr(o);return pr(i,s,Oh(r)).bind(a=>ko(a,`${Ta()}`).bind(l=>ko(a,`${yi()}`).map(c=>{const d=Dh(t,l);return{uid:l,name:c,elements:d}})))},Rh=(t,e)=>So(t,"data-mce-bogus")||Hl(t,'[data-mce-bogus="all"]',Oh(e)),Dh=(t,e)=>{const n=O(t.getBody()),o=De(n,`[${Ta()}="${e}"]`);return xt(o,r=>!Rh(r,n))},Bh=(t,e)=>{const n=O(t.getBody()),o=De(n,`[${yi()}="${e}"]`),r={};return W(o,s=>{if(!Rh(s,n)){const i=cn(s,Ta()),a=Jt(r,i).getOr([]);r[i]=a.concat([s])}}),r};let Lh=0;const cc=t=>{const e=(new Date).getTime(),n=Math.floor(1e9*Math.random());return Lh++,t+"_"+n+Lh+String(e)},Ph=(t,e)=>O(t.dom.cloneNode(e)),_i=t=>Ph(t,!1),Mh=t=>Ph(t,!0),Ih=(t,e,n=ee)=>{const o=new Ce(t,e),r=s=>{let i;do{i=o[s]()}while(i&&!X(i)&&!n(i));return w.from(i).filter(X)};return{current:()=>w.from(o.current()).filter(X),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},Ci=(t,e)=>{const n=e||(r=>t.isBlock(r)||ce(r)||Zt(r)),o=(r,s,i,a)=>{if(X(r)){const l=a(r,s,r.data);if(-1!==l)return w.some({container:r,offset:l})}return i().bind(l=>o(l.container,l.offset,i,a))};return{backwards:(r,s,i,a)=>{const l=Ih(r,a??t.getRoot(),n);return o(r,s,()=>l.prev().map(c=>({container:c,offset:c.length})),i).getOrNull()},forwards:(r,s,i,a)=>{const l=Ih(r,a??t.getRoot(),n);return o(r,s,()=>l.next().map(c=>({container:c,offset:0})),i).getOrNull()}}},Ra=Math.round,wi=t=>t?{left:Ra(t.left),top:Ra(t.top),bottom:Ra(t.bottom),right:Ra(t.right),width:Ra(t.width),height:Ra(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Fh=(t,e)=>(t=wi(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),jh=(t,e,n)=>t>=0&&t<=Math.min(e.height,n.height)/2,dc=(t,e)=>{const n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&jh(e.top-t.bottom,t,e)},uc=(t,e)=>t.top>e.bottom||!(t.bottom<e.top)&&jh(e.bottom-t.top,t,e),$h=(t,e,n)=>{const o=Math.max(Math.min(e,t.left+t.width),t.left),r=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((e-o)*(e-o)+(n-r)*(n-r))},Jd=t=>{const e=t.startContainer,n=t.startOffset;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},Ls=(t,e)=>{if(ct(t)&&t.hasChildNodes()){const n=t.childNodes;return n[(i=n.length-1,Math.min(Math.max(e,0),i))]}var i;return t},Fx=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),Uh=t=>ht(t)&&t.charCodeAt(0)>=768&&Fx.test(t),zh=ct,jx=fn,Hh=li("display","block table"),$x=li("float","left right"),mc=((...t)=>e=>{for(let n=0;n<t.length;n++)if(!t[n](e))return!1;return!0})(zh,jx,ds($x)),Ux=ds(li("white-space","pre pre-line pre-wrap")),fc=X,Zm=ce,qh=Qt.nodeIndex,Zd=(t,e)=>e<0&&ct(t)&&t.hasChildNodes()?void 0:Ls(t,e),tf=t=>t?t.createRange():Qt.DOM.createRng(),ef=t=>ht(t)&&/[\r\n\t ]/.test(t),Vh=t=>!!t.setStart&&!!t.setEnd,nf=t=>{const e=t.startContainer,n=t.startOffset;if(ef(t.toString())&&Ux(e.parentNode)&&X(e)){const o=e.data;if(ef(o[n-1])||ef(o[n+1]))return!0}return!1},Wh=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,Ps=t=>{var e;let n;const o=t.getClientRects();return n=wi(o.length>0?o[0]:t.getBoundingClientRect()),!Vh(t)&&Zm(t)&&Wh(n)?(r=>{const s=r.ownerDocument,i=tf(s),a=s.createTextNode(Ee),l=r.parentNode;l.insertBefore(a,r),i.setStart(a,0),i.setEnd(a,1);const c=wi(i.getBoundingClientRect());return l.removeChild(a),c})(t):Wh(n)&&Vh(t)&&null!==(e=(r=>{const i=r.endContainer,a=r.startOffset,l=r.endOffset;if(r.startContainer===i&&X(i)&&0===a&&1===l){const c=r.cloneRange();return c.setEndAfter(i),Ps(c)}return null})(t))&&void 0!==e?e:n},Ei=(t,e)=>{const n=Fh(t,e);return n.width=1,n.right=n.left+1,n},z=(t,e,n)=>{const o=()=>(n||(n=(r=>{const s=[],i=d=>{var u,f;0!==d.height&&(s.length>0&&(u=d).left===(f=s[s.length-1]).left&&u.top===f.top&&u.bottom===f.bottom&&u.right===f.right||s.push(d))},a=(d,u)=>{const f=tf(d.ownerDocument);if(u<d.data.length){if(Uh(d.data[u]))return;if(Uh(d.data[u-1])&&(f.setStart(d,u),f.setEnd(d,u+1),!nf(f)))return void i(Ei(Ps(f),!1))}u>0&&(f.setStart(d,u-1),f.setEnd(d,u),nf(f)||i(Ei(Ps(f),!1))),u<d.data.length&&(f.setStart(d,u),f.setEnd(d,u+1),nf(f)||i(Ei(Ps(f),!0)))},l=r.container(),c=r.offset();if(fc(l))return a(l,c),s;if(zh(l))if(r.isAtEnd()){const d=Zd(l,c);fc(d)&&a(d,d.data.length),mc(d)&&!Zm(d)&&i(Ei(Ps(d),!1))}else{const d=Zd(l,c);if(fc(d)&&a(d,0),mc(d)&&r.isAtEnd())return i(Ei(Ps(d),!1)),s;const u=Zd(r.container(),r.offset()-1);mc(u)&&!Zm(u)&&(Hh(u)||Hh(d)||!mc(d))&&i(Ei(Ps(u),!1)),mc(d)&&i(Ei(Ps(d),!0))}return s})(z(t,e))),n);return{container:st(t),offset:st(e),toRange:()=>{const r=tf(t.ownerDocument);return r.setStart(t,e),r.setEnd(t,e),r},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(fc(t),0===e),isAtEnd:()=>fc(t)?e>=t.data.length:e>=t.childNodes.length,isEqual:r=>r&&t===r.container()&&e===r.offset(),getNode:r=>Zd(t,r?e-1:e)}};z.fromRangeStart=t=>z(t.startContainer,t.startOffset),z.fromRangeEnd=t=>z(t.endContainer,t.endOffset),z.after=t=>z(t.parentNode,qh(t)+1),z.before=t=>z(t.parentNode,qh(t)),z.isAbove=(t,e)=>qe(Ae(e.getClientRects()),zn(t.getClientRects()),dc).getOr(!1),z.isBelow=(t,e)=>qe(zn(e.getClientRects()),Ae(t.getClientRects()),uc).getOr(!1),z.isAtStart=t=>!!t&&t.isAtStart(),z.isAtEnd=t=>!!t&&t.isAtEnd(),z.isTextPosition=t=>!!t&&X(t.container()),z.isElementPosition=t=>!z.isTextPosition(t);const tu=(t,e)=>{X(e)&&0===e.data.length&&t.remove(e)},of=(t,e,n)=>{var o,s;ya(n)?((o,r,s)=>{const i=w.from(s.firstChild),a=w.from(s.lastChild);r.insertNode(s),i.each(l=>tu(o,l.previousSibling)),a.each(l=>tu(o,l.nextSibling))})(t,e,n):(o=t,e.insertNode(s=n),tu(o,s.previousSibling),tu(o,s.nextSibling))},Xo=X,Kh=Xr,Yh=Qt.nodeIndex,Xh=t=>{const e=t.parentNode;return Kh(e)?Xh(e):e},rf=t=>t?Qi(t.childNodes,(e,n)=>(Kh(n)&&"BR"!==n.nodeName?e=e.concat(rf(n)):e.push(n),e),[]):[],Gh=t=>e=>t===e,Qh=t=>(Xo(t)?"text()":t.nodeName.toLowerCase())+"["+(e=>{let n,o;n=rf(Xh(e)),o=fd(n,Gh(e),e),n=n.slice(0,o+1);const r=Qi(n,(s,i,a)=>(Xo(i)&&Xo(n[a-1])&&s++,s),0);return n=Qs(n,Ie([e.nodeName])),o=fd(n,Gh(e),e),o-r})(t)+"]",Jh=(t,e)=>{let n,o=[],r=e.container(),s=e.offset();if(Xo(r))n=((a,l)=>{let c=a;for(;(c=c.previousSibling)&&Xo(c);)l+=c.data.length;return l})(r,s);else{const a=r.childNodes;s>=a.length?(n="after",s=a.length-1):n="before",r=a[s]}o.push(Qh(r));let i=((a,l,c)=>{const d=[];for(let u=l.parentNode;u&&u!==a;u=u.parentNode)d.push(u);return d})(t,r);return i=Qs(i,ds(Xr)),o=o.concat(fl(i,a=>Qh(a))),o.reverse().join("/")+","+n},Zh=(t,e)=>{if(!e)return null;const n=e.split(","),o=n[0].split("/"),r=n.length>1?n[1]:"before",s=Qi(o,(i,a)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(a);return l?("text()"===l[1]&&(l[1]="#text"),((c,d,u)=>{let f=rf(c);return f=Qs(f,(h,g)=>!Xo(h)||!Xo(f[g-1])),f=Qs(f,Ie([d])),f[u]})(i,l[1],parseInt(l[2],10))):null},t);if(!s)return null;if(!Xo(s)&&s.parentNode){let i;return i="after"===r?Yh(s)+1:Yh(s),z(s.parentNode,i)}return((i,a)=>{let l=i,c=0;for(;Xo(l);){const d=l.data.length;if(a>=c&&a<=c+d){i=l,a-=c;break}if(!Xo(l.nextSibling)){i=l,a=d;break}c+=d,l=l.nextSibling}return Xo(i)&&a>i.data.length&&(a=i.data.length),z(i,a)})(s,parseInt(r,10))},eu=Zt,tb=(t,e,n,o,r)=>{const s=r?o.startContainer:o.endContainer;let i=r?o.startOffset:o.endOffset;const a=[],l=t.getRoot();if(X(s))a.push(n?((c,d,u)=>{let f=c(d.data.slice(0,u)).length;for(let h=d.previousSibling;h&&X(h);h=h.previousSibling)f+=c(h.data).length;return f})(e,s,i):i);else{let c=0;const d=s.childNodes;i>=d.length&&d.length&&(c=1,i=Math.max(0,d.length-1)),a.push(t.nodeIndex(d[i],n)+c)}for(let c=s;c&&c!==l;c=c.parentNode)a.push(t.nodeIndex(c,n));return a},sf=(t,e,n)=>{let o=0;return Q.each(t.select(e),r=>"all"===r.getAttribute("data-mce-bogus")?void 0:r!==n&&void o++),o},eb=(t,e)=>{let n=e?t.startContainer:t.endContainer,o=e?t.startOffset:t.endOffset;if(ct(n)&&"TR"===n.nodeName){const r=n.childNodes;n=r[Math.min(e?o:o-1,r.length-1)],n&&(o=e?0:n.childNodes.length,e?t.setStart(n,o):t.setEnd(n,o))}},nb=t=>(eb(t,!0),eb(t,!1),t),ob=(t,e)=>{if(ct(t)&&(t=Ls(t,e),eu(t)))return t;if(mn(t)){X(t)&&yr(t)&&(t=t.parentNode);let n=t.previousSibling;if(eu(n)||(n=t.nextSibling,eu(n)))return n}},rb=(t,e,n)=>{const o=n.getNode(),r=n.getRng();if("IMG"===o.nodeName||eu(o)){const i=o.nodeName;return{name:i,index:sf(n.dom,i,o)}}const s=ob((i=r).startContainer,i.startOffset)||ob(i.endContainer,i.endOffset);var i;if(s){const i=s.tagName;return{name:i,index:sf(n.dom,i,s)}}return((i,a,l,c)=>{const d=a.dom,u=tb(d,i,l,c,!0),f=a.isForward(),h=Ud(c)?{isFakeCaret:!0}:{};return a.isCollapsed()?{start:u,forward:f,...h}:{start:u,end:tb(d,i,l,c,!1),forward:f,...h}})(t,n,e,r)},sb=(t,e,n)=>{const o={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",o,"&#xFEFF;"):t.create("span",o)},ib=(t,e)=>{const n=t.dom;let o=t.getRng();const r=n.uniqueId(),s=t.isCollapsed(),i=t.getNode(),a=i.nodeName,l=t.isForward();if("IMG"===a)return{name:a,index:sf(n,a,i)};const c=nb(o.cloneRange());if(!s){c.collapse(!1);const u=sb(n,r+"_end",e);of(n,c,u)}o=nb(o),o.collapse(!0);const d=sb(n,r+"_start",e);return of(n,o,d),t.moveToBookmark({id:r,keep:!0,forward:l}),{id:r,forward:l}},af=ft(rb,Ke,!0),ab=t=>{const e=s=>s(t),n=st(t),o=()=>r,r={tag:!0,inner:t,fold:(s,i)=>i(t),isValue:me,isError:ee,map:s=>kn.value(s(t)),mapError:o,bind:e,exists:e,forall:e,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:s=>{s(t)},toOptional:()=>w.some(t)};return r},lb=t=>{const e=()=>n,n={tag:!1,inner:t,fold:(o,r)=>o(t),isValue:ee,isError:me,map:e,mapError:o=>kn.error(o(t)),bind:e,exists:ee,forall:me,getOr:Ke,or:Ke,getOrThunk:Ki,orThunk:Ki,getOrDie:id(String(t)),each:Tt,toOptional:w.none};return n},kn={value:ab,error:lb,fromOption:(t,e)=>t.fold(()=>lb(e),ab)},_r=t=>{if(!Kt(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");const e=[],n={};return W(t,(o,r)=>{const s=Xe(o);if(1!==s.length)throw new Error("one and only one name per case");const i=s[0],a=o[i];if(void 0!==n[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!Kt(a))throw new Error("case arguments must be an array");e.push(i),n[i]=(...l)=>{const c=l.length;if(c!==a.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+a.length+" ("+a+"), got "+c);return{fold:(...d)=>{if(d.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+d.length);return d[r].apply(null,l)},match:d=>{const u=Xe(d);if(e.length!==u.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+u.join(","));if(!sr(e,f=>gt(u,f)))throw new Error("Not all branches were specified when using match. Specified: "+u.join(", ")+"\nRequired: "+e.join(", "));return d[i].apply(null,l)},log:d=>{console.log(d,{constructors:e,constructor:i,params:l})}}}}),n};_r([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const zx=t=>"inline-command"===t.type||"inline-format"===t.type,Hx=t=>"block-command"===t.type||"block-format"===t.type,qx=t=>{const e=o=>kn.error({message:o,pattern:t}),n=(o,r,s)=>{if(void 0!==t.format){let i;if(Kt(t.format)){if(!sr(t.format,ht))return e(o+" pattern has non-string items in the `format` array");i=t.format}else{if(!ht(t.format))return e(o+" pattern has non-string `format` parameter");i=[t.format]}return kn.value(r(i))}return void 0!==t.cmd?ht(t.cmd)?kn.value(s(t.cmd,t.value)):e(o+" pattern has non-string `cmd` parameter"):e(o+" pattern is missing both `format` and `cmd` parameters")};if(!Pe(t))return e("Raw pattern is not an object");if(!ht(t.start))return e("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!ht(t.end))return e("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return e("Inline pattern has empty `start` and `end` parameters");let o=t.start,r=t.end;return 0===r.length&&(r=o,o=""),n("Inline",s=>({type:"inline-format",start:o,end:r,format:s}),(s,i)=>({type:"inline-command",start:o,end:r,cmd:s,value:i}))}return void 0!==t.replacement?ht(t.replacement)?0===t.start.length?e("Replacement pattern has empty `start` parameter"):kn.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):e("Replacement pattern has non-string `replacement` parameter"):0===t.start.length?e("Block pattern has empty `start` parameter"):n("Block",o=>({type:"block-format",start:t.start,format:o[0]}),(o,r)=>({type:"block-command",start:t.start,cmd:o,value:r}))},cb=t=>xt(t,Hx),db=t=>xt(t,zx),ub=t=>{const e=(n=>{const o=[],r=[];return W(n,s=>{s.fold(i=>{o.push(i)},i=>{r.push(i)})}),{errors:o,values:r}})(Mt(t,qx));return W(e.errors,n=>console.error(n.message,n.pattern)),e.values},lf=Hn().deviceType,Vx=lf.isTouch(),Wx=Qt.DOM,mb=t=>or(t,RegExp),ut=t=>e=>e.options.get(t),cf=t=>ht(t)||Pe(t),fb=(t,e="")=>n=>{const o=ht(n);if(o){if(-1!==n.indexOf("=")){const r=(s=>{const i=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return Me(i,(a,l)=>{const c=l.split("="),d=c[0],u=c.length>1?c[1]:d;return a[Oe(d)]=Oe(u),a},{})})(n);return{value:Jt(r,t.id).getOr(e),valid:o}}return{value:n,valid:o}}return{valid:!1,message:"Must be a string."}},Kx=ut("iframe_attrs"),Yx=ut("doctype"),gb=ut("document_base_url"),Xx=ut("body_id"),Gx=ut("body_class"),pb=ut("content_security_policy"),Qx=ut("br_in_pre"),en=ut("forced_root_block"),gc=ut("forced_root_block_attrs"),Jx=ut("newline_behavior"),Zx=ut("br_newline_selector"),tk=ut("no_newline_selector"),ek=ut("keep_styles"),nk=ut("end_container_on_empty_block"),hb=ut("automatic_uploads"),bb=ut("images_reuse_filename"),ok=ut("images_replace_blob_uris"),vb=ut("icons"),rk=ut("icons_url"),sk=ut("images_upload_url"),ik=ut("images_upload_base_path"),ak=ut("images_upload_credentials"),lk=ut("images_upload_handler"),ck=ut("content_css_cors"),df=ut("referrer_policy"),yb=ut("language"),dk=ut("language_url"),_b=ut("indent_use_margin"),uk=ut("indentation"),mk=ut("content_css"),fk=ut("content_style"),Cb=ut("font_css"),gk=ut("directionality"),pk=ut("inline_boundaries_selector"),wb=ut("object_resizing"),hk=ut("resize_img_proportional"),bk=ut("placeholder"),Eb=ut("event_root"),vk=ut("service_message"),Da=ut("theme"),yk=ut("theme_url"),uf=ut("model"),_k=ut("model_url"),pc=ut("inline_boundaries"),Ck=ut("formats"),wk=ut("preview_styles"),Ek=ut("format_empty_lines"),xk=ut("format_noneditable_selector"),kk=ut("custom_ui_selector"),mf=ut("inline"),Sk=ut("hidden_input"),Nk=ut("submit_patch"),Ak=ut("add_form_submit_trigger"),Ok=ut("add_unload_trigger"),Tk=ut("custom_undo_redo_levels"),Rk=ut("disable_nodechange"),xb=ut("readonly"),Dk=ut("editable_root"),kb=ut("content_css_cors"),nu=ut("plugins"),Bk=ut("external_plugins"),Lk=ut("block_unsupported_drop"),Pk=ut("visual"),Mk=ut("visual_table_class"),Sb=ut("visual_anchor_class"),Ik=ut("iframe_aria_text"),Fk=ut("setup"),jk=ut("init_instance_callback"),$k=ut("urlconverter_callback"),Uk=ut("auto_focus"),zk=ut("browser_spellcheck"),Hk=ut("protect"),qk=ut("paste_block_drop"),ou=ut("paste_data_images"),Vk=ut("paste_preprocess"),Wk=ut("paste_postprocess"),Kk=ut("newdocument_content"),Yk=ut("paste_webkit_styles"),Xk=ut("paste_remove_styles_if_webkit"),Gk=ut("paste_merge_formats"),Qk=ut("smart_paste"),Jk=ut("paste_as_text"),Zk=ut("paste_tab_spaces"),tS=ut("allow_html_data_urls"),eS=ut("text_patterns"),nS=ut("text_patterns_lookup"),Nb=ut("noneditable_class"),oS=ut("editable_class"),rS=ut("noneditable_regexp"),sS=ut("preserve_cdata"),iS=ut("highlight_on_focus"),ff=ut("xss_sanitization"),aS=ut("init_content_sync"),Ab=t=>Q.explode(t.options.get("images_file_types")),lS=ut("table_tab_navigation"),cS=ut("details_initial_state"),dS=ut("details_serialized_state"),uS=ct,Ob=X,Tb=t=>{const e=t.parentNode;e&&e.removeChild(t)},Rb=t=>{const e=un(t);return{count:t.length-e.length,text:e}},Db=t=>{let e;for(;-1!==(e=t.data.lastIndexOf(xe));)t.deleteData(e,1)},Bb=(t,e)=>(xi(t),e),xi=t=>{uS(t)&&mn(t)&&(Kl(t)?t.removeAttribute("data-mce-caret"):Tb(t)),Ob(t)&&(Db(t),0===t.data.length&&Tb(t))},fS=Zt,gS=Ze,pS=_a,Lb=(t,e,n)=>{const o=Fh(e.getBoundingClientRect(),n);let r,s;if("BODY"===t.tagName){const a=t.ownerDocument.documentElement;r=t.scrollLeft||a.scrollLeft,s=t.scrollTop||a.scrollTop}else{const a=t.getBoundingClientRect();r=t.scrollLeft-a.left,s=t.scrollTop-a.top}o.left+=r,o.right+=r,o.top+=s,o.bottom+=s,o.width=1;let i=e.offsetWidth-e.clientWidth;return i>0&&(n&&(i*=-1),o.left+=i,o.right+=i),o},Pb=()=>Rt.browser.isFirefox(),hc=t=>fS(t)||gS(t),bc=t=>(hc(t)||qo(t)&&Pb())&&ri(O(t)).exists(Hr),bS=Bn,gf=Zt,vS=Ze,Mb=li("display","block table table-cell table-caption list-item"),Ib=mn,Fb=yr,yS=ct,_S=X,CS=fn,Ba=t=>t>0,ki=t=>t<0,ru=(t,e)=>{let n;for(;n=t(e);)if(!Fb(n))return n;return null},vc=(t,e,n,o,r)=>{const s=new Ce(t,o),i=gf(t)||Fb(t);let a;if(ki(e)){if(i&&(a=ru(s.prev.bind(s),!0),n(a)))return a;for(;a=ru(s.prev.bind(s),r);)if(n(a))return a}if(Ba(e)){if(i&&(a=ru(s.next.bind(s),!0),n(a)))return a;for(;a=ru(s.next.bind(s),r);)if(n(a))return a}return null},Ms=(t,e)=>{for(;t&&t!==e;){if(Mb(t))return t;t=t.parentNode}return null},Cr=(t,e,n)=>Ms(t.container(),n)===Ms(e.container(),n),pf=(t,e)=>{if(!e)return w.none();const n=e.container(),o=e.offset();return yS(n)?w.from(n.childNodes[o+t]):w.none()},jb=(t,e)=>{var n;const o=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createRange();return t?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)),o},wS=(t,e,n)=>Ms(e,t)===Ms(n,t),$b=(t,e,n)=>{const o=t?"previousSibling":"nextSibling";let r=n;for(;r&&r!==e;){let s=r[o];if(s&&Ib(s)&&(s=s[o]),gf(s)||vS(s)){if(wS(e,s,r))return s;break}if(CS(s))break;r=r.parentNode}return null},yc=ft(jb,!0),_c=ft(jb,!1),hf=(t,e,n)=>{let o;const r=ft($b,!0,e),s=ft($b,!1,e),i=n.startContainer,a=n.startOffset;if(yr(i)){const l=_S(i)?i.parentNode:i,c=l.getAttribute("data-mce-caret");if("before"===c&&(o=l.nextSibling,bc(o)))return yc(o);if("after"===c&&(o=l.previousSibling,bc(o)))return _c(o)}if(!n.collapsed)return n;if(X(i)){if(Ib(i)){if(1===t){if(o=s(i),o)return yc(o);if(o=r(i),o)return _c(o)}if(-1===t){if(o=r(i),o)return _c(o);if(o=s(i),o)return yc(o)}return n}if(so(i)&&a>=i.data.length-1)return 1===t&&(o=s(i),o)?yc(o):n;if(Po(i)&&a<=1)return-1===t&&(o=r(i),o)?_c(o):n;if(a===i.data.length)return o=s(i),o?yc(o):n;if(0===a)return o=r(i),o?_c(o):n}return n},Ub=(t,e)=>pf(t?0:-1,e).filter(gf),Cc=(t,e,n)=>{const o=hf(t,e,n);return-1===t?z.fromRangeStart(o):z.fromRangeEnd(o)},su=t=>w.from(t.getNode()).map(O),bf=(t,e)=>{let n=e;for(;n=t(n);)if(n.isVisible())return n;return n},iu=(t,e)=>{const n=Cr(t,e);return!(n||!ce(t.getNode()))||n};var $e,t;(t=$e||($e={}))[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards";const ES=Zt,wr=X,zb=ct,vf=ce,La=fn,Hb=t=>{return Hd(t)||!!Gl(e=t)&&!Me(Ye(e.getElementsByTagName("*")),(n,o)=>n||zd(o),!1);var e},au=Vd,qb=(t,e)=>t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null,Vb=(t,e)=>{if(Ba(t)){if(La(e.previousSibling)&&!wr(e.previousSibling))return z.before(e);if(wr(e))return z(e,0)}if(ki(t)){if(La(e.nextSibling)&&!wr(e.nextSibling))return z.after(e);if(wr(e))return z(e,e.data.length)}return ki(t)?vf(e)?z.before(e):z.after(e):z.before(e)},yf=(t,e,n)=>{let o,r,s,i;if(!zb(n)||!e)return null;if(e.isEqual(z.after(n))&&n.lastChild){if(i=z.after(n.lastChild),ki(t)&&La(n.lastChild)&&zb(n.lastChild))return vf(n.lastChild)?z.before(n.lastChild):i}else i=e;const a=i.container();let l=i.offset();if(wr(a)){if(ki(t)&&l>0)return z(a,--l);if(Ba(t)&&l<a.length)return z(a,++l);o=a}else{if(ki(t)&&l>0&&(r=qb(a,l-1),La(r)))return!Hb(r)&&(s=vc(r,t,au,r),s)?wr(s)?z(s,s.data.length):z.after(s):wr(r)?z(r,r.data.length):z.before(r);if(Ba(t)&&l<a.childNodes.length&&(r=qb(a,l),La(r)))return vf(r)?((d,u)=>{const f=u.nextSibling;return f&&La(f)?wr(f)?z(f,0):z.before(f):yf($e.Forwards,z.after(u),d)})(n,r):!Hb(r)&&(s=vc(r,t,au,r),s)?wr(s)?z(s,0):z.before(s):wr(r)?z(r,0):z.after(r);o=r||i.getNode()}if(o&&(Ba(t)&&i.isAtEnd()||ki(t)&&i.isAtStart())&&(o=vc(o,t,me,n,!0),au(o,n)))return Vb(t,o);r=o&&vc(o,t,au,n);const c=Mr(xt(((d,u)=>{const f=[];let h=d;for(;h&&h!==u;)f.push(h),h=h.parentNode;return f})(a,n),ES));return!c||r&&c.contains(r)?r?Vb(t,r):null:(i=Ba(t)?z.after(c):z.before(c),i)},Er=t=>({next:e=>yf($e.Forwards,e,t),prev:e=>yf($e.Backwards,e,t)}),Wb=t=>z.isTextPosition(t)?0===t.offset():fn(t.getNode()),Kb=t=>{if(z.isTextPosition(t)){const e=t.container();return t.offset()===e.data.length}return fn(t.getNode(!0))},Yb=(t,e)=>!z.isTextPosition(t)&&!z.isTextPosition(e)&&t.getNode()===e.getNode(!0),ao=(t,e,n)=>{const o=Er(e);return w.from(t?o.next(n):o.prev(n))},Pa=(t,e,n)=>ao(t,e,n).bind(o=>{return Cr(n,o,e)&&(s=n,i=o,t?!Yb(s,i)&&(z.isTextPosition(a=s)||!ce(a.getNode()))&&Kb(s)&&Wb(i):!Yb(i,s)&&Wb(s)&&Kb(i))?ao(t,e,o):w.some(o);var s,i,a}),Xb=(t,e,n,o)=>Pa(t,e,n).bind(r=>o(r)?Xb(t,e,r,o):w.some(r)),Ma=(t,e)=>{const n=t?e.firstChild:e.lastChild;return X(n)?w.some(z(n,t?0:n.data.length)):n?fn(n)?w.some(t?z.before(n):ce(o=n)?z.before(o):z.after(o)):((r,s,i)=>{const a=r?z.before(i):z.after(i);return ao(r,s,a)})(t,e,n):w.none();var o},Sn=ft(ao,!0),In=ft(ao,!1),nn=ft(Ma,!0),Fo=ft(Ma,!1),_f="_mce_caret",jo=t=>ct(t)&&t.id===_f,Si=(t,e)=>{let n=e;for(;n&&n!==t;){if(jo(n))return n;n=n.parentNode}return null},Gb=t=>Ot(t,"name"),Qb=t=>Q.isArray(t.start),lu=t=>!(!Gb(t)&&rr(t.forward))||t.forward,Jb=(t,e)=>(ct(e)&&t.isBlock(e)&&!e.innerHTML&&(e.innerHTML='<br data-mce-bogus="1" />'),e),xS=(t,e)=>Fo(t).fold(ee,n=>(e.setStart(n.container(),n.offset()),e.setEnd(n.container(),n.offset()),!0)),Zb=(t,e,n)=>!(e.hasChildNodes()||!Si(t,e)||(((o,r)=>{var s;const i=(null!==(s=o.ownerDocument)&&void 0!==s?s:document).createTextNode(xe);o.appendChild(i),r.setStart(i,0),r.setEnd(i,0)})(e,n),0)),tv=(t,e,n,o)=>{const r=n[e?"start":"end"],s=t.getRoot();if(r){let i=s,a=r[0];for(let l=r.length-1;i&&l>=1;l--){const c=i.childNodes;if(Zb(s,i,o))return!0;if(r[l]>c.length-1)return!!Zb(s,i,o)||xS(i,o);i=c[r[l]]}X(i)&&(a=Math.min(r[0],i.data.length)),ct(i)&&(a=Math.min(r[0],i.childNodes.length)),e?o.setStart(i,a):o.setEnd(i,a)}return!0},Cf=t=>X(t)&&t.data.length>0,ev=(t,e,n)=>{const o=t.get(n.id+"_"+e),r=o?.parentNode,s=n.keep;if(o&&r){let i,a;if("start"===e?s?o.hasChildNodes()?(i=o.firstChild,a=1):Cf(o.nextSibling)?(i=o.nextSibling,a=0):Cf(o.previousSibling)?(i=o.previousSibling,a=o.previousSibling.data.length):(i=r,a=t.nodeIndex(o)+1):(i=r,a=t.nodeIndex(o)):s?o.hasChildNodes()?(i=o.firstChild,a=1):Cf(o.previousSibling)?(i=o.previousSibling,a=o.previousSibling.data.length):(i=r,a=t.nodeIndex(o)):(i=r,a=t.nodeIndex(o)),!s){const l=o.previousSibling,c=o.nextSibling;let d;for(Q.each(Q.grep(o.childNodes),u=>{X(u)&&(u.data=u.data.replace(/\uFEFF/g,""))});d=t.get(n.id+"_"+e);)t.remove(d,!0);if(X(c)&&X(l)&&!Rt.browser.isOpera()){const u=l.data.length;l.appendData(c.data),t.remove(c),i=l,a=u}}return w.some(z(i,a))}return w.none()},kS=(t,e,n)=>((o,r,s=!1)=>{return 2===r?rb(un,s,o):3===r?(i=>{const a=i.getRng();return{start:Jh(i.dom.getRoot(),z.fromRangeStart(a)),end:Jh(i.dom.getRoot(),z.fromRangeEnd(a)),forward:i.isForward()}})(o):r?{rng:(i=o).getRng(),forward:i.isForward()}:ib(o,!1);var i})(t,e,n),SS=(t,e)=>{((n,o)=>{const r=n.dom;if(o){if(Qb(o))return((s,i)=>{const a=s.createRng();return tv(s,!0,i,a)&&tv(s,!1,i,a)?w.some({range:a,forward:lu(i)}):w.none()})(r,o);if(ht(o.start))return((s,i)=>{const a=w.from(Zh(s.getRoot(),i.start)),l=w.from(Zh(s.getRoot(),i.end));return qe(a,l,(c,d)=>{const u=s.createRng();return u.setStart(c.container(),c.offset()),u.setEnd(d.container(),d.offset()),{range:u,forward:lu(i)}})})(r,o);if(Ot(o,"id"))return((s,i)=>{const a=ev(s,"start",i),l=ev(s,"end",i);return qe(a,l.or(a),(c,d)=>{const u=s.createRng();return u.setStart(Jb(s,c.container()),c.offset()),u.setEnd(Jb(s,d.container()),d.offset()),{range:u,forward:lu(i)}})})(r,o);if(Gb(o))return((s,i)=>w.from(s.select(i.name)[i.index]).map(a=>{const l=s.createRng();return l.selectNode(a),{range:l,forward:!0}}))(r,o);if((s=>Ot(s,"rng"))(o))return w.some({range:o.rng,forward:lu(o)})}return w.none()})(t,e).each(({range:n,forward:o})=>{t.setRng(n,o)})},lo=t=>ct(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),cu=t=>"\xa0"===t,Ia=t=>""!==t&&-1!==" \f\n\r\t\v".indexOf(t),wf=t=>!Ia(t)&&!cu(t)&&!wa(t),Ef=t=>{const e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},NS=t=>{return{value:(n=Ef(t.red)+Ef(t.green)+Ef(t.blue),pd(n,"#").toUpperCase())};var n},AS=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,OS=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,ov=(t,e,n,o)=>({red:t,green:e,blue:n,alpha:o}),rv=(t,e,n,o)=>{const r=parseInt(t,10),s=parseInt(e,10),i=parseInt(n,10),a=parseFloat(o);return ov(r,s,i,a)},du=t=>(e=>{if("transparent"===e)return w.some(ov(0,0,0,0));const n=AS.exec(e);if(null!==n)return w.some(rv(n[1],n[2],n[3],"1"));const o=OS.exec(e);return null!==o?w.some(rv(o[1],o[2],o[3],o[4])):w.none()})(t).map(NS).map(e=>"#"+e.value).getOr(t),xf=t=>{const e=[];if(t)for(let n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},sv=(t,e)=>{const n=De(e,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:xt(Un(t,s=>{const i=Jd(s);return i?[O(i)]:[]}),di)},Fa=t=>sv(xf(t.selection.getSel()),O(t.getBody())),wc=(t,e)=>si(t,"table",e),iv=t=>Ll(t).fold(st([t]),e=>[t].concat(iv(e))),kf=t=>Pl(t).fold(st([t]),e=>"br"===Wt(e)?zr(e).map(n=>[t].concat(kf(n))).getOr([]):[t].concat(kf(e))),Sf=(t,e)=>qe((n=>{const o=n.startContainer,r=n.startOffset;return X(o)?0===r?w.some(O(o)):w.none():w.from(o.childNodes[r]).map(O)})(e),(n=>{const o=n.endContainer,r=n.endOffset;return X(o)?r===o.data.length?w.some(O(o)):w.none():w.from(o.childNodes[r-1]).map(O)})(e),(n,o)=>{const r=ye(iv(t),ft(zt,n)),s=ye(kf(t),ft(zt,o));return r.isSome()&&s.isSome()}).getOr(!1),Nf=(t,e,n,o)=>{const r=n,s=new Ce(n,r),i=ms(t.schema.getMoveCaretBeforeOnEnterElements(),(l,c)=>!gt(["td","th","table"],c.toLowerCase()));let a=n;do{if(X(a)&&0!==Q.trim(a.data).length)return void(o?e.setStart(a,0):e.setEnd(a,a.data.length));if(i[a.nodeName])return void(o?e.setStartBefore(a):"BR"===a.nodeName?e.setEndBefore(a):e.setEndAfter(a))}while(a=o?s.next():s.prev());"BODY"===r.nodeName&&(o?e.setStart(r,0):e.setEnd(r,r.childNodes.length))},uu=t=>{const e=t.selection.getSel();return ot(e)&&e.rangeCount>0},Af=(t,e)=>{const n=Fa(t);n.length>0?W(n,o=>{const r=o.dom,s=t.dom.createRng();s.setStartBefore(r),s.setEndAfter(r),e(s,!0)}):e(t.selection.getRng(),!1)},av=(t,e,n)=>{const o=ib(t,e);n(o),t.moveToBookmark(o)},Ec=t=>Tn(t?.nodeType),Of=t=>ct(t)&&!lo(t)&&!jo(t)&&!Xr(t),Ni=t=>!0===t.isContentEditable,lv=(t,e,n)=>{const{selection:o,dom:r}=t,s=o.getNode(),i=Zt(s);av(o,!0,()=>{e()}),i&&Zt(s)&&r.isChildOf(s,t.getBody())?t.selection.select(s):n(o.getStart())&&TS(r,o)},TS=(t,e)=>{var n,o;const r=e.getRng(),{startContainer:s,startOffset:i}=r;if(!((a,l)=>{if(Of(l)&&!/^(TD|TH)$/.test(l.nodeName)){const c=a.getAttrib(l,"data-mce-selected"),d=parseInt(c,10);return!isNaN(d)&&d>0}return!1})(t,e.getNode())&&ct(s)){const a=s.childNodes,l=t.getRoot();let c;if(i<a.length){const d=a[i];c=new Ce(d,null!==(n=t.getParent(d,t.isBlock))&&void 0!==n?n:l)}else{const d=a[a.length-1];c=new Ce(d,null!==(o=t.getParent(d,t.isBlock))&&void 0!==o?o:l),c.next(!0)}for(let d=c.current();d;d=c.next()){if("false"===t.getContentEditable(d))return;if(X(d)&&!Rf(d))return r.setStart(d,0),void e.setRng(r)}}},cv=(t,e,n)=>{if(t){const o=e?"nextSibling":"previousSibling";for(t=n?t:t[o];t;t=t[o])if(ct(t)||!Rf(t))return t}},Tf=(t,e)=>!!t.getTextBlockElements()[e.nodeName.toLowerCase()]||Ht(t,e),ja=(t,e,n)=>t.schema.isValidChild(e,n),Rf=(t,e=!1)=>{if(ot(t)&&X(t)){const n=e?t.data.replace(/ /g,"\xa0"):t.data;return E(n)}return!1},dv=(t,e)=>{const n=t.dom;return Of(e)&&"false"===n.getContentEditable(e)&&((o,r)=>{const s="[data-mce-cef-wrappable]",i=xk(o),a=Co(i)?s:`${s},${i}`;return Ge(O(r),a)})(t,e)&&0===n.select('[contenteditable="true"]',e).length},Is=(t,e)=>Ut(t)?t(e):(ot(e)&&(t=t.replace(/%(\w+)/g,(n,o)=>e[o]||n)),t),Df=(t,e)=>(t=""+((t=t||"").nodeName||t),e=""+((e=e||"").nodeName||e),t.toLowerCase()===e.toLowerCase()),Bf=(t,e)=>{if(he(t))return null;{let n=String(t);return"color"!==e&&"backgroundColor"!==e||(n=du(n)),"fontWeight"===e&&700===t&&(n="bold"),"fontFamily"===e&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},mu=(t,e,n)=>{const o=t.getStyle(e,n);return Bf(o,n)},uv=(t,e)=>{let n;return t.getParent(e,o=>!!ct(o)&&(n=t.getStyle(o,"text-decoration"),!!n&&"none"!==n)),n},fu=(t,e,n)=>t.getParents(e,n,t.getRoot()),Lf=(t,e,n)=>{const o=t.formatter.get(e);return ot(o)&&le(o,n)},xr=t=>gs(t,"block"),co=t=>gs(t,"selector"),Be=t=>gs(t,"inline"),Pf=t=>co(t)&&!1!==t.expand&&!Be(t),$a=lo,mv=fu,fv=Rf,RS=Tf,gv=(t,e)=>{let n=e;for(;n;){if(ct(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},pv=(t,e,n,o)=>{const r=e.data;if(t){for(let s=n;s>0;s--)if(o(r.charAt(s-1)))return s}else for(let s=n;s<r.length;s++)if(o(r.charAt(s)))return s;return-1},DS=(t,e,n)=>pv(t,e,n,o=>cu(o)||Ia(o)),BS=(t,e,n)=>pv(t,e,n,wf),hv=(t,e,n,o,r,s)=>{let i;const a=t.getParent(n,t.isBlock)||e,l=(c,d,u)=>{const f=Ci(t);return w.from((r?f.backwards:f.forwards)(c,d,(g,b)=>$a(g.parentNode)?-1:(i=g,u(r,g,b)),a))};return l(n,o,DS).bind(c=>s?l(c.container,c.offset+(r?-1:0),BS):w.some(c)).orThunk(()=>i?w.some({container:i,offset:r?0:i.length}):w.none())},bv=(t,e,n,o,r)=>{const s=o[r];X(o)&&Co(o.data)&&s&&(o=s);const i=mv(t,o);for(let a=0;a<i.length;a++)for(let l=0;l<e.length;l++){const c=e[l];if((!ot(c.collapsed)||c.collapsed===n.collapsed)&&co(c)&&t.is(i[a],c.selector))return i[a]}return o},vv=(t,e,n,o)=>{var r;let s=n;const i=t.getRoot(),a=e[0];if(xr(a)&&(s=a.wrapper?null:t.getParent(n,a.block,i)),!s){const l=null!==(r=t.getParent(n,"LI,TD,TH"))&&void 0!==r?r:i;s=t.getParent(X(n)?n.parentNode:n,c=>c!==i&&RS(t.schema,c),l)}if(s&&xr(a)&&a.wrapper&&(s=mv(t,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s&&s[o]&&!t.isBlock(s[o])&&(s=s[o],!Df(s,"br")););return s||n},yv=(t,e,n,o)=>{const r=n.parentNode;return!ot(n[o])&&(!(r!==e&&!he(r)&&!t.isBlock(r))||yv(t,e,r,o))},gu=(t,e,n,o,r)=>{let s=n;const i=r?"previousSibling":"nextSibling",a=t.getRoot();if(X(n)&&!fv(n)&&(r?o>0:o<n.data.length))return n;for(;s;){if(!e[0].block_expand&&t.isBlock(s))return s;for(let c=s[i];c;c=c[i]){const d=X(c)&&!yv(t,a,c,i);if(!$a(c)&&(!ce(l=c)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!fv(c,d))return s}if(s===a||s.parentNode===a){n=s;break}s=s.parentNode}var l;return n},_v=t=>$a(t.parentNode)||$a(t),Ai=(t,e,n,o=!1)=>{let{startContainer:r,startOffset:s,endContainer:i,endOffset:a}=e;const l=n[0];return ct(r)&&r.hasChildNodes()&&(r=Ls(r,s),X(r)&&(s=0)),ct(i)&&i.hasChildNodes()&&(i=Ls(i,e.collapsed?a:a-1),X(i)&&(a=i.data.length)),r=gv(t,r),i=gv(t,i),_v(r)&&(r=$a(r)?r:r.parentNode,r=e.collapsed?r.previousSibling||r:r.nextSibling||r,X(r)&&(s=e.collapsed?r.length:0)),_v(i)&&(i=$a(i)?i:i.parentNode,i=e.collapsed?i.nextSibling||i:i.previousSibling||i,X(i)&&(a=e.collapsed?0:i.length)),e.collapsed&&(hv(t,t.getRoot(),r,s,!0,o).each(({container:c,offset:d})=>{r=c,s=d}),hv(t,t.getRoot(),i,a,!1,o).each(({container:c,offset:d})=>{i=c,a=d})),(Be(l)||l.block_expand)&&(Be(l)&&X(r)&&0!==s||(r=gu(t,n,r,s,!0)),Be(l)&&X(i)&&a!==i.data.length||(i=gu(t,n,i,a,!1))),Pf(l)&&(r=bv(t,n,e,r,"previousSibling"),i=bv(t,n,e,i,"nextSibling")),(xr(l)||co(l))&&(r=vv(t,n,r,"previousSibling"),i=vv(t,n,i,"nextSibling"),xr(l)&&(t.isBlock(r)||(r=gu(t,n,r,s,!0)),t.isBlock(i)||(i=gu(t,n,i,a,!1)))),ct(r)&&r.parentNode&&(s=t.nodeIndex(r),r=r.parentNode),ct(i)&&i.parentNode&&(a=t.nodeIndex(i)+1,i=i.parentNode),{startContainer:r,startOffset:s,endContainer:i,endOffset:a}},xc=(t,e,n)=>{var o;const r=e.startOffset,s=Ls(e.startContainer,r),i=e.endOffset,a=Ls(e.endContainer,i-1),l=p=>{const v=p[0];X(v)&&v===s&&r>=v.data.length&&p.splice(0,1);const _=p[p.length-1];return 0===i&&p.length>0&&_===a&&X(_)&&p.splice(p.length-1,1),p},c=(p,v,_)=>{const C=[];for(;p&&p!==_;p=p[v])C.push(p);return C},d=(p,v)=>t.getParent(p,_=>_.parentNode===v,v),u=(p,v,_)=>{const C=_?"nextSibling":"previousSibling";for(let k=p,x=k.parentNode;k&&k!==v;k=x){x=k.parentNode;const N=c(k===p?k:k[C],C);N.length&&(_||N.reverse(),n(l(N)))}};if(s===a)return n(l([s]));const f=null!==(o=t.findCommonAncestor(s,a))&&void 0!==o?o:t.getRoot();if(t.isChildOf(s,a))return u(s,f,!0);if(t.isChildOf(a,s))return u(a,f);const h=d(s,f)||s,g=d(a,f)||a;u(s,h,!0);const b=c(h===s?h:h.nextSibling,"nextSibling",g===a?g.nextSibling:g);b.length&&n(l(b)),u(a,g)},LS=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Cv=(t,e,n,o,r,s)=>{const{uid:i=e,...a}=n;Ur(t,sc()),fe(t,`${Ta()}`,i),fe(t,`${yi()}`,o);const{attributes:l={},classes:c=[]}=r(i,a);if(xo(t,l),d=t,W(c,f=>{Ur(d,f)}),s){c.length>0&&fe(t,`${ac()}`,c.join(","));const d=Xe(l);d.length>0&&fe(t,`${lc()}`,d.join(","))}var d},wv=(t,e,n,o,r)=>{const s=Re("span",t);return Cv(s,e,n,o,r,!1),s},Ev=t=>{const e=(()=>{const s={};return{register:(i,a)=>{s[i]={name:i,settings:a}},lookup:i=>Jt(s,i).map(a=>a.settings),getNames:()=>Xe(s)}})();((s,i)=>{const a=yi(),l=d=>w.from(d.attr(a)).bind(i.lookup),c=d=>{var u,f;d.attr(Ta(),null),d.attr(yi(),null),d.attr(ic(),null);const h=w.from(d.attr(lc())).map(v=>v.split(",")).getOr([]),g=w.from(d.attr(ac())).map(v=>v.split(",")).getOr([]);W(h,v=>d.attr(v,null));const b=null!==(f=null===(u=d.attr("class"))||void 0===u?void 0:u.split(" "))&&void 0!==f?f:[],p=Pr(b,[sc()].concat(g));d.attr("class",p.length>0?p.join(" "):null),d.attr(ac(),null),d.attr(lc(),null)};s.serializer.addTempAttr(ic()),s.serializer.addAttributeFilter(a,d=>{for(const u of d)l(u).each(f=>{!1===f.persistent&&("span"===u.name?u.unwrap():c(u))})})})(t,e);const n=((s,i)=>{const a=je({}),l=()=>({listeners:[],previous:Bs()}),c=(h,g)=>{d(h,b=>(g(b),b))},d=(h,g)=>{const b=a.get(),p=g(Jt(b,h).getOrThunk(l));b[h]=p,a.set(b)},u=(h,g)=>{W(Dh(s,h),b=>{g?fe(b,ic(),"true"):Te(b,ic())})},f=Jm(()=>{const h=ir(i.getNames());W(h,g=>{d(g,b=>{const p=b.previous.get();return Th(s,w.some(g)).fold(()=>{p.each(v=>{var _;c(_=g,C=>{W(C.listeners,k=>k(!1,_))}),b.previous.clear(),u(v,!1)})},({uid:v,name:_,elements:C})=>{var k,x,N;Eo(p,v)||(p.each(k=>u(k,!1)),x=v,N=C,c(k=_,D=>{W(D.listeners,B=>B(!0,k,{uid:x,nodes:Mt(N,P=>P.dom)}))}),b.previous.set(v),u(v,!0))}),{previous:b.previous,listeners:b.listeners}})})},30);return s.on("remove",()=>{f.cancel()}),s.on("NodeChange",()=>{f.throttle()}),{addListener:(h,g)=>{d(h,b=>({previous:b.previous,listeners:b.listeners.concat([g])}))}}})(t,e),o=ei("span"),r=s=>{W(s,i=>{o(i)?Do(i):(a=>{ni(a,sc()),Te(a,`${Ta()}`),Te(a,`${yi()}`),Te(a,`${ic()}`);const l=ko(a,`${lc()}`).map(u=>u.split(",")).getOr([]),c=ko(a,`${ac()}`).map(u=>u.split(",")).getOr([]);var d;W(l,u=>Te(a,u)),d=a,W(c,u=>{ni(d,u)}),Te(a,`${ac()}`),Te(a,`${lc()}`)})(i)})};return{register:(s,i)=>{e.register(s,i)},annotate:(s,i)=>{e.lookup(s).each(a=>{var l,c,d,u;c=s,d=a,u=i,(l=t).undoManager.transact(()=>{const f=l.selection,h=f.getRng(),g=Fa(l).length>0,b=cc("mce-annotation");if(h.collapsed&&!g&&((p,v)=>{const _=Ai(p.dom,v,[{inline:"span"}]);v.setStart(_.startContainer,_.startOffset),v.setEnd(_.endContainer,_.endOffset),p.selection.setRng(v)})(l,h),f.getRng().collapsed&&!g){const p=wv(l.getDoc(),b,u,c,d.decorate);ga(p,Ee),f.getRng().insertNode(p.dom),f.select(p.dom)}else av(f,!1,()=>{Af(l,p=>{((t,e,n,o,r,s)=>{const i=[],a=wv(t.getDoc(),n,s,o,r),l=Bs(),c=()=>{l.clear()},d=f=>{W(f,u)},u=f=>{switch(h=t,g=f,b="span",p=Wt(f),Vn(g).fold(()=>"skipping",v=>{return"br"===p||Cn(_=g)&&Vo(_)===xe?"valid":(_=>ln(_)&&ca(_,sc()))(g)?"existing":jo(g.dom)?"caret":le(LS,_=>Ge(g,_))?"valid-block":ja(h,b,p)&&ja(h,Wt(v),b)?"valid":"invalid-child";var _})){case"invalid-child":{c();const h=_e(f);d(h),c();break}case"valid-block":c(),Cv(f,n,s,o,r,!0);break;case"valid":{const h=l.get().getOrThunk(()=>{const g=_i(a);return i.push(g),l.set(g),g});Bd(f,h);break}}var h,g,b,p};xc(t.dom,e,f=>{c(),(h=>{const g=Mt(h,O);d(g)})(f)})})(l,p,b,c,d.decorate,u)})})})})},annotationChanged:(s,i)=>{n.addListener(s,i)},remove:s=>{Th(t,w.some(s)).each(({elements:i})=>{const a=t.selection.getBookmark();r(i),t.selection.moveToBookmark(a)})},removeAll:s=>{const i=t.selection.getBookmark();Xt(Bh(t,s),(a,l)=>{r(a)}),t.selection.moveToBookmark(i)},getAll:s=>{const i=Bh(t,s);return Xi(i,a=>Mt(a,l=>l.dom))}}},kc=t=>({getBookmark:ft(kS,t),moveToBookmark:ft(SS,t)});kc.isBookmarkNode=lo;const xv=(t,e,n)=>!n.collapsed&&le(n.getClientRects(),o=>{return i=e,(s=t)>=(r=o).left&&s<=r.right&&i>=r.top&&i<=r.bottom;var r,s,i}),kv=(t,e,n)=>{t.dispatch(e,n)},Sv=(t,e,n,o)=>{t.dispatch("FormatApply",{format:e,node:n,vars:o})},Nv=(t,e,n,o)=>{t.dispatch("FormatRemove",{format:e,node:n,vars:o})},Av=(t,e)=>t.dispatch("SetContent",e),Ov=(t,e)=>t.dispatch("GetContent",e),Tv=(t,e)=>t.dispatch("PastePlainTextToggle",{state:e}),lt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||lt.metaKeyPressed(t),metaKeyPressed:t=>Rt.os.isMacOS()||Rt.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},Oi="data-mce-selected",Rv=Math.abs,pu=Math.round,Mf={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Dv=(t,e)=>{const n=e.dom,o=e.getDoc(),r=document,s=e.getBody();let i,a,l,c,d,u,f,h,g,b,p,v,_,C,k;const x=dt=>ot(dt)&&(Ns(dt)||n.is(dt,"figure.image")),N=dt=>Ze(dt)||n.hasClass(dt,"mce-preview-object"),D=dt=>{const wt=dt.target;((Nt,R)=>{if("longpress"===(L=Nt).type||0===L.type.indexOf("touch")){const L=Nt.touches[0];return x(Nt.target)&&!xv(L.clientX,L.clientY,R)}var L;return x(Nt.target)&&!xv(Nt.clientX,Nt.clientY,R)})(dt,e.selection.getRng())&&!dt.isDefaultPrevented()&&e.selection.select(wt)},B=dt=>n.hasClass(dt,"mce-preview-object")&&ot(dt.firstElementChild)?[dt,dt.firstElementChild]:n.is(dt,"figure.image")?[dt.querySelector("img")]:[dt],P=dt=>{const wt=wb(e);return!!wt&&"false"!==dt.getAttribute("data-mce-resize")&&dt!==e.getBody()&&(n.hasClass(dt,"mce-preview-object")&&ot(dt.firstElementChild)?Ge(O(dt.firstElementChild),wt):Ge(O(dt),wt))},j=(dt,wt,Nt)=>{if(ot(Nt)){const R=B(dt);W(R,L=>{L.style[wt]||!e.schema.isValid(L.nodeName.toLowerCase(),wt)?n.setStyle(L,wt,Nt):n.setAttrib(L,wt,""+Nt)})}},A=(dt,wt,Nt)=>{j(dt,"width",wt),j(dt,"height",Nt)},T=dt=>{let wt,Nt,R,L,H;wt=dt.screenX-u,Nt=dt.screenY-f,v=wt*c[2]+h,_=Nt*c[3]+g,v=v<5?5:v,_=_<5?5:_,R=(x(i)||N(i))&&!1!==hk(e)?!lt.modifierPressed(dt):lt.modifierPressed(dt),R&&(Rv(wt)>Rv(Nt)?(_=pu(v*b),v=pu(_/b)):(v=pu(_/b),_=pu(v*b))),A(a,v,_),L=c.startPos.x+wt,H=c.startPos.y+Nt,L=L>0?L:0,H=H>0?H:0,n.setStyles(l,{left:L,top:H,display:"block"}),l.innerHTML=v+" &times; "+_,c[2]<0&&a.clientWidth<=v&&n.setStyle(a,"left",void 0+(h-v)),c[3]<0&&a.clientHeight<=_&&n.setStyle(a,"top",void 0+(g-_)),wt=s.scrollWidth-C,Nt=s.scrollHeight-k,wt+Nt!==0&&n.setStyles(l,{left:L-wt,top:H-Nt}),p||(e.dispatch("ObjectResizeStart",{target:i,width:h,height:g,origin:"corner-"+c.name}),p=!0)},I=()=>{const dt=p;p=!1,dt&&(j(i,"width",v),j(i,"height",_)),n.unbind(o,"mousemove",T),n.unbind(o,"mouseup",I),r!==o&&(n.unbind(r,"mousemove",T),n.unbind(r,"mouseup",I)),n.remove(a),n.remove(l),n.remove(d),q(i),dt&&(e.dispatch("ObjectResized",{target:i,width:v,height:_,origin:"corner-"+c.name}),n.setAttrib(i,"style",n.getAttrib(i,"style"))),e.nodeChanged()},q=dt=>{kt();const wt=n.getPos(dt,s),Nt=wt.x,R=wt.y,L=dt.getBoundingClientRect(),H=L.width||L.right-L.left,V=L.height||L.bottom-L.top;i!==dt&&(G(),i=dt,v=_=0);const M=e.dispatch("ObjectSelected",{target:dt});P(dt)&&!M.isDefaultPrevented()?Xt(Mf,(Y,J)=>{let tt=n.get("mceResizeHandle"+J);tt&&n.remove(tt),tt=n.add(s,"div",{id:"mceResizeHandle"+J,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+J+"-resize; margin:0; padding:0"}),n.bind(tt,"mousedown",et=>{et.stopImmediatePropagation(),et.preventDefault(),(Z=>{const Et=B(i)[0];var Ft;u=Z.screenX,f=Z.screenY,h=Et.clientWidth,g=Et.clientHeight,b=g/h,c=Y,c.name=J,c.startPos={x:H*Y[0]+Nt,y:V*Y[1]+R},C=s.scrollWidth,k=s.scrollHeight,d=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(d,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),a=N(Ft=i)?n.create("img",{src:Rt.transparentSrc}):Ft.cloneNode(!0),n.addClass(a,"mce-clonedresizable"),n.setAttrib(a,"data-mce-bogus","all"),a.contentEditable="false",n.setStyles(a,{left:Nt,top:R,margin:0}),A(a,H,V),a.removeAttribute(Oi),s.appendChild(a),n.bind(o,"mousemove",T),n.bind(o,"mouseup",I),r!==o&&(n.bind(r,"mousemove",T),n.bind(r,"mouseup",I)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},h+" &times; "+g)})(et)}),Y.elm=tt,n.setStyles(tt,{left:H*Y[0]+Nt-tt.offsetWidth/2,top:V*Y[1]+R-tt.offsetHeight/2})}):G(!1)},at=Qd(q,0),G=(dt=!0)=>{at.cancel(),kt(),i&&dt&&i.removeAttribute(Oi),Xt(Mf,(wt,Nt)=>{const R=n.get("mceResizeHandle"+Nt);R&&(n.unbind(R),n.remove(R))})},pt=(dt,wt)=>n.isChildOf(dt,wt),mt=dt=>{if(p||e.removed||e.composing)return;const wt="mousedown"===dt.type?dt.target:t.getNode(),Nt=pr(O(wt),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(L=>L.dom).filter(L=>n.isEditable(L.parentElement)).getOrUndefined(),R=ot(Nt)?n.getAttrib(Nt,Oi,"1"):"1";if(W(n.select(`img[${Oi}],hr[${Oi}]`),L=>{L.removeAttribute(Oi)}),ot(Nt)&&pt(Nt,s)&&e.hasFocus()){St();const L=t.getStart(!0);if(pt(L,Nt)&&pt(t.getEnd(!0),Nt))return n.setAttrib(Nt,Oi,R),void at.throttle(Nt)}G()},kt=()=>{Xt(Mf,dt=>{dt.elm&&(n.unbind(dt.elm),delete dt.elm)})},St=()=>{try{e.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return e.on("init",()=>{St(),e.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",mt),e.on("keyup compositionend",dt=>{i&&"TABLE"===i.nodeName&&mt(dt)}),e.on("hide blur",G),e.on("contextmenu longpress",D,!0)}),e.on("remove",kt),{isResizable:P,showResizeRect:q,hideResizeRect:G,updateResizeRect:mt,destroy:()=>{at.cancel(),i=a=d=null}}},Bv=(t,e,n)=>{const o=t.document.createRange();var r,s;return r=o,e.fold(s=>{r.setStartBefore(s.dom)},(s,i)=>{r.setStart(s.dom,i)},s=>{r.setStartAfter(s.dom)}),s=o,n.fold(a=>{s.setEndBefore(a.dom)},(a,l)=>{s.setEnd(a.dom,l)},a=>{s.setEndAfter(a.dom)}),o},If=(t,e,n,o,r)=>{const s=t.document.createRange();return s.setStart(e.dom,n),s.setEnd(o.dom,r),s},Sc=_r([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Lv=(t,e,n)=>e(O(n.startContainer),n.startOffset,O(n.endContainer),n.endOffset),Pv=(t,e,n,o)=>({start:t,soffset:e,finish:n,foffset:o}),MS=document.caretPositionFromPoint?(t,e,n)=>{var o,r;return w.from(null===(r=(o=t.dom).caretPositionFromPoint)||void 0===r?void 0:r.call(o,e,n)).bind(s=>{if(null===s.offsetNode)return w.none();const i=t.dom.createRange();return i.setStart(s.offsetNode,s.offset),i.collapse(),w.some(i)})}:document.caretRangeFromPoint?(t,e,n)=>{var o,r;return w.from(null===(r=(o=t.dom).caretRangeFromPoint)||void 0===r?void 0:r.call(o,e,n))}:w.none,Ff=_r([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),es={before:Ff.before,on:Ff.on,after:Ff.after,cata:(t,e,n,o)=>t.fold(e,n,o),getStart:t=>t.fold(Ke,Ke,Ke)},hu=_r([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ua={domRange:hu.domRange,relative:hu.relative,exact:hu.exact,exactFromRange:t=>hu.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>{const e=t.match({domRange:o=>O(o.startContainer),relative:(o,r)=>es.getStart(o),exact:(o,r,s,i)=>o});return oi(e)},range:Pv},bu=(t,e)=>{const n=Wt(t);return"input"===n?es.after(t):gt(["br","img"],n)?0===e?es.before(t):es.after(t):es.on(t,e)},IS=(t,e)=>{const n=t.fold(es.before,bu,es.after),o=e.fold(es.before,bu,es.after);return Ua.relative(n,o)},Mv=(t,e,n,o)=>{const r=bu(t,e),s=bu(n,o);return Ua.relative(r,s)},jf=(t,e)=>{const n=(e||document).createDocumentFragment();return W(t,o=>{n.appendChild(o.dom)}),O(n)},Iv=(t,e,n)=>{return(o=oi(O(n)).dom,r=t,s=e,((i,a,l)=>{const c=O(i.document);return MS(c,a,l).map(d=>Pv(O(d.startContainer),d.startOffset,O(d.endContainer),d.endOffset))})(o,r,s)).map(o=>{const r=n.createRange();return r.setStart(o.start.dom,o.soffset),r.setEnd(o.finish.dom,o.foffset),r}).getOrUndefined();var o,r,s},$f=(t,e)=>ot(t)&&ot(e)&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset,Fv=(t,e,n)=>null!==((o,r,s)=>{let i=o;for(;i&&i!==r;){if(s(i))return i;i=i.parentNode}return null})(t,e,n),jS=(t,e,n)=>Fv(t,e,o=>o.nodeName===n),$S=(t,e)=>mn(t)&&!Fv(t,e,jo),jv=(t,e,n)=>{const o=e.parentNode;if(o){const r=new Ce(e,t.getParent(o,t.isBlock)||t.getRoot());let s;for(;s=r[n?"prev":"next"]();)if(ce(s))return!0}return!1},Uf=(t,e,n,o,r)=>{const s=t.getRoot(),i=t.schema.getNonEmptyElements(),a=r.parentNode;let l,c;if(!a)return w.none();const d=t.getParent(a,t.isBlock)||s;if(o&&ce(r)&&e&&t.isEmpty(d))return w.some(z(a,t.nodeIndex(r)));const u=new Ce(r,d);for(;c=u[o?"prev":"next"]();){if("false"===t.getContentEditableParent(c)||$S(c,s))return w.none();if(X(c)&&c.data.length>0)return jS(c,s,"A")?w.none():w.some(z(c,o?c.data.length:0));if(t.isBlock(c)||i[c.nodeName.toLowerCase()])return w.none();l=c}return Lo(l)?w.none():n&&l?w.some(z(l,0)):w.none()},$v=(t,e,n,o)=>{const r=t.getRoot();let s,i=!1,a=n?o.startContainer:o.endContainer,l=n?o.startOffset:o.endOffset;const c=ct(a)&&l===a.childNodes.length,d=t.schema.getNonEmptyElements();let u=n;if(mn(a))return w.none();if(ct(a)&&l>a.childNodes.length-1&&(u=!1),hr(a)&&(a=r,l=0),a===r){if(u&&(s=a.childNodes[l>0?l-1:0],s)&&(mn(s)||d[s.nodeName]||qo(s)))return w.none();if(a.hasChildNodes()){if(l=Math.min(!u&&l>0?l-1:l,a.childNodes.length-1),a=a.childNodes[l],l=X(a)&&c?a.data.length:0,!e&&a===r.lastChild&&qo(a)||((f,h)=>{let g=h;for(;g&&g!==f;){if(Zt(g))return!0;g=g.parentNode}return!1})(r,a)||mn(a))return w.none();if(a.hasChildNodes()&&!qo(a)){s=a;const f=new Ce(a,r);do{if(Zt(s)||mn(s)){i=!1;break}if(X(s)&&s.data.length>0){l=u?0:s.data.length,a=s,i=!0;break}if(d[s.nodeName.toLowerCase()]&&!jm(s)){l=t.nodeIndex(s),a=s.parentNode,u||l++,i=!0;break}}while(s=u?f.next():f.prev())}}}return e&&(X(a)&&0===l&&Uf(t,c,e,!0,a).each(f=>{a=f.container(),l=f.offset(),i=!0}),ct(a)&&(s=a.childNodes[l],s||(s=a.childNodes[l-1]),!s||!ce(s)||"A"===(null===(g=s.previousSibling)||void 0===g?void 0:g.nodeName)||jv(t,s,!1)||jv(t,s,!0)||Uf(t,c,e,!0,s).each(f=>{a=f.container(),l=f.offset(),i=!0}))),u&&!e&&X(a)&&l===a.data.length&&Uf(t,c,e,!1,a).each(f=>{a=f.container(),l=f.offset(),i=!0}),i&&a?w.some(z(a,l)):w.none();var g},vu=(t,e)=>{const n=e.collapsed,o=e.cloneRange(),r=z.fromRangeStart(e);return $v(t,n,!0,o).each(s=>{n&&z.isAbove(r,s)||o.setStart(s.container(),s.offset())}),n||$v(t,n,!1,o).each(s=>{o.setEnd(s.container(),s.offset())}),n&&o.collapse(!0),$f(e,o)?w.none():w.some(o)},yu=(t,e)=>t.splitText(e),_u=t=>{let e=t.startContainer,n=t.startOffset,o=t.endContainer,r=t.endOffset;if(e===o&&X(e)){if(n>0&&n<e.data.length)if(o=yu(e,n),e=o.previousSibling,r>n){r-=n;const s=yu(o,r).previousSibling;e=o=s,r=s.data.length,n=0}else r=0}else if(X(e)&&n>0&&n<e.data.length&&(e=yu(e,n),n=0),X(o)&&r>0&&r<o.data.length){const s=yu(o,r).previousSibling;o=s,r=s.data.length}return{startContainer:e,startOffset:n,endContainer:o,endOffset:r}},Ti=t=>({walk:(e,n)=>xc(t,e,n),split:_u,expand:(e,n={type:"word"})=>{if("word"===n.type){const o=Ai(t,e,[{inline:"span"}]),r=t.createRng();return r.setStart(o.startContainer,o.startOffset),r.setEnd(o.endContainer,o.endOffset),r}return e},normalize:e=>vu(t,e).fold(ee,n=>(e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),!0))});Ti.compareRanges=$f,Ti.getCaretRangeFromPoint=Iv,Ti.getSelectedNode=Jd,Ti.getNode=Ls;const US=((t,e)=>{const n=r=>{const s=(i=>{const a=i.dom;return xs(i)?a.getBoundingClientRect().height:a.offsetHeight})(r);if(s<=0||null===s){const i=oo(r,t);return parseFloat(i)||0}return s},o=(r,s)=>Me(s,(i,a)=>{const l=oo(r,a),c=void 0===l?0:parseInt(l,10);return isNaN(c)?i:i+c},0);return{set:(r,s)=>{if(!Tn(s)&&!s.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+s);const i=r.dom;ks(i)&&(i.style[t]=s+"px")},get:n,getOuter:n,aggregate:o,max:(r,s,i)=>{const a=o(r,i);return s>a?s-a:0}}})("height"),Uv=()=>O(document),zv=(t,e)=>t.view(e).fold(st([]),n=>{const o=t.owner(n),r=zv(t,o);return[n].concat(r)});var zS=Object.freeze({__proto__:null,view:t=>{var e;return(t.dom===document?w.none():w.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(O)},owner:t=>Ho(t)});const zf=t=>"textarea"===Wt(t),Hv=(t,e)=>{const n=(r=>{const s=r.dom.ownerDocument,i=s.body,a=s.defaultView,l=s.documentElement;if(i===r.dom)return Kr(i.offsetLeft,i.offsetTop);const c=pa(a?.pageYOffset,l.scrollTop),d=pa(a?.pageXOffset,l.scrollLeft),u=pa(l.clientTop,i.clientTop),f=pa(l.clientLeft,i.clientLeft);return ha(r).translate(d-f,c-u)})(t),o=US.get(t);return{element:t,bottom:n.top+o,height:o,pos:n,cleanup:e}},qv=(t,e,n,o)=>{qS(t,(r,s)=>HS(t,e,n,o),n)},Vv=(t,e,n,o,r)=>{const s={elm:o.element.dom,alignToTop:r};t.dispatch("ScrollIntoView",s).isDefaultPrevented()||(n(t,e,ba(e).top,o,r),t.dispatch("AfterScrollIntoView",s))},HS=(t,e,n,o)=>{O(t.getBody());const s=O(t.getDoc()),i=((a,l)=>{const c=((u,f)=>{const h=_e(u);if(0===h.length||zf(u))return{element:u,offset:f};if(f<h.length&&!zf(h[f]))return{element:h[f],offset:0};{const g=h[h.length-1];return zf(g)?{element:u,offset:f}:"img"===Wt(g)?{element:g,offset:1}:Cn(g)?{element:g,offset:Vo(g).length}:{element:g,offset:_e(g).length}}})(a,l),d=mr('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return Je(c.element,d),Hv(d,()=>ne(d))})(O(n.startContainer),n.startOffset);Vv(t,s,e,i,o),i.cleanup()},Wv=(t,e,n,o)=>{const r=O(t.getDoc());Vv(t,r,n,Hv(O(e),Tt),o)},qS=(t,e,n)=>{const o=n.startContainer,r=n.startOffset,s=n.endContainer,i=n.endOffset;e(O(o),O(s));const a=t.dom.createRng();a.setStart(o,r),a.setEnd(s,i),t.selection.setRng(n)},Hf=(t,e,n,o,r)=>{const s=e.pos;if(o)Ul(s.left,s.top,r);else{const i=s.top-n+e.height;Ul(-t.getBody().getBoundingClientRect().left,i,r)}},Kv=(t,e,n,o,r,s)=>{const i=o+n,a=r.pos.top,l=r.bottom,c=l-a>=o;a<n?Hf(t,r,o,!1!==s,e):a>i?Hf(t,r,o,c?!1!==s:!0===s,e):l>i&&!c&&Hf(t,r,o,!0===s,e)},Yv=(t,e,n,o,r)=>{const s=oi(e).dom.innerHeight;Kv(t,e,n,s,o,r)},Xv=(t,e,n,o,r)=>{const s=oi(e).dom.innerHeight;Kv(t,e,n,s,o,r);const i=(l=>{const c=Uv(),d=ba(c),u=((g,b)=>{const p=b.owner(g);return zv(b,p)})(l,zS),f=ha(l),h=Uo(u,(g,b)=>{const p=ha(b);return{left:g.left+p.left,top:g.top+p.top}},{left:0,top:0});return Kr(h.left+f.left+d.left,h.top+f.top+d.top)})(o.element),a=Pd(window);i.top<a.y?zl(o.element,!1!==r):i.top>a.bottom&&zl(o.element,!0===r)},VS=(t,e,n)=>qv(t,Yv,e,n),WS=(t,e,n)=>Wv(t,e,Yv,n),KS=(t,e,n)=>qv(t,Xv,e,n),YS=(t,e,n)=>Wv(t,e,Xv,n),Nc=(t,e,n)=>{(t.inline?VS:KS)(t,e,n)},Gv=t=>t.dom.focus(),Qv=t=>{const e=gr(t).dom;return t.dom===e.activeElement},qf=(t=Uv())=>w.from(t.dom.activeElement).map(O),Jv=(t,e)=>{const n=Cn(e)?Vo(e).length:_e(e).length+1;return t>n?n:t<0?0:t},XS=t=>Ua.range(t.start,Jv(t.soffset,t.start),t.finish,Jv(t.foffset,t.finish)),Zv=(t,e)=>!va(e.dom)&&(No(t,e)||zt(t,e)),t0=t=>e=>Zv(t,e.start)&&Zv(t,e.finish),GS=t=>Ua.range(O(t.startContainer),t.startOffset,O(t.endContainer),t.endOffset),QS=t=>{const e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),w.some(e)}catch{return w.none()}},Vf=t=>{const e=t.inline||Rt.browser.isFirefox()?(n=O(t.getBody()),(o=>{const r=o.getSelection();return(r&&0!==r.rangeCount?w.from(r.getRangeAt(0)):w.none()).map(GS)})(oi(n).dom).filter(t0(n))):w.none();var n;t.bookmark=e.isSome()?e:t.bookmark},Wf=t=>(t.bookmark?t.bookmark:w.none()).bind(e=>{return n=O(t.getBody()),w.from(e).filter(t0(n)).map(XS);var n}).bind(QS),e0={isEditorUIElement:t=>{const e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},uo={setEditorTimeout:(t,e,n)=>{return Tn(r=n)||(r=0),setTimeout(()=>{t.removed||e()},r);var r},setEditorInterval:(t,e,n)=>{const o=(Tn(s=n)||(s=0),setInterval(()=>{t.removed?clearInterval(o):e()},s));var s;return o}};let za;const Kf=Qt.DOM,Yf=t=>{const e=t.classList;return void 0!==e&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))},Cu=(t,e)=>{const n=kk(t);return null!==Kf.getParent(e,r=>{return ct(s=r)&&e0.isEditorUIElement(s)||!!n&&t.dom.is(r,n);var s})},Xf=t=>{try{const e=gr(O(t.getElement()));return qf(e).fold(()=>document.body,n=>n.dom)}catch{return document.body}},JS=(t,e)=>{const n=e.editor;(r=>{const s=Qd(()=>{Vf(r)},0);r.on("init",()=>{var i,c;r.inline&&((i,a)=>{const l=()=>{a.throttle()};Qt.DOM.bind(document,"mouseup",l),i.on("remove",()=>{Qt.DOM.unbind(document,"mouseup",l)})})(r,s),c=s,(i=r).on("mouseup touchend",d=>{c.throttle()}),i.on("keyup NodeChange AfterSetSelectionRange",l=>{(c=>"nodechange"===c.type&&c.selectionChange)(l)||Vf(i)})}),r.on("remove",()=>{s.cancel()})})(n);const o=(r,s)=>{iS(r)&&!0!==r.inline&&s(O(r.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const r=t.focusedEditor;Yf(Xf(n))&&o(n,Ur),r!==n&&(r&&r.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:r}),n.focus(!0))}),n.on("focusout",()=>{uo.setEditorTimeout(n,()=>{const r=t.focusedEditor;Yf(Xf(n))&&r===n||o(n,ni),Cu(n,Xf(n))||r!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),za||(za=r=>{const s=t.activeEditor;s&&Fl(r).each(i=>{i.ownerDocument===document&&(i===document.body||Cu(s,i)||t.focusedEditor!==s||(s.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))})},Kf.bind(document,"focusin",za))},ZS=(t,e)=>{t.focusedEditor===e.editor&&(t.focusedEditor=null),!t.activeEditor&&za&&(Kf.unbind(document,"focusin",za),za=null)},n0=(t,e)=>{var n,o,r;(n=O(t.getBody()),o=e,(r=o,r.collapsed?w.from(Ls(r.startContainer,r.startOffset)).map(O):w.none()).bind(r=>Um(r)?w.some(r):No(n,r)?w.none():w.some(n))).bind(n=>nn(n.dom)).fold(()=>{t.selection.normalize()},n=>t.selection.setRng(n.toRange()))},Gf=t=>{if(t.setActive)try{t.setActive()}catch{t.focus()}else t.focus()},Ri=t=>{return t.inline?(e=>{const n=e.getBody();return n&&(o=O(n),Qv(o)||(r=o,qf(gr(r)).filter(s=>r.dom.contains(s.dom))).isSome());var o,r})(t):ot((e=t).iframeElement)&&Qv(O(e.iframeElement));var e},Qf=t=>t.editorManager.setActive(t),o0=(t,e,n,o,r)=>{const i=n?e.startOffset:e.endOffset;return w.from(n?e.startContainer:e.endContainer).map(O).map(a=>o&&e.collapsed?a:Es(a,r(a,i)).getOr(a)).bind(a=>ln(a)?w.some(a):Vn(a).filter(ln)).map(a=>a.dom).getOr(t)},r0=(t,e,n=!1)=>o0(t,e,!0,n,(o,r)=>Math.min(Ml(o),r)),s0=(t,e,n=!1)=>o0(t,e,!1,n,(o,r)=>r>0?r-1:r),i0=(t,e)=>{const n=t;for(;t&&X(t)&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n},Jf=(t,e)=>Mt(e,n=>{const o=t.dispatch("GetSelectionRange",{range:n});return o.range!==n?o.range:n}),tN=["img","br"],a0=t=>{return Ea(t).filter(n=>0!==n.trim().length||n.indexOf(Ee)>-1).isSome()||gt(tN,Wt(t))||ys(n=t)&&"false"===cn(n,"contenteditable");var n},l0="[data-mce-autocompleter]",c0=t=>ii(t,l0),nN={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},wu=(t,e,n)=>{const o=n?"lastChild":"firstChild",r=n?"prev":"next";if(t[o])return t[o];if(t!==e){let s=t[r];if(s)return s;for(let i=t.parent;i&&i!==e;i=i.parent)if(s=i[r],s)return s}},oN=t=>{var e;const n=null!==(e=t.value)&&void 0!==e?e:"";if(!E(n))return!1;const o=t.parent;return!o||"span"===o.name&&!o.attr("style")||!/^[ ]+$/.test(n)},d0=t=>{const e="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e};class Nn{static create(e,n){const o=new Nn(e,nN[e]||1);return n&&Xt(n,(r,s)=>{o.attr(s,r)}),o}constructor(e,n){this.name=e,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}replace(e){const n=this;return e.parent&&e.remove(),n.insert(e,n),n.remove(),n}attr(e,n){const o=this;if(!ht(e))return ot(e)&&Xt(e,(s,i)=>{o.attr(i,s)}),o;const r=o.attributes;if(r){if(void 0!==n){if(null===n){if(e in r.map){delete r.map[e];let s=r.length;for(;s--;)if(r[s].name===e)return r.splice(s,1),o}return o}if(e in r.map){let s=r.length;for(;s--;)if(r[s].name===e){r[s].value=n;break}}else r.push({name:e,value:n});return r.map[e]=n,o}return r.map[e]}}clone(){const e=this,n=new Nn(e.name,e.type),o=e.attributes;if(o){const r=[];r.map={};for(let s=0,i=o.length;s<i;s++){const a=o[s];"id"!==a.name&&(r[r.length]={name:a.name,value:a.value},r.map[a.name]=a.value)}n.attributes=r}return n.value=e.value,n}wrap(e){const n=this;return n.parent&&(n.parent.insert(e,n),e.append(n)),n}unwrap(){const e=this;for(let n=e.firstChild;n;){const o=n.next;e.insert(n,e,!0),n=o}e.remove()}remove(){const e=this,n=e.parent,o=e.next,r=e.prev;return n&&(n.firstChild===e?(n.firstChild=o,o&&(o.prev=null)):r&&(r.next=o),n.lastChild===e?(n.lastChild=r,r&&(r.next=null)):o&&(o.prev=r),e.parent=e.next=e.prev=null),e}append(e){const n=this;e.parent&&e.remove();const o=n.lastChild;return o?(o.next=e,e.prev=o,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e}insert(e,n,o){e.parent&&e.remove();const r=n.parent||this;return o?(n===r.firstChild?r.firstChild=e:n.prev&&(n.prev.next=e),e.prev=n.prev,e.next=n,n.prev=e):(n===r.lastChild?r.lastChild=e:n.next&&(n.next.prev=e),e.next=n.next,e.prev=n,n.next=e),e.parent=r,e}getAll(e){const n=this,o=[];for(let r=n.firstChild;r;r=wu(r,n))r.name===e&&o.push(r);return o}children(){const e=[];for(let n=this.firstChild;n;n=n.next)e.push(n);return e}empty(){const e=this;if(e.firstChild){const n=[];for(let r=e.firstChild;r;r=wu(r,e))n.push(r);let o=n.length;for(;o--;){const r=n[o];r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,n={},o){var r;const s=this;let i=s.firstChild;if(d0(s))return!1;if(i)do{if(1===i.type){if(i.attr("data-mce-bogus"))continue;if(e[i.name]||d0(i))return!1}if(8===i.type||3===i.type&&!oN(i)||3===i.type&&i.parent&&n[i.parent.name]&&E(null!==(r=i.value)&&void 0!==r?r:"")||o&&o(i))return!1}while(i=wu(i,s));return!0}walk(e){return wu(this,null,e)}}const rN=Q.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),u0=t=>ht(t.nodeValue)&&t.nodeValue.includes(xe),m0=t=>(0===t.length?"":`${Mt(t,e=>`[${e}]`).join(",")},`)+'[data-mce-bogus="all"]',f0=t=>document.createTreeWalker(t,NodeFilter.SHOW_COMMENT,e=>u0(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),g0=t=>document.createTreeWalker(t,NodeFilter.SHOW_TEXT,e=>{if(u0(e)){const n=e.parentNode;return n&&Ot(rN,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),sN=t=>null!==f0(t).nextNode(),iN=t=>null!==g0(t).nextNode(),aN=(t,e)=>null!==e.querySelector(m0(t)),lN=(t,e)=>{W(e.querySelectorAll(m0(t)),n=>{const o=O(n);"all"===cn(o,"data-mce-bogus")?ne(o):W(t,r=>{So(o,r)&&Te(o,r)})})},p0=t=>{let e=t.nextNode();for(;null!==e;)e.nodeValue=null,e=t.nextNode()},cN=yo(p0,f0),dN=yo(p0,g0),h0=(t,e)=>{const n=[{condition:ft(aN,e),action:ft(lN,e)},{condition:sN,action:cN},{condition:iN,action:dN}];let o=t,r=!1;return W(n,({condition:s,action:i})=>{s(o)&&(r||(o=t.cloneNode(!0),r=!0),i(o))}),o},b0=t=>{const e=De(t,"[data-mce-bogus]");W(e,n=>{"all"===cn(n,"data-mce-bogus")?ne(n):ro(n)?(Je(n,ws("\ufeff")),ne(n)):Do(n)})},v0=t=>{const e=De(t,"input");W(e,n=>{Te(n,"name")})},y0=Q.makeMap,_0=t=>{const e=[],n=(t=t||{}).indent,o=y0(t.indent_before||""),r=y0(t.indent_after||""),s=io.getEncodeFunc(t.entity_encoding||"raw",t.entities),i="xhtml"!==t.element_format;return{start:(a,l,c)=>{if(n&&o[a]&&e.length>0){const d=e[e.length-1];d.length>0&&"\n"!==d&&e.push("\n")}if(e.push("<",a),l)for(let d=0,u=l.length;d<u;d++){const f=l[d];e.push(" ",f.name,'="',s(f.value,!0),'"')}if(e[e.length]=!c||i?">":" />",c&&n&&r[a]&&e.length>0){const d=e[e.length-1];d.length>0&&"\n"!==d&&e.push("\n")}},end:a=>{let l;e.push("</",a,">"),n&&r[a]&&e.length>0&&(l=e[e.length-1],l.length>0&&"\n"!==l&&e.push("\n"))},text:(a,l)=>{a.length>0&&(e[e.length]=l?a:s(a))},cdata:a=>{e.push("<![CDATA[",a,"]]>")},comment:a=>{e.push("\x3c!--",a,"--\x3e")},pi:(a,l)=>{l?e.push("<?",a," ",s(l),"?>"):e.push("<?",a,"?>"),n&&e.push("\n")},doctype:a=>{e.push("<!DOCTYPE",a,">",n?"\n":"")},reset:()=>{e.length=0},getContent:()=>e.join("").replace(/\n$/,"")}},Fs=(t={},e=xn())=>{const n=_0(t);return t.validate=!("validate"in t)||t.validate,{serialize:o=>{const r=t.validate,s={3:a=>{var l;n.text(null!==(l=a.value)&&void 0!==l?l:"",a.raw)},8:a=>{var l;n.comment(null!==(l=a.value)&&void 0!==l?l:"")},7:a=>{n.pi(a.name,a.value)},10:a=>{var l;n.doctype(null!==(l=a.value)&&void 0!==l?l:"")},4:a=>{var l;n.cdata(null!==(l=a.value)&&void 0!==l?l:"")},11:a=>{let l=a;if(l=l.firstChild)do{i(l)}while(l=l.next)}};n.reset();const i=a=>{var l;const c=s[a.type];if(c)c(a);else{const d=a.name,u=d in e.getVoidElements();let f=a.attributes;if(r&&f&&f.length>1){const h=[];h.map={};const g=e.getElementRule(a.name);if(g){for(let b=0,p=g.attributesOrder.length;b<p;b++){const v=g.attributesOrder[b];if(v in f.map){const _=f.map[v];h.map[v]=_,h.push({name:v,value:_})}}for(let b=0,p=f.length;b<p;b++){const v=f[b].name;if(!(v in h.map)){const _=f.map[v];h.map[v]=_,h.push({name:v,value:_})}}f=h}}if(n.start(d,f,u),!u){let h=a.firstChild;if(h){"pre"!==d&&"textarea"!==d||3!==h.type||"\n"!==(null===(l=h.value)||void 0===l?void 0:l[0])||n.text("\n",!0);do{i(h)}while(h=h.next)}n.end(d)}}};return 1!==o.type||t.inner?3===o.type?s[3](o):s[11](o):i(o),n.getContent()}}},C0=new Set;W(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{C0.add(t)});const w0=["font","text-decoration","text-emphasis"],Zf=(t,e)=>Xe(t.parseStyle(t.getAttrib(e,"style"))),mN=(t,e,n)=>{const o=Zf(t,e),r=Zf(t,n),s=i=>{var a,l;const c=null!==(a=t.getStyle(e,i))&&void 0!==a?a:"",d=null!==(l=t.getStyle(n,i))&&void 0!==l?l:"";return Qe(c)&&Qe(d)&&c!==d};return le(o,i=>{const a=l=>le(l,c=>c===i);if(!a(r)&&a(w0)){const l=xt(r,c=>le(w0,d=>Gt(c,d)));return le(l,s)}return s(i)})},E0=(t,e,n)=>w.from(n.container()).filter(X).exists(o=>{const r=t?0:-1;return e(o.data.charAt(n.offset()+r))}),tg=ft(E0,!0,Ia),eg=ft(E0,!1,Ia),fN=t=>{const e=t.container();return X(e)&&(0===e.data.length||As(e.data)&&kc.isBookmarkNode(e.parentNode))},js=(t,e)=>n=>pf(t?0:-1,n).filter(e).isSome(),x0=t=>Ns(t)&&"block"===oo(O(t),"display"),k0=t=>{return Zt(t)&&!(ct(e=t)&&"all"===e.getAttribute("data-mce-bogus"));var e},gN=js(!0,x0),pN=js(!1,x0),Ac=js(!0,Ze),Oc=js(!1,Ze),S0=js(!0,qo),N0=js(!1,qo),$s=js(!0,k0),Us=js(!1,k0),A0=(t,e)=>{return r=ee,No(o=e,n=t)?Bl(n,s=>r(s)||zt(s,o)).slice(0,-1):[];var n,o,r},ns=(t,e)=>[t].concat(A0(t,e)),ng=(t,e,n)=>Xb(t,e,n,fN),O0=(t,e)=>ye(ns(O(e.container()),t),Ln),T0=(t,e,n)=>ng(t,e.dom,n).forall(o=>O0(e,n).fold(()=>!Cr(o,n,e.dom),r=>!Cr(o,n,e.dom)&&No(r,O(o.container())))),R0=(t,e,n)=>O0(e,n).fold(()=>ng(t,e.dom,n).forall(o=>!Cr(o,n,e.dom)),o=>ng(t,o.dom,n).isNone()),og=ft(R0,!1),D0=ft(R0,!0),hN=ft(T0,!1),bN=ft(T0,!0),vN=t=>su(t).exists(ro),Eu=(t,e,n)=>{const o=xt(ns(O(n.container()),e),Ln),r=Ae(o).getOr(e);return ao(t,r.dom,n).filter(vN)},rg=(t,e)=>su(e).exists(ro)||Eu(!0,t,e).isSome(),sg=(t,e)=>{return(n=e,w.from(n.getNode(!0)).map(O)).exists(ro)||Eu(!1,t,e).isSome();var n},yN=ft(Eu,!1),_N=ft(Eu,!0),B0=t=>z.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),L0=(t,e)=>{const n=xt(ns(O(e.container()),t),Ln);return Ae(n).getOr(t)},P0=(t,e)=>B0(e)?eg(e):eg(e)||In(L0(t,e).dom,e).exists(eg),M0=(t,e)=>B0(e)?tg(e):tg(e)||Sn(L0(t,e).dom,e).exists(tg),ig=t=>su(t).bind(e=>To(e,ln)).exists(e=>{return n=oo(e,"white-space"),gt(["pre","pre-wrap"],n);var n}),I0=(t,e)=>n=>{return o=new Ce(n,t)[e](),ot(o)&&Zt(o)&&Mb(o);var o},F0=(t,e)=>{return!ig(e)&&(In((n=t).dom,o=e).isNone()||Sn(n.dom,o).isNone()||og(n,o)||D0(n,o)||sg(n,o)||rg(n,o)||P0(t,e)||M0(t,e));var n,o},Tc=(t,e)=>!ig(e)&&(og(t,e)||hN(t,e)||sg(t,e)||P0(t,e)||((n,o)=>{const r=In(n.dom,o).getOr(o),s=I0(n.dom,"prev");return o.isAtStart()&&(s(o.container())||s(r.container()))})(t,e)),Rc=(t,e)=>!ig(e)&&(D0(t,e)||bN(t,e)||rg(t,e)||M0(t,e)||((n,o)=>{const r=Sn(n.dom,o).getOr(o),s=I0(n.dom,"next");return o.isAtEnd()&&(s(o.container())||s(r.container()))})(t,e)),ag=(t,e)=>Tc(t,e)||Rc(t,(n=>{const o=n.container(),r=n.offset();return X(o)&&r<o.data.length?z(o,r+1):n})(e)),j0=(t,e)=>cu(t.charAt(e)),$0=(t,e)=>Ia(t.charAt(e)),U0=(t,e,n)=>{const o=e.data,r=z(e,0);return n||!j0(o,0)||ag(t,r)?!!(n&&$0(o,0)&&Tc(t,r))&&(e.data=Ee+o.slice(1),!0):(e.data=" "+o.slice(1),!0)},z0=(t,e,n)=>{const o=e.data,r=z(e,o.length-1);return n||!j0(o,o.length-1)||ag(t,r)?!!(n&&$0(o,o.length-1)&&Rc(t,r))&&(e.data=o.slice(0,-1)+Ee,!0):(e.data=o.slice(0,-1)+" ",!0)},H0=(t,e,n)=>{if(0===n)return;const o=O(t),r=Oo(o,Ln).getOr(o),s=t.data.slice(e,e+n),i=e+n>=t.data.length&&Rc(r,z(t,t.data.length)),a=0===e&&Tc(r,z(t,0));t.replaceData(e,n,S(s,4,a,i))},xu=(t,e)=>{const n=t.data.slice(e),o=n.length-Zi(n).length;H0(t,e,o)},lg=(t,e)=>{const n=t.data.slice(0,e),o=n.length-Fr(n).length;H0(t,e-o,o)},cg=(t,e,n,o=!0)=>{const r=Fr(t.data).length,s=o?t:e,i=o?e:t;return o?s.appendData(i.data):s.insertData(0,i.data),ne(O(i)),n&&xu(s,r),s},wN=(t,e)=>((n,o)=>{const r=n.container(),s=n.offset();return!z.isTextPosition(n)&&r===o.parentNode&&s>z.before(o).offset()})(e,t)?z(e.container(),e.offset()-1):e,q0=t=>{return fn(t.previousSibling)?w.some(X(e=t.previousSibling)?z(e,e.data.length):z.after(e)):t.previousSibling?Fo(t.previousSibling):w.none();var e},V0=t=>{return fn(t.nextSibling)?w.some(X(e=t.nextSibling)?z(e,0):z.before(e)):t.nextSibling?nn(t.nextSibling):w.none();var e},W0=(t,e,n)=>{n.fold(()=>{t.focus()},o=>{t.selection.setRng(o.toRange(),e)})},xN=(t,e)=>e&&Ot(t.schema.getBlockElements(),Wt(e)),kN=t=>{if(rt(t)){const e=mr('<br data-mce-bogus="1">');return Ss(t),ge(t,e),w.some(z.before(e.dom))}return w.none()},Di=(t,e,n,o=!0)=>{const r=((t,e,n)=>{return(o=t,r=e,s=n,o?(i=r,V0(a=s).orThunk(()=>q0(a)).orThunk(()=>{return Sn(l=i,z.after(c=a)).orThunk(()=>In(l,z.before(c)));var l,c})):((i,a)=>q0(a).orThunk(()=>V0(a)).orThunk(()=>{return l=i,w.from((c=a).previousSibling?c.previousSibling:c.parentNode).bind(d=>In(l,z.before(d))).orThunk(()=>Sn(l,z.after(c)));var l,c}))(r,s)).map(ft(wN,n));var o,r,s,i,a})(e,t.getBody(),n.dom),s=Oo(n,ft(xN,t),(i=t.getBody(),l=>l.dom===i));var i;const a=((l,c,d)=>{const u=zr(l).filter(Cn),f=Ao(l).filter(Cn);return ne(l),(h=u,g=f,b=c,p=(v,_,C)=>{const k=v.dom,x=_.dom,N=k.data.length;return cg(k,x,d),C.container()===x?z(k,N):C},h.isSome()&&g.isSome()&&b.isSome()?w.some(p(h.getOrDie(),g.getOrDie(),b.getOrDie())):w.none()).orThunk(()=>(d&&(u.each(v=>lg(v.dom,v.dom.length)),f.each(v=>xu(v.dom,0))),c));var h,g,b,p})(n,r,(c=n,Ot(t.schema.getTextInlineElements(),Wt(c))));var c;t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):s.bind(kN).fold(()=>{o&&W0(t,e,a)},l=>{o&&W0(t,e,w.some(l))})},SN=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Bi=(t,e)=>Ge(O(e),pk(t))&&!Ht(t.schema,e)&&t.dom.isEditable(e),K0=t=>{var e,n;return"rtl"===Qt.DOM.getStyle(t,"direction",!0)||(n=null!==(e=t.textContent)&&void 0!==e?e:"",SN.test(n))},zs=(t,e,n)=>{const o=(r=t,s=e,xt(Qt.DOM.getParents(n.container(),"*",s),r));var r,s;return w.from(o[o.length-1])},mo=(t,e)=>{const n=e.container(),o=e.offset();return t?Ko(n)?X(n.nextSibling)?z(n.nextSibling,0):z.after(n):mi(e)?z(n,o+1):e:Ko(n)?X(n.previousSibling)?z(n.previousSibling,n.previousSibling.data.length):z.before(n):Yl(e)?z(n,o-1):e},Y0=ft(mo,!0),X0=ft(mo,!1),G0=(t,e)=>{const n=o=>o.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(e),t.off("beforeinput input",n)},dg=t=>G0(t,"Delete"),NN=t=>vr(t)||ci(t),ku=(t,e)=>{return No(t,e)?To(e,NN,(n=t,o=>Eo(Vn(o),n,zt))):w.none();var n},ug=(t,e=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!e})},Q0=(t,e,n)=>qe(nn(n),Fo(n),(o,r)=>{const s=mo(!0,o),i=mo(!1,r),a=mo(!1,e);return t?Sn(n,a).exists(l=>l.isEqual(i)&&e.isEqual(s)):In(n,a).exists(l=>l.isEqual(s)&&e.isEqual(i))}).getOr(!0),J0=t=>{var e;return(8===sa(e=t)||"#comment"===Wt(e)?zr(t):Pl(t)).bind(J0).orThunk(()=>w.some(t))},Z0=(t,e,n,o=!0)=>{var r;e.deleteContents();const s=J0(n).getOr(n),i=O(null!==(r=t.dom.getParent(s.dom,t.dom.isBlock))&&void 0!==r?r:n.dom);if(i.dom===t.getBody()?ug(t,o):rt(i)&&(Wo(i),o&&t.selection.setCursorLocation(i.dom,0)),!zt(n,i)){const l=Eo(Vn(i),n)?[]:Vn(a=i).map(_e).map(c=>xt(c,d=>!zt(a,d))).getOr([]);W(l.concat(_e(n)),c=>{zt(c,i)||No(c,i)||!rt(c)||ne(c)})}var a},mg=t=>De(t,"td,th"),fg=(t,e)=>({start:t,end:e}),Dc=_r([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Su=(t,e)=>pr(O(t),"td,th",e),ty=t=>!zt(t.start,t.end),ey=(t,e)=>wc(t.start,e).bind(n=>wc(t.end,e).bind(o=>$r(zt(n,o),n))),gg=t=>e=>ey(e,t).map(n=>({rng:e,table:n,cells:mg(n)})),ny=(t,e,n,o)=>{if(n.collapsed||!t.forall(ty))return w.none();if(e.isSameTable){const r=t.bind(gg(o));return w.some({start:r,end:r})}{const r=Su(n.startContainer,o),s=Su(n.endContainer,o),i=r.bind((l=o,c=>wc(c,l).bind(d=>zn(mg(d)).map(u=>fg(c,u))))).bind(gg(o)),a=s.bind((l=>c=>wc(c,l).bind(d=>Ae(mg(d)).map(u=>fg(u,c))))(o)).bind(gg(o));return w.some({start:i,end:a})}var l},oy=(t,e)=>Xs(t,n=>zt(n,e)),pg=t=>qe(oy(t.cells,t.rng.start),oy(t.cells,t.rng.end),(e,n)=>t.cells.slice(e,n+1)),ry=(t,e)=>{const{startTable:n,endTable:o}=e,r=t.cloneRange();return n.each(s=>r.setStartAfter(s.dom)),o.each(s=>r.setEndBefore(s.dom)),r},sy=t=>W(t,e=>{Te(e,"contenteditable"),Wo(e)}),hg=(t,e,n,o)=>{const r=n.cloneRange();o?(r.setStart(n.startContainer,n.startOffset),r.setEndAfter(e.dom.lastChild)):(r.setStartBefore(e.dom.firstChild),r.setEnd(n.endContainer,n.endOffset)),bg(t,r,e,!1).each(s=>s())},iy=t=>{const e=Fa(t),n=O(t.selection.getNode());_a(n.dom)&&rt(n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),e.length>1&&le(e,o=>zt(o,n))&&fe(n,"data-mce-selected","1")},ay=(t,e,n)=>w.some(()=>{const o=t.selection.getRng(),r=n.bind(({rng:s,isStartInTable:i})=>{const a=w.from((c=t).dom.getParent(i?s.endContainer:s.startContainer,c.dom.isBlock)).map(O);var c;s.deleteContents(),((c,d,u)=>{u.each(f=>{d?ne(f):(Wo(f),c.selection.setCursorLocation(f.dom,0))})})(t,i,a.filter(rt));const l=i?e[0]:e[e.length-1];return hg(t,l,o,i),rt(l)?w.none():w.some(i?e.slice(1):e.slice(0,-1))}).getOr(e);sy(r),iy(t)}),ON=(t,e,n,o)=>w.some(()=>{const r=t.selection.getRng(),s=e[0],i=n[n.length-1];hg(t,s,r,!0),hg(t,i,r,!1);const a=rt(s)?e:e.slice(1),l=rt(i)?n:n.slice(0,-1);sy(a.concat(l)),o.deleteContents(),iy(t)}),bg=(t,e,n,o=!0)=>w.some(()=>{Z0(t,e,n,o)}),TN=(t,e)=>w.some(()=>Di(t,!1,e)),ly=(t,e)=>ye(ns(e,t),di),vg=(t,e)=>ye(ns(e,t),ei("caption")),Nu=(t,e)=>w.some(()=>{Wo(e),t.selection.setCursorLocation(e.dom,0)}),cy=(t,e)=>t?S0(e):N0(e),yg=(t,e)=>{const n=O(t.selection.getStart(!0)),o=Fa(t);return t.selection.isCollapsed()&&0===o.length?((t,e,n)=>{const o=O(t.getBody());return vg(o,n).fold(()=>((r,s,i,a)=>{const l=z.fromRangeStart(r.selection.getRng());return ly(i,a).bind(c=>{return rt(c)?Nu(r,c):(u=i,h=c,g=l,Pa(s,r.getBody(),g).bind(b=>ly(u,O(b.getNode())).bind(p=>zt(p,h)?w.none():w.some(Tt))));var u,h,g})})(t,e,o,n).orThunk(()=>$r(((r,s)=>{const i=z.fromRangeStart(r.selection.getRng());return cy(s,i)||ao(s,r.getBody(),i).exists(a=>cy(s,a))})(t,e),Tt)),r=>((s,i,a,l)=>{const c=z.fromRangeStart(s.selection.getRng());return rt(l)?Nu(s,l):(u=a,h=l,g=c,Pa(f=i,(d=s).getBody(),g).fold(()=>w.some(Tt),b=>{return v=f,_=g,C=b,nn((p=h).dom).bind(k=>Fo(p.dom).map(x=>v?_.isEqual(k)&&C.isEqual(x):_.isEqual(x)&&C.isEqual(k))).getOr(!0)?((p,v)=>Nu(p,v))(d,h):((p,v,_)=>vg(p,O(_.getNode())).fold(()=>w.some(Tt),C=>$r(!zt(C,v),Tt)))(u,h,b);var p,v,_,C}));var d,u,f,h,g})(t,e,o,r))})(t,e,n):((r,s,i)=>{const a=O(r.getBody()),l=r.selection.getRng();return 0!==i.length?ay(r,i,w.none()):(c=r,u=l,vg(d=a,s).fold(()=>{return h=c,((t,e)=>{const n=(s=t,i=>zt(s,i)),o=((s,i)=>{const a=Su(s.startContainer,i),l=Su(s.endContainer,i);return qe(a,l,fg)})(e,n),r=((s,i)=>{const a=h=>wc(O(h),i),l=a(s.startContainer),c=a(s.endContainer),d=l.isSome(),u=c.isSome(),f=qe(l,c,zt).getOr(!1);return{startTable:l,endTable:c,isStartInTable:d,isEndInTable:u,isSameTable:f,isMultiTable:!f&&d&&u}})(e,n);var s;return((s,i,a)=>s.exists(l=>{return d=a,!ty(c=l)&&ey(c,d).exists(u=>{const f=u.dom.rows;return 1===f.length&&1===f[0].cells.length})&&Sf(l.start,i);var c,d}))(o,e,n)?o.map(s=>Dc.singleCellTable(e,s.start)):r.isMultiTable?((s,i,a,l)=>ny(s,i,a,l).bind(({start:c,end:d})=>{const u=c.bind(pg).getOr([]),f=d.bind(pg).getOr([]);if(u.length>0&&f.length>0){const h=ry(a,i);return w.some(Dc.multiTable(u,f,h))}return w.none()}))(o,r,e,n):((s,i,a,l)=>ny(s,i,a,l).bind(({start:c,end:d})=>c.or(d)).bind(c=>{const{isSameTable:d}=i,u=pg(c).getOr([]);if(d&&c.cells.length===u.length)return w.some(Dc.fullTable(c.table));if(u.length>0){if(d)return w.some(Dc.partialTable(u,w.none()));{const f=ry(a,i);return w.some(Dc.partialTable(u,w.some({...i,rng:f})))}}return w.none()}))(o,r,e,n)})(d,u).bind(p=>p.fold(ft(bg,h),ft(TN,h),ft(ay,h),ft(ON,h)));var h},h=>Nu(c,h)));var c,d,u})(t,n,o)},Li=(t,e)=>{let n=e;for(;n&&n!==t;){if(Bn(n)||Zt(n))return n;n=n.parentNode}return null},DN=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],BN=Q.each,_g=t=>{const e=t.dom,n=new Set(t.serializer.getTempAttrs()),o=r=>le(DN,s=>Gt(r,s))||n.has(r);return{compare:(r,s)=>{if(r.nodeName!==s.nodeName||r.nodeType!==s.nodeType)return!1;const i=l=>{const c={};return BN(e.getAttribs(l),d=>{const u=d.nodeName.toLowerCase();"style"===u||o(u)||(c[u]=e.getAttrib(l,u))}),c},a=(l,c)=>{for(const d in l)if(Ot(l,d)){const u=c[d];if(Ne(u)||l[d]!==u)return!1;delete c[d]}for(const d in c)if(Ot(c,d))return!1;return!0};return!(ct(r)&&ct(s)&&(!a(i(r),i(s))||!a(e.parseStyle(e.getAttrib(r,"style")),e.parseStyle(e.getAttrib(s,"style"))))||lo(r)||lo(s))},isAttributeInternal:o}},dy=(t,e,n,o)=>{const r=n.name;for(let s=0,i=t.length;s<i;s++){const a=t[s];if(a.name===r){const l=o.nodes[r];l?l.nodes.push(n):o.nodes[r]={filter:a,nodes:[n]}}}if(n.attributes)for(let s=0,i=e.length;s<i;s++){const a=e[s],l=a.name;if(l in n.attributes.map){const c=o.attributes[l];c?c.nodes.push(n):o.attributes[l]={filter:a,nodes:[n]}}}},uy=(t,e)=>{const n=(o,r)=>{Xt(o,s=>{const i=Ye(s.nodes);W(s.filter.callbacks,a=>{for(let l=i.length-1;l>=0;l--){const c=i[l];(r?void 0!==c.attr(s.filter.name):c.name===s.filter.name)&&!he(c.parent)||i.splice(l,1)}i.length>0&&a(i,s.filter.name,e)})})};n(t.nodes,!1),n(t.attributes,!0)},my=(t,e,n,o={})=>{const r=((s,i,a)=>{const l={nodes:{},attributes:{}};return a.firstChild&&((c,d)=>{let u=c;for(;u=u.walk();)dy(s,i,u,l)})(a),l})(t,e,n);uy(r,o)},Cg=(t,e,n,o)=>{if((t.pad_empty_with_br||e.insert)&&n(o)){const r=new Nn("br",1);e.insert&&r.attr("data-mce-bogus","1"),o.empty().append(r)}else o.empty().append(new Nn("#text",3)).value=Ee},fy=(t,e)=>{const n=t?.firstChild;return ot(n)&&n===t.lastChild&&n.name===e},Bc=(t,e,n,o)=>o.isEmpty(e,n,r=>!0===t.getElementRule(r.name)?.paddEmpty),LN=t=>{let e;for(let n=t;n;n=n.parent){const o=n.attr("contenteditable");if("false"===o)break;"true"===o&&(e=n)}return w.from(e)},wg=(t,e,n=t.parent)=>{if(e.getSpecialElements()[t.name])t.empty().remove();else{const o=t.children();for(const r of o)n&&!e.isValidChild(n.name,r.name)&&wg(r,e,n);t.unwrap()}},Eg=(t,e,n,o=Tt)=>{const r=e.getTextBlockElements(),s=e.getNonEmptyElements(),i=e.getWhitespaceElements(),a=Q.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),l=new Set,c=d=>d!==n&&!a[d.name];for(let d=0;d<t.length;d++){const u=t[d];let f,h,g;if(!u.parent||l.has(u))continue;if(r[u.name]&&"li"===u.parent.name){let p=u.next;for(;p&&r[p.name];)p.name="li",l.add(p),u.parent.insert(p,u.parent),p=p.next;u.unwrap();continue}const b=[u];for(f=u.parent;f&&!e.isValidChild(f.name,u.name)&&c(f);f=f.parent)b.push(f);if(f&&b.length>1)if(e.isValidChild(f.name,u.name)){b.reverse(),h=b[0].clone(),o(h);let p=h;for(let v=0;v<b.length-1;v++){e.isValidChild(p.name,b[v].name)&&v>0?(g=b[v].clone(),o(g),p.append(g)):g=p;for(let _=b[v].firstChild;_&&_!==b[v+1];){const C=_.next;g.append(_),_=C}p=g}Bc(e,s,i,h)?f.insert(u,b[0],!0):(f.insert(h,b[0],!0),f.insert(u,h)),f=b[0],(Bc(e,s,i,f)||fy(f,"br"))&&f.empty().remove()}else wg(u,e);else if(u.parent){if("li"===u.name){let p=u.prev;if(p&&("ul"===p.name||"ol"===p.name)){p.append(u);continue}if(p=u.next,p&&("ul"===p.name||"ol"===p.name)&&p.firstChild){p.insert(u,p.firstChild,!0);continue}const v=new Nn("ul",1);o(v),u.wrap(v);continue}if(e.isValidChild(u.parent.name,"div")&&e.isValidChild("div",u.name)){const p=new Nn("div",1);o(p),u.wrap(p)}else wg(u,e)}}},gy=(t,e,n=e.parent)=>!(!n||!t.children[e.name]||t.isValidChild(n.name,e.name))||!(!n||"a"!==e.name||!((o,r)=>{let s=o;for(;s;){if("a"===s.name)return!0;s=s.parent}return!1})(n)),xg=t=>t.collapsed?t:(e=>{const n=z.fromRangeStart(e),o=z.fromRangeEnd(e),r=e.commonAncestorContainer;return ao(!1,r,o).map(s=>!Cr(n,o,r)&&Cr(n,s,r)?((i,a,l,c)=>{const d=document.createRange();return d.setStart(i,a),d.setEnd(l,c),d})(n.container(),n.offset(),s.container(),s.offset()):e).getOr(e)})(t),kg=(t,e)=>{const n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},py=(t,e)=>{const n=z.after(t),o=Er(e).prev(n);return o?o.toRange():null},FN=["pre"],Sg=_a,jN=(t,e,n)=>{var o,r;const s=t.selection,i=t.dom,a=t.parser,l=n.merge,c=Fs({validate:!0},t.schema),d='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(e=un(e)),-1===e.indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,d);let u=s.getRng();const f=u.startContainer,h=t.getBody();var C,k;f===h&&s.isCollapsed()&&i.isBlock(h.firstChild)&&(C=t,ot(k=h.firstChild)&&!C.schema.getVoidElements()[k.nodeName])&&i.isEmpty(h.firstChild)&&(u=i.createRng(),u.setStart(h.firstChild,0),u.setEnd(h.firstChild,0),s.setRng(u)),s.isCollapsed()||(C=>{const k=C.dom,x=xg(C.selection.getRng());C.selection.setRng(x);const N=k.getParent(x.startContainer,Sg);var D,B,P;D=k,B=x,ot(P=N)&&P===D.getParent(B.endContainer,Sg)&&Sf(O(P),B)?bg(C,x,O(N)):x.startContainer===x.endContainer&&x.endOffset-x.startOffset==1&&X(x.startContainer.childNodes[x.startOffset])?x.deleteContents():C.getDoc().execCommand("Delete",!1)})(t);const g=s.getNode(),b={context:g.nodeName.toLowerCase(),data:n.data,insert:!0},p=a.parse(e,b);if(!0===n.paste&&((t,e)=>{let n=e.firstChild,o=e.lastChild;return n&&"meta"===n.name&&(n=n.next),o&&"mce_marker"===o.attr("id")&&(o=o.prev),((r,s)=>{const i=r.getNonEmptyElements();return ot(s)&&(s.isEmpty(i)||(l=s,r.getBlockElements()[l.name]&&ot((c=l).firstChild)&&c.firstChild===c.lastChild&&(c=>"br"===c.name||c.value===Ee)(l.firstChild)));var l,c})(t,o)&&(o=o?.prev),!(!n||n!==o||"ul"!==n.name&&"ol"!==n.name)})(t.schema,p)&&((C,k)=>!!kg(C,k))(i,g))return u=((t,e,n,o)=>{const r=((u,f,h)=>{const g=f.serialize(h);return(b=>{var p,v;const _=b.firstChild,C=b.lastChild;return _&&"META"===_.nodeName&&(null===(p=_.parentNode)||void 0===p||p.removeChild(_)),C&&"mce_marker"===C.id&&(null===(v=C.parentNode)||void 0===v||v.removeChild(C)),b})(u.createFragment(g))})(e,t,o),s=kg(e,n.startContainer),i=(t=>{return t.length>0&&(!(n=t[t.length-1]).firstChild||ot(null==(e=n)?void 0:e.firstChild)&&e.firstChild===e.lastChild&&((o=e.firstChild).data===Ee||ce(o)))?t.slice(0,-1):t;var o,e,n})(xt(null!==(l=r.firstChild?.childNodes)&&void 0!==l?l:[],u=>"LI"===u.nodeName));var l;const c=e.getRoot(),d=u=>{const f=z.fromRangeStart(n),h=Er(e.getRoot()),b=(1===u?h.prev(f):h.next(f))?.getNode();return!b||kg(e,b)!==s};return s?d(1)?((u,f,h)=>{const g=u.parentNode;return g&&Q.each(f,b=>{g.insertBefore(b,u)}),((b,p)=>{const v=z.before(b),_=Er(p).next(v);return _?_.toRange():null})(u,h)})(s,i,c):d(2)?(u=s,h=c,e.insertAfter((f=i).reverse(),u),py(f[0],h)):((u,f,h,g)=>{const b=((v,_)=>{const C=_.cloneRange(),k=_.cloneRange();return C.setStartBefore(v),k.setEndAfter(v),[C.cloneContents(),k.cloneContents()]})(u,g),p=u.parentNode;return p&&(p.insertBefore(b[0],u),Q.each(f,v=>{p.insertBefore(v,u)}),p.insertBefore(b[1],u),p.removeChild(u)),py(f[f.length-1],h)})(s,i,c,n):null;var u,f,h})(c,i,s.getRng(),p),u&&s.setRng(u),e;!0===n.paste&&((C,k,x,N)=>{var D;const B=k.firstChild,P=k.lastChild,j=B===("bookmark"===P.attr("data-mce-type")?P.prev:P),A=gt(FN,B.name);if(j&&A){const T="false"!==B.attr("contenteditable"),I=(null===(D=C.getParent(x,C.isBlock))||void 0===D?void 0:D.nodeName.toLowerCase())===B.name,q=w.from(Li(N,x)).forall(Bn);return T&&I&&q}return!1})(i,p,g,t.getBody())&&(null===(o=p.firstChild)||void 0===o||o.unwrap()),(C=>{let k=C;for(;k=k.walk();)1===k.type&&k.attr("data-mce-fragment","1")})(p);let v=p.lastChild;if(v&&"mce_marker"===v.attr("id")){const C=v;for(v=v.prev;v;v=v.walk(!0))if(3===v.type||!i.isBlock(v.name)){v.parent&&t.schema.isValidChild(v.parent.name,"span")&&v.parent.insert(C,v,"br"===v.name);break}}if(t._selectionOverrides.showBlockCaretContainer(g),b.invalid){t.selection.setContent(d);let C,k=s.getNode();const x=t.getBody();for(hr(k)?k=C=x:C=k;C&&C!==x;)k=C,C=C.parentNode;e=k===x?x.innerHTML:i.getOuterHTML(k);const N=a.parse(e),D=(T=>{for(let I=T;I;I=I.walk())if("mce_marker"===I.attr("id"))return w.some(I);return w.none()})(N),B=D.bind(LN).getOr(N);D.each(T=>T.replace(p));const P=p.children(),j=null!==(r=p.parent)&&void 0!==r?r:N;p.unwrap();const A=xt(P,T=>gy(t.schema,T,j));Eg(A,t.schema,B),my(a.getNodeFilters(),a.getAttributeFilters(),N),e=c.serialize(N),k===x?i.setHTML(x,e):i.setOuterHTML(k,e)}else e=c.serialize(p),((C,k,x)=>{var N;if("all"===x.getAttribute("data-mce-bogus"))null===(N=x.parentNode)||void 0===N||N.insertBefore(C.dom.createFragment(k),x);else{const D=x.firstChild,B=x.lastChild;!D||D===B&&"BR"===D.nodeName?C.dom.setHTML(x,k):C.selection.setContent(k,{no_events:!0})}})(t,e,g);var _;return((C,k)=>{const x=C.schema.getTextInlineElements(),N=C.dom;if(k){const D=C.getBody(),B=_g(C);Q.each(N.select("*[data-mce-fragment]"),P=>{if(ot(x[P.nodeName.toLowerCase()])&&sr(Zf(N,P),T=>!C0.has(T)))for(let j=P.parentElement;ot(j)&&j!==D&&!mN(N,P,j);j=j.parentElement)if(B.compare(j,P)){N.remove(P,!0);break}})}})(t,l),((C,k)=>{var x,N,D;let B;const P=C.dom,j=C.selection;if(!k)return;j.scrollIntoView(k);const A=Li(C.getBody(),k);if(A&&"false"===P.getContentEditable(A))return P.remove(k),void j.select(A);let T=P.createRng();const I=k.previousSibling;if(X(I)){T.setStart(I,null!==(N=null===(x=I.nodeValue)||void 0===x?void 0:x.length)&&void 0!==N?N:0);const at=k.nextSibling;X(at)&&(I.appendData(at.data),null===(D=at.parentNode)||void 0===D||D.removeChild(at))}else T.setStartBefore(k),T.setEndBefore(k);const q=P.getParent(k,P.isBlock);if(P.remove(k),q&&P.isEmpty(q)){const at=Sg(q);Ss(O(q)),T.setStart(q,0),T.setEnd(q,0),at||q.getAttribute("data-mce-fragment")||!(B=(G=>{let pt=z.fromRangeStart(G);return pt=Er(C.getBody()).next(pt),pt?.toRange()})(T))?P.add(q,P.create("br",at?{}:{"data-mce-bogus":"1"})):(T=B,P.remove(q))}j.setRng(T)})(t,i.get("mce_marker")),_=t.getBody(),Q.each(_.getElementsByTagName("*"),C=>{C.removeAttribute("data-mce-fragment")}),((C,k)=>{w.from(C.getParent(k,"td,th")).map(O).each(qm)})(i,s.getStart()),((C,k,x)=>{const N=Bl(O(x),D=>zt(D,O(k)));ar(N,N.length-2).filter(ln).fold(()=>Bt(C,k),D=>Bt(C,D.dom))})(t.schema,t.getBody(),s.getStart()),e},Au=t=>t instanceof Nn,Ng=(t,e,n)=>{var o;t.dom.setHTML(t.getBody(),e),!0!==n&&Ri(o=t)&&nn(o.getBody()).each(r=>{const s=r.getNode(),i=qo(s)?nn(s).getOr(r):r;o.selection.setRng(i.toRange())})},hy=t=>Ut(t)?t:ee,Ag=(t,e,n)=>{const o=e(t),r=hy(n);return o.orThunk(()=>r(t)?w.none():((s,i,a)=>{let l=s.dom;const c=hy(a);for(;l.parentNode;){l=l.parentNode;const d=O(l),u=i(d);if(u.isSome())return u;if(c(d))break}return w.none()})(t,e,r))},Og=Df,by=(t,e,n)=>{const o=t.formatter.get(n);if(o)for(let r=0;r<o.length;r++){const s=o[r];if(co(s)&&!1===s.inherit&&t.dom.is(e,s.selector))return!0}return!1},Tg=(t,e,n,o,r)=>{const s=t.dom.getRoot();if(e===s)return!1;const i=t.dom.getParent(e,a=>!!by(t,a,n)||a.parentNode===s||!!kr(t,a,n,o,!0));return!!kr(t,i,n,o,r)},Ou=(t,e,n)=>!(!Be(n)||!Og(e,n.inline))||!(!xr(n)||!Og(e,n.block))||!!co(n)&&ct(e)&&t.is(e,n.selector),vy=(t,e,n,o,r,s)=>{const i=n[o],a="attributes"===o;if(Ut(n.onmatch))return n.onmatch(e,n,o);if(i)if(md(i)){for(let l=0;l<i.length;l++)if(a?t.getAttrib(e,i[l]):mu(t,e,i[l]))return!0}else for(const l in i)if(Ot(i,l)){const c=a?t.getAttrib(e,l):mu(t,e,l),d=Is(i[l],s),u=he(c)||Co(c);if(u&&he(d))continue;if(r&&u&&!n.exact||(!r||n.exact)&&!Og(c,Bf(d,l)))return!1}return!0},kr=(t,e,n,o,r)=>{const s=t.formatter.get(n),i=t.dom;if(s&&ct(e))for(let a=0;a<s.length;a++){const l=s[a];if(Ou(t.dom,e,l)&&vy(i,e,l,"attributes",r,o)&&vy(i,e,l,"styles",r,o)){const c=l.classes;if(c)for(let d=0;d<c.length;d++)if(!t.dom.hasClass(e,Is(c[d],o)))return;return l}}},Rg=(t,e,n,o,r)=>{if(o)return Tg(t,o,e,n,r);if(o=t.selection.getNode(),Tg(t,o,e,n,r))return!0;const s=t.selection.getStart();return!(s===o||!Tg(t,s,e,n,r))},yy=t=>(e=>{const n=[];let o=e;for(;o;){if(X(o)&&"\ufeff"!==o.data||o.childNodes.length>1)return[];ct(o)&&n.push(o),o=o.firstChild}return n})(t).length>0,_y=t=>{if(t){const e=new Ce(t,t);for(let n=e.current();n;n=e.next())if(X(n))return n}return null},Dg=t=>{const e=Re("span");return xo(e,{id:_f,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&ge(e,ws("\ufeff")),e},Bg=(t,e,n=!0)=>{const o=t.dom,r=t.selection;if(yy(e))Di(t,!1,O(e),n);else{const s=r.getRng(),i=o.getParent(e,o.isBlock),a=s.startContainer,l=s.startOffset,c=s.endContainer,d=s.endOffset,u=(f=>{const h=_y(f);return h&&"\ufeff"===h.data.charAt(0)&&h.deleteData(0,1),h})(e);o.remove(e,!0),a===u&&l>0&&s.setStart(u,l-1),c===u&&d>0&&s.setEnd(u,d-1),i&&o.isEmpty(i)&&Wo(O(i)),r.setRng(s)}},Lg=(t,e,n=!0)=>{const o=t.dom,r=t.selection;if(e)Bg(t,e,n);else if(!(e=Si(t.getBody(),r.getStart())))for(;e=o.get(_f);)Bg(t,e,n)},Cy=(t,e)=>(t.appendChild(e),e),wy=(t,e)=>{var n;const o=Uo(t,(s,i)=>Cy(s,i.cloneNode(!1)),e),r=null!==(n=o.ownerDocument)&&void 0!==n?n:document;return Cy(o,r.createTextNode("\ufeff"))},Ey=t=>{const e=Dg(!1),n=wy(t,e.dom);return{caretContainer:e,caretPosition:z(n,0)}},xy=(t,e)=>{const{caretContainer:n,caretPosition:o}=Ey(e);return Je(O(t),n),ne(O(t)),o},ky=(t,e)=>{const n=t.schema.getTextInlineElements();return Ot(n,Wt(e))&&!jo(e.dom)&&!Xr(e.dom)},Sy=t=>jo(t.dom)&&yy(t.dom),Lc={},Ny=Ie(["pre"]);((t,e)=>{Lc[t]||(Lc[t]=[]),Lc[t].push(n=>{if(!n.selection.getRng().collapsed){const o=n.selection.getSelectedBlocks(),r=xt(xt(o,Ny),(s=o,i=>{const a=i.previousSibling;return Ny(a)&&gt(s,a)}));W(r,s=>{((i,a)=>{const l=O(a),c=Ho(l).dom;ne(l),Vr(O(i),[Re("br",c),Re("br",c),..._e(l)])})(s.previousSibling,s)})}var s})})("pre");const Ay=["fontWeight","fontStyle","color","fontSize","fontFamily"],Oy=(t,e)=>{const n=t.get(e);return Kt(n)?ye(n,o=>{return Be(o)&&"span"===o.inline&&Pe((r=o).styles)&&le(Xe(r.styles),s=>gt(Ay,s));var r}):w.none()},Ty=(t,e)=>In(e,z.fromRangeStart(t)).isNone(),Ry=(t,e)=>!1===Sn(e,z.fromRangeEnd(t)).exists(n=>!ce(n.getNode())||Sn(e,n).isSome()),Dy=t=>e=>$m(e)&&t.isEditable(e),By=t=>xt(t.getSelectedBlocks(),Dy(t.dom)),Pg=Q.each,Mg=t=>ct(t)&&!lo(t)&&!jo(t)&&!Xr(t),Ly=(t,e)=>{for(let n=t;n;n=n[e]){if(X(n)&&Qe(n.data))return t;if(ct(n)&&!lo(n))return n}return t},Py=(t,e,n)=>{const o=_g(t),r=ct(e)&&Ni(e),s=ct(n)&&Ni(n);if(r&&s){const i=Ly(e,"previousSibling"),a=Ly(n,"nextSibling");if(o.compare(i,a)){for(let l=i.nextSibling;l&&l!==a;){const c=l;l=l.nextSibling,i.appendChild(c)}return t.dom.remove(a),Q.each(Q.grep(a.childNodes),l=>{i.appendChild(l)}),i}}return n},My=(t,e,n,o)=>{var r;if(o&&!1!==e.merge_siblings){const s=null!==(r=Py(t,cv(o),o))&&void 0!==r?r:o;Py(t,s,cv(s,!0))}},Ig=(t,e,n)=>{Pg(t.childNodes,o=>{Mg(o)&&(e(o)&&n(o),o.hasChildNodes()&&Ig(o,e,n))})},Iy=(t,e)=>n=>!(!n||!mu(t,n,e)),Fy=(t,e,n)=>o=>{var r,s;t.setStyle(o,e,n),""===o.getAttribute("style")&&o.removeAttribute("style"),r=t,"SPAN"===(s=o).nodeName&&0===r.getAttribs(s).length&&r.remove(s,!0)},Pi=_r([{keep:[]},{rename:["name"]},{removed:[]}]),zN=/^(src|href|style)$/,Fg=Q.each,Tu=Df,jy=(t,e,n)=>t.isChildOf(e,n)&&e!==n&&!t.isBlock(n),$y=(t,e,n)=>{let o=e[n?"startContainer":"endContainer"],r=e[n?"startOffset":"endOffset"];if(ct(o)){const s=o.childNodes.length-1;!n&&r&&r--,o=o.childNodes[r>s?s:r]}return X(o)&&n&&r>=o.data.length&&(o=new Ce(o,t.getBody()).next()||o),X(o)&&!n&&0===r&&(o=new Ce(o,t.getBody()).prev()||o),o},Uy=(t,e)=>{const n=e?"firstChild":"lastChild",o=t[n];return/^(TR|TH|TD)$/.test(t.nodeName)&&o?"TR"===t.nodeName&&o[n]||o:t},jg=(t,e,n,o)=>{var r;const s=t.create(n,o);return null===(r=e.parentNode)||void 0===r||r.insertBefore(s,e),s.appendChild(e),s},zy=(t,e,n,o,r)=>{const s=O(e),i=O(t.create(o,r)),a=n?kd(s):fr(s);return Vr(i,a),n?(Je(s,i),Dd(i,s)):(Ro(s,i),ge(i,s)),i.dom},Hy=(t,e,n)=>{const o=e.parentNode;let r;const s=t.dom,i=en(t);var a;xr(n)&&o===s.getRoot()&&(n.list_block&&Tu(e,n.list_block)||W(Ye(e.childNodes),a=>{ja(t,i,a.nodeName.toLowerCase())?r?r.appendChild(a):(r=jg(s,a,i),s.setAttribs(r,gc(t))):r=null})),co(a=n)&&Be(a)&&Eo(Jt(a,"mixed"),!0)&&!Tu(n.inline,e)||s.remove(e,!0)},qy=(t,e,n)=>Tn(t)?{name:e,value:null}:{name:t,value:Is(e,n)},Vy=(t,e)=>{""===t.getAttrib(e,"style")&&(e.removeAttribute("style"),e.removeAttribute("data-mce-style"))},Wy=(t,e,n,o,r)=>{let s=!1;Fg(n.styles,(i,a)=>{const{name:l,value:c}=qy(a,i,o),d=Bf(c,l);(n.remove_similar||se(c)||!ct(r)||Tu(mu(t,r,l),d))&&t.setStyle(e,l,""),s=!0}),s&&Vy(t,e)},Ky=(t,e,n,o,r)=>{const s=t.dom,i=_g(t),a=t.schema;if(Be(e)&&de(a,e.inline)&&Ht(a,o)&&o.parentElement===t.getBody())return Hy(t,o,e),Pi.removed();if(!e.ceFalseOverride&&o&&"false"===s.getContentEditableParent(o)||o&&!Ou(s,o,e)&&(!e.links||"A"!==o.nodeName))return Pi.keep();const l=o,c=e.preserve_attributes;if(Be(e)&&"all"===e.remove&&Kt(c)){const d=xt(s.getAttribs(l),u=>gt(c,u.name.toLowerCase()));if(s.removeAllAttribs(l),W(d,u=>s.setAttrib(l,u.name,u.value)),d.length>0)return Pi.rename("span")}if("all"!==e.remove){Wy(s,l,e,n,r),Fg(e.attributes,(u,f)=>{const{name:h,value:g}=qy(f,u,n);if(e.remove_similar||se(g)||!ct(r)||Tu(s.getAttrib(r,h),g)){if("class"===h){const b=s.getAttrib(l,h);if(b){let p="";if(W(b.split(/\s+/),v=>{/mce\-\w+/.test(v)&&(p+=(p?" ":"")+v)}),p)return void s.setAttrib(l,h,p)}}if(zN.test(h)&&l.removeAttribute("data-mce-"+h),"style"===h&&Ie(["li"])(l)&&"none"===s.getStyle(l,"list-style-type"))return l.removeAttribute(h),void s.setStyle(l,"list-style-type","none");"class"===h&&l.removeAttribute("className"),l.removeAttribute(h)}}),Fg(e.classes,u=>{u=Is(u,n),ct(r)&&!s.hasClass(r,u)||s.removeClass(l,u)});const d=s.getAttribs(l);for(let u=0;u<d.length;u++)if(!i.isAttributeInternal(d[u].nodeName))return Pi.keep()}return"none"!==e.remove?(Hy(t,l,e),Pi.removed()):Pi.keep()},HN=(t,e,n,o)=>Ky(t,e,n,o,o).fold(st(o),r=>(t.dom.createFragment().appendChild(o),t.dom.rename(o,r)),st(null)),Yy=(t,e,n,o,r)=>{(o||t.selection.isEditable())&&((s,i,a,l,c)=>{const d=s.formatter.get(i),u=d[0],f=s.dom,h=s.selection,g=C=>{const k=((x,N,D,B,P)=>{let j;return N.parentNode&&W(fu(x.dom,N.parentNode).reverse(),A=>{if(!j&&ct(A)&&"_start"!==A.id&&"_end"!==A.id){const T=kr(x,A,D,B,P);T&&!1!==T.split&&(j=A)}}),j})(s,C,i,a,c);return((x,N,D,B,P,j,A,T)=>{var I,q;let at,G;const pt=x.dom;if(D){const mt=D.parentNode;for(let kt=B.parentNode;kt&&kt!==mt;kt=kt.parentNode){let St=pt.clone(kt,!1);for(let dt=0;dt<N.length&&(St=HN(x,N[dt],T,St),null!==St);dt++);St&&(at&&St.appendChild(at),G||(G=St),at=St)}A.mixed&&pt.isBlock(D)||(B=null!==(I=pt.split(D,B))&&void 0!==I?I:B),at&&G&&(null===(q=P.parentNode)||void 0===q||q.insertBefore(at,P),G.appendChild(P),Be(A)&&My(x,A,0,at))}return B})(s,d,k,C,C,0,u,a)},b=C=>le(d,k=>Pc(s,k,a,C,C)),p=C=>{const k=Ye(C.childNodes),x=b(C)||le(d,D=>Ou(f,C,D)),N=C.parentNode;if(!x&&ot(N)&&Pf(u)&&b(N),u.deep&&k.length)for(let D=0;D<k.length;D++)p(k[D]);W(["underline","line-through","overline"],D=>{ct(C)&&s.dom.getStyle(C,"text-decoration")===D&&C.parentNode&&uv(f,C.parentNode)===D&&Pc(s,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:D}},void 0,C)})},v=C=>{const k=f.get(C?"_start":"_end");if(k){let x=k[C?"firstChild":"lastChild"];return lo(N=x)&&ct(N)&&("_start"===N.id||"_end"===N.id)&&(x=x[C?"firstChild":"lastChild"]),X(x)&&0===x.data.length&&(x=C?k.previousSibling||k.nextSibling:k.nextSibling||k.previousSibling),f.remove(k,!0),x}var N;return null},_=C=>{let k,x,N=Ai(f,C,d,C.collapsed);if(u.split){if(N=_u(N),k=$y(s,N,!0),x=$y(s,N),k!==x){if(k=Uy(k,!0),x=Uy(x,!1),jy(f,k,x)){const B=w.from(k.firstChild).getOr(k);return g(zy(f,B,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void v(!0)}if(jy(f,x,k)){const B=w.from(x.lastChild).getOr(x);return g(zy(f,B,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void v(!1)}k=jg(f,k,"span",{id:"_start","data-mce-type":"bookmark"}),x=jg(f,x,"span",{id:"_end","data-mce-type":"bookmark"});const D=f.createRng();D.setStartAfter(k),D.setEndBefore(x),xc(f,D,B=>{W(B,P=>{lo(P)||lo(P.parentNode)||g(P)})}),g(k),g(x),k=v(!0),x=v()}else k=x=g(k);N.startContainer=k.parentNode?k.parentNode:k,N.startOffset=f.nodeIndex(k),N.endContainer=x.parentNode?x.parentNode:x,N.endOffset=f.nodeIndex(x)+1}xc(f,N,D=>{W(D,p)})};if(l){if(Ec(l)){const C=f.createRng();C.setStartBefore(l),C.setEndAfter(l),_(C)}else _(l);Nv(s,i,l,a)}else h.isCollapsed()&&Be(u)&&!Fa(s).length?((t,e,n,o)=>{const r=t.dom,s=t.selection;let i=!1;const a=t.formatter.get(e);if(!a)return;const l=s.getRng(),c=l.startContainer,d=l.startOffset;let u=c;X(c)&&(d!==c.data.length&&(i=!0),u=u.parentNode);const f=[];let h;for(;u;){if(kr(t,u,e,n,o)){h=u;break}u.nextSibling&&(i=!0),f.push(u),u=u.parentNode}if(h)if(i){const g=s.getBookmark();l.collapse(!0);let b=Ai(r,l,a,!0);b=_u(b),t.formatter.remove(e,n,b,o),s.moveToBookmark(g)}else{const g=Si(t.getBody(),h),b=Dg(!1).dom;((_,C,k)=>{var x,N;const D=_.dom,B=D.getParent(k,ft(Tf,_.schema));B&&D.isEmpty(B)?null===(x=k.parentNode)||void 0===x||x.replaceChild(C,k):((P=>{const j=De(P,"br"),A=xt((T=>{const I=[];let q=T.dom;for(;q;)I.push(O(q)),q=q.lastChild;return I})(P).slice(-1),ro);j.length===A.length&&W(A,ne)})(O(k)),D.isEmpty(k)?null===(N=k.parentNode)||void 0===N||N.replaceChild(C,k):D.insertAfter(C,k))})(t,b,g??h);const p=((_,C,k,x,N,D)=>{const B=_.formatter,P=_.dom,j=xt(Xe(B.get()),T=>T!==x&&!be(T,"removeformat")),A=(T=_,I=k,Me(j,(at,G)=>{const pt=Lf(T,G,St=>{const dt=wt=>Ut(wt)||wt.length>1&&"%"===wt.charAt(0);return le(["styles","attributes"],wt=>Jt(St,wt).exists(Nt=>{const R=Kt(Nt)?Nt:Gi(Nt);return le(R,dt)}))});return T.formatter.matchNode(I,G,{},pt)?at.concat([G]):at},[]));var T,I;if(xt(A,T=>!((I,q,at)=>{const G=["inline","block","selector","attributes","styles","classes"],pt=mt=>ms(mt,(kt,St)=>le(G,dt=>dt===St));return Lf(I,q,mt=>{const kt=pt(mt);return Lf(I,at,St=>{const dt=pt(St);return((wt,Nt,R=Jn)=>cl(R).eq(wt,Nt))(kt,dt)})})})(_,T,x)).length>0){const T=k.cloneNode(!1);return P.add(C,T),B.remove(x,N,T,D),P.remove(T),w.some(T)}return w.none()})(t,b,h,e,n,o),v=wy(f.concat(p.toArray()),b);g&&Bg(t,g,!1),s.setCursorLocation(v,1),r.isEmpty(h)&&r.remove(h)}})(s,i,a,c):(lv(s,()=>Af(s,_),C=>Be(u)&&Rg(s,i,a,C)),s.nodeChanged()),C=s,x=a,"removeformat"===(k=i)?W(By(C.selection),N=>{W(Ay,D=>C.dom.setStyle(N,D,"")),Vy(C.dom,N)}):Oy(C.formatter,k).each(N=>{W(By(C.selection),D=>Wy(C.dom,D,N,x,null))}),Nv(s,i,l,a);var C,k,x})(t,e,n,o,r)},Pc=(t,e,n,o,r)=>Ky(t,e,n,o,r).fold(ee,s=>(t.dom.rename(o,s),!0),me),Xy=Q.each,Ru=Q.each,Gy=(t,e,n,o)=>{if(Ru(n.styles,(r,s)=>{t.setStyle(e,s,Is(r,o))}),n.styles){const r=t.getAttrib(e,"style");r&&t.setAttrib(e,"data-mce-style",r)}},qN=(t,e,n,o)=>{const r=t.formatter.get(e),s=r[0],i=!o&&t.selection.isCollapsed(),a=t.dom,l=t.selection,c=(g,b=s)=>{Ut(b.onformat)&&b.onformat(g,b,n,o),Gy(a,g,b,n),Ru(b.attributes,(p,v)=>{a.setAttrib(g,v,Is(p,n))}),Ru(b.classes,p=>{const v=Is(p,n);a.hasClass(g,v)||a.addClass(g,v)})},d=(g,b)=>{let p=!1;return Ru(g,v=>!(!co(v)||("false"!==a.getContentEditable(b)||v.ceFalseOverride)&&(!ot(v.collapsed)||v.collapsed===i)&&a.is(b,v.selector)&&!jo(b)&&(c(b,v),p=!0,1))),p},f=(g,b,p)=>{const v=[];let _=!0;const C=s.inline||s.block,k=(g=>{if(ht(g)){const b=a.create(g);return c(b),b}return null})(C);xc(g,b,x=>{let N;const D=B=>{let P=!1,j=_,A=!1;const T=B.parentNode,I=T.nodeName.toLowerCase(),q=g.getContentEditable(B);ot(q)&&(j=_,_="true"===q,P=!0,A=dv(t,B));const at=_&&!P;if(ce(B)&&!((G,pt,mt,kt)=>{if(Ek(G)&&Be(pt)&&mt.parentNode){const St=Kd(G.schema),dt=((t,e)=>((n,o)=>{const r=n.dom;return r.parentNode?(s=O(r.parentNode),ye(s.dom.childNodes,a=>(s=>!zt(n,s)&&o(s))(O(a))).map(O)):w.none();var s})(t,e).isSome())(O(mt),wt=>jo(wt.dom));return gs(St,kt)&&rt(O(mt.parentNode),!1)&&!dt}return!1})(t,s,B,I))return N=null,void(xr(s)&&g.remove(B));if(G=B,xr(pt=s)&&!0===pt.wrapper&&kr(t,G,e,n))N=null;else{if(((G,pt,mt)=>{const kt=xr(St=s)&&!0!==St.wrapper&&Tf(t.schema,G)&&ja(t,pt,C);var St;return mt&&kt})(B,I,at)){const G=g.rename(B,C);return c(G),v.push(G),void(N=null)}if(co(s)){let G=d(r,B);if(!G&&ot(T)&&Pf(s)&&(G=d(r,T)),!Be(s)||G)return void(N=null)}ot(k)&&((G,pt,mt,kt)=>{const St=G.nodeName.toLowerCase(),dt=ja(t,C,St)&&ja(t,pt,C),wt=!p&&X(G)&&As(G.data),Nt=jo(G),R=!Be(s)||!g.isBlock(G);return(mt||kt)&&dt&&!wt&&!Nt&&R})(B,I,at,A)?(N||(N=g.clone(k,!1),T.insertBefore(N,B),v.push(N)),A&&P&&(_=j),N.appendChild(B)):(N=null,W(Ye(B.childNodes),D),P&&(_=j),N=null)}var G,pt};W(x,D)}),!0===s.links&&W(v,x=>{const N=D=>{"A"===D.nodeName&&c(D,s),W(Ye(D.childNodes),N)};N(x)}),W(v,x=>{const N=(D=>{let B=0;return W(D.childNodes,P=>{var j;ot(j=P)&&X(j)&&0===j.length||lo(P)||B++}),B})(x);var D;!(v.length>1)&&g.isBlock(x)||0!==N?(Be(s)||xr(s)&&s.wrapper)&&(s.exact||1!==N||(x=ye((D=x).childNodes,Of).filter(P=>"false"!==g.getContentEditable(P)&&Ou(g,P,s)).map(P=>{const j=g.clone(P,!1);return c(j),g.replace(j,D,!0),g.remove(P,!0),j}).getOr(D)),((D,B,P,j)=>{Xy(B,A=>{var T,I,q;Be(A)&&Xy(D.dom.select(A.inline,j),T=>{Mg(T)&&Pc(D,A,P,T,A.exact?T:null)}),T=D.dom,q=j,(I=A).clear_child_styles&&Pg(T.select(I.links?"*:not(a)":"*",q),G=>{Mg(G)&&Ni(G)&&Pg(I.styles,(pt,mt)=>{T.setStyle(G,mt,"")})})})})(t,r,n,x),((D,B,P,j,A)=>{const T=A.parentNode;kr(D,T,P,j)&&Pc(D,B,j,A)||B.merge_with_parents&&T&&D.dom.getParent(T,I=>!!kr(D,I,P,j)&&(Pc(D,B,j,A),!0))})(t,s,e,n,x),((D,B,P,j)=>{if(B.styles&&B.styles.backgroundColor){const A=Iy(D,"fontSize");Ig(j,T=>A(T)&&Ni(T),Fy(D,"backgroundColor",Is(B.styles.backgroundColor,P)))}})(g,s,n,x),((D,B,P,j)=>{const A=T=>{if(ct(T)&&ct(T.parentNode)&&Ni(T)){const I=uv(D,T.parentNode);D.getStyle(T,"color")&&I?D.setStyle(T,"text-decoration",I):D.getStyle(T,"text-decoration")===I&&D.setStyle(T,"text-decoration",null)}};B.styles&&(B.styles.color||B.styles.textDecoration)&&(Q.walk(j,A,"childNodes"),A(j))})(g,s,0,x),((D,B,P,j)=>{if(Be(B)&&("sub"===B.inline||"sup"===B.inline)){const A=Iy(D,"fontSize");Ig(j,I=>A(I)&&Ni(I),Fy(D,"fontSize",""));const T=xt(D.select("sup"===B.inline?"sub":"sup",j),Ni);D.remove(T,!0)}})(g,s,0,x),My(t,s,0,x)):g.remove(x,!0)})},h=Ec(o)?o:l.getNode();if("false"===a.getContentEditable(h)&&!dv(t,h))return d(r,o=h),void Sv(t,e,o,n);if(s){if(o)if(Ec(o)){if(!d(r,o)){const g=a.createRng();g.setStartBefore(o),g.setEndAfter(o),f(a,Ai(a,g,r),!0)}}else f(a,o,!0);else i&&Be(s)&&!Fa(t).length?((g,b,p)=>{let v;const _=g.selection,C=g.formatter.get(b);if(!C)return;const k=_.getRng();let x=k.startOffset;const N=k.startContainer.nodeValue;v=Si(g.getBody(),_.getStart());const D=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(N&&x>0&&x<N.length&&D.test(N.charAt(x))&&D.test(N.charAt(x-1))){const j=_.getBookmark();k.collapse(!0);let A=Ai(g.dom,k,C);A=_u(A),g.formatter.apply(b,p,A),_.moveToBookmark(j)}else{let j=v?_y(v):null;v&&"\ufeff"===j?.data||(B=g.getDoc(),P=Dg(!0).dom,v=B.importNode(P,!0),j=v.firstChild,k.insertNode(v),x=1),g.formatter.apply(b,p,v),_.setCursorLocation(j,x)}var B,P})(t,e,n):(l.setRng(xg(l.getRng())),lv(t,()=>{Af(t,(g,b)=>{const p=b?g:Ai(a,g,r);f(a,p,!1)})},me),t.nodeChanged()),Oy(t.formatter,e).each(g=>{var b;W(xt((p=>{const v=p.getSelectedBlocks(),_=p.getRng();if(p.isCollapsed())return[];if(1===v.length)return Ty(_,v[0])&&Ry(_,v[0])?v:[];{const C=Ae(v).filter(N=>Ty(_,N)).toArray(),k=zn(v).filter(N=>Ry(_,N)).toArray(),x=v.slice(1,-1);return C.concat(x).concat(k)}})(b=t.selection),Dy(b.dom)),b=>Gy(a,b,g,n))});b=t,Ot(Lc,g=e)&&W(Lc[g],p=>{p(b)})}var g,b;Sv(t,e,o,n)},Qy=(t,e,n,o)=>{(o||t.selection.isEditable())&&qN(t,e,n,o)},Jy=t=>Ot(t,"vars"),Zy=t=>t.selection.getStart(),t_=(t,e,n,o,r)=>ld(e,s=>{const i=t.formatter.matchNode(s,n,r??{},o);return!Ne(i)},s=>!!by(t,s,n)||!o&&ot(t.formatter.matchNode(s,n,r,!0))),e_=(t,e)=>{const n=e??Zy(t);return xt(fu(t.dom,n),o=>ct(o)&&!Xr(o))},n_=(t,e,n)=>{const o=e_(t,e);Xt(n,(r,s)=>{const i=a=>{const l=t_(t,o,s,a.similar,Jy(a)?a.vars:void 0),c=l.isSome();if(a.state.get()!==c){a.state.set(c);const d=l.getOr(e);Jy(a)?a.callback(c,{node:d,format:s,parents:o}):W(a.callbacks,u=>u(c,{node:d,format:s,parents:o}))}};W([r.withSimilar,r.withoutSimilar],i),W(r.withVars,i)})},o_=Q.explode,r_=()=>{const t={};return{addFilter:(e,n)=>{W(o_(e),o=>{Ot(t,o)||(t[o]={name:o,callbacks:[]}),t[o].callbacks.push(n)})},getFilters:()=>Gi(t),removeFilter:(e,n)=>{W(o_(e),o=>{if(Ot(t,o))if(ot(n)){const r=t[o],s=xt(r.callbacks,i=>i!==n);s.length>0?r.callbacks=s:delete t[o]}else delete t[o]})}}},s_=(t,e,n)=>{e.addNodeFilter("br",(o,r,s)=>{const i=Q.extend({},n.getBlockElements()),a=n.getNonEmptyElements(),l=n.getWhitespaceElements();i.body=1;const c=d=>d.name in i||qt(n,d);for(let d=0,u=o.length;d<u;d++){let f=o[d],h=f.parent;if(h&&c(h)&&f===h.lastChild){let g=f.prev;for(;g;){const b=g.name;if("span"!==b||"bookmark"!==g.attr("data-mce-type")){"br"===b&&(f=null);break}g=g.prev}if(f&&(f.remove(),Bc(n,a,l,h))){const b=n.getElementRule(h.name);b&&(b.removeEmpty?h.remove():b.paddEmpty&&Cg(t,s,c,h))}}else{let g=f;for(;h&&h.firstChild===g&&h.lastChild===g&&(g=h,!i[h.name]);)h=h.parent;if(g===h){const b=new Nn("#text",3);b.value=Ee,f.replace(b)}}}})},$g=t=>{const[e,...n]=t.split(","),o=n.join(","),r=/data:([^/]+\/[^;]+)(;.+)?/.exec(e);if(r){const s=";base64"===r[2],i=s?(a=>{const l=/([a-z0-9+\/=\s]+)/i.exec(a);return l?l[1]:""})(o):decodeURIComponent(o);return w.some({type:r[1],data:i,base64Encoded:s})}return w.none()},i_=(t,e,n=!0)=>{let o=e;if(n)try{o=atob(e)}catch{return w.none()}const r=new Uint8Array(o.length);for(let s=0;s<r.length;s++)r[s]=o.charCodeAt(s);return w.some(new Blob([r],{type:t}))},a_=t=>new Promise((e,n)=>{const o=new FileReader;o.onloadend=()=>{e(o.result)},o.onerror=()=>{var r;n(null===(r=o.error)||void 0===r?void 0:r.message)},o.readAsDataURL(t)});let WN=0;const l_=(t,e,n)=>$g(t).bind(({data:o,type:r,base64Encoded:s})=>{if(e&&!s)return w.none();{const i=s?o:btoa(o);return n(i,r)}}),c_=(t,e,n)=>{const o=t.create("blobid"+WN++,e,n);return t.add(o),o},d_=(t,e,n=!1)=>l_(e,n,(o,r)=>w.from(t.getByData(o,r)).orThunk(()=>i_(r,o).map(s=>c_(t,s,o))));function Mi(t){return(Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function Ug(t,e){return(Ug=Object.setPrototypeOf||function(n,o){return n.__proto__=o,n})(t,e)}function zg(t,e,n){return(zg=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(o,r,s){var i=[null];i.push.apply(i,r);var a=new(Function.bind.apply(o,i));return s&&Ug(a,s.prototype),a}).apply(null,arguments)}function Go(t){return function(e){if(Array.isArray(e))return Hg(e)}(t)||function(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,n){if(e){if("string"==typeof e)return Hg(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Hg(e,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var YN=Object.hasOwnProperty,u_=Object.setPrototypeOf,XN=Object.isFrozen,GN=Object.getPrototypeOf,QN=Object.getOwnPropertyDescriptor,Fn=Object.freeze,Sr=Object.seal,JN=Object.create,m_=typeof Reflect<"u"&&Reflect,Du=m_.apply,qg=m_.construct;Du||(Du=function(t,e,n){return t.apply(e,n)}),Fn||(Fn=function(t){return t}),Sr||(Sr=function(t){return t}),qg||(qg=function(t,e){return zg(t,Go(e))});var f_,ZN=Qo(Array.prototype.forEach),tA=Qo(Array.prototype.pop),Mc=Qo(Array.prototype.push),Bu=Qo(String.prototype.toLowerCase),eA=Qo(String.prototype.match),Hs=Qo(String.prototype.replace),nA=Qo(String.prototype.indexOf),oA=Qo(String.prototype.trim),jn=Qo(RegExp.prototype.test),Vg=(f_=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return qg(f_,e)});function Qo(t){return function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return Du(t,e,o)}}function Vt(t,e){u_&&u_(t,null);for(var n=e.length;n--;){var o=e[n];if("string"==typeof o){var r=Bu(o);r!==o&&(XN(e)||(e[n]=r),o=r)}t[o]=!0}return t}function Ii(t){var e,n=JN(null);for(e in t)Du(YN,t,[e])&&(n[e]=t[e]);return n}function Lu(t,e){for(;null!==t;){var n=QN(t,e);if(n){if(n.get)return Qo(n.get);if("function"==typeof n.value)return Qo(n.value)}t=GN(t)}return function(o){return console.warn("fallback value for",o),null}}var g_=Fn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Wg=Fn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Kg=Fn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),rA=Fn(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Yg=Fn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),sA=Fn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),p_=Fn(["#text"]),h_=Fn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Xg=Fn(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),b_=Fn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Pu=Fn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),iA=Sr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),aA=Sr(/<%[\w\W]*|[\w\W]*%>/gm),lA=Sr(/^data-[\-\w.\u00B7-\uFFFF]/),cA=Sr(/^aria-[\-\w]+$/),dA=Sr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),uA=Sr(/^(?:\w+script|data):/i),mA=Sr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),fA=Sr(/^html$/i),gA=function(){return typeof window>"u"?null:window},pA=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gA(),n=function(F){return t(F)};if(n.version="2.3.8",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;var o=e.document,r=e.document,s=e.DocumentFragment,i=e.HTMLTemplateElement,a=e.Node,l=e.Element,c=e.NodeFilter,d=e.NamedNodeMap,u=void 0===d?e.NamedNodeMap||e.MozNamedAttrMap:d,f=e.HTMLFormElement,h=e.DOMParser,g=e.trustedTypes,b=l.prototype,p=Lu(b,"cloneNode"),v=Lu(b,"nextSibling"),_=Lu(b,"childNodes"),C=Lu(b,"parentNode");if("function"==typeof i){var k=r.createElement("template");k.content&&k.content.ownerDocument&&(r=k.content.ownerDocument)}var x=function(F,At){if("object"!==Mi(F)||"function"!=typeof F.createPolicy)return null;var vt=null,te="data-tt-policy-suffix";At.currentScript&&At.currentScript.hasAttribute(te)&&(vt=At.currentScript.getAttribute(te));var Se="dompurify"+(vt?"#"+vt:"");try{return F.createPolicy(Se,{createHTML:function(on){return on}})}catch{return console.warn("TrustedTypes policy "+Se+" could not be created."),null}}(g,o),N=x?x.createHTML(""):"",D=r,B=D.implementation,P=D.createNodeIterator,j=D.createDocumentFragment,A=D.getElementsByTagName,T=o.importNode,I={};try{I=Ii(r).documentMode?r.documentMode:{}}catch{}var q={};n.isSupported="function"==typeof C&&B&&void 0!==B.createHTMLDocument&&9!==I;var at,G,pt=iA,mt=aA,kt=lA,St=cA,dt=uA,wt=mA,Nt=dA,R=null,L=Vt({},[].concat(Go(g_),Go(Wg),Go(Kg),Go(Yg),Go(p_))),H=null,V=Vt({},[].concat(Go(h_),Go(Xg),Go(b_),Go(Pu))),M=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Y=null,J=null,tt=!0,et=!0,Z=!1,Et=!1,Ft=!1,bn=!1,ke=!1,pe=!1,vn=!1,ho=!1,We=!0,ss=!0,Le=!1,tr={},Rr=null,Ws=Vt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),rl=null,Am=Vt({},["audio","video","img","source","image","track"]),is=null,as=Vt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),sl="http://www.w3.org/1998/Math/MathML",Gn="http://www.w3.org/2000/svg",bo="http://www.w3.org/1999/xhtml",Dr=bo,rd=!1,ZR=["application/xhtml+xml","text/html"],il=null,tD=r.createElement("form"),Sx=function(F){return F instanceof RegExp||F instanceof Function},Eh=function(F){il&&il===F||(F&&"object"===Mi(F)||(F={}),F=Ii(F),R="ALLOWED_TAGS"in F?Vt({},F.ALLOWED_TAGS):L,H="ALLOWED_ATTR"in F?Vt({},F.ALLOWED_ATTR):V,is="ADD_URI_SAFE_ATTR"in F?Vt(Ii(as),F.ADD_URI_SAFE_ATTR):as,rl="ADD_DATA_URI_TAGS"in F?Vt(Ii(Am),F.ADD_DATA_URI_TAGS):Am,Rr="FORBID_CONTENTS"in F?Vt({},F.FORBID_CONTENTS):Ws,Y="FORBID_TAGS"in F?Vt({},F.FORBID_TAGS):{},J="FORBID_ATTR"in F?Vt({},F.FORBID_ATTR):{},tr="USE_PROFILES"in F&&F.USE_PROFILES,tt=!1!==F.ALLOW_ARIA_ATTR,et=!1!==F.ALLOW_DATA_ATTR,Z=F.ALLOW_UNKNOWN_PROTOCOLS||!1,Et=F.SAFE_FOR_TEMPLATES||!1,Ft=F.WHOLE_DOCUMENT||!1,pe=F.RETURN_DOM||!1,vn=F.RETURN_DOM_FRAGMENT||!1,ho=F.RETURN_TRUSTED_TYPE||!1,ke=F.FORCE_BODY||!1,We=!1!==F.SANITIZE_DOM,ss=!1!==F.KEEP_CONTENT,Le=F.IN_PLACE||!1,Nt=F.ALLOWED_URI_REGEXP||Nt,Dr=F.NAMESPACE||bo,F.CUSTOM_ELEMENT_HANDLING&&Sx(F.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(M.tagNameCheck=F.CUSTOM_ELEMENT_HANDLING.tagNameCheck),F.CUSTOM_ELEMENT_HANDLING&&Sx(F.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(M.attributeNameCheck=F.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),F.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof F.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(M.allowCustomizedBuiltInElements=F.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),at=at=-1===ZR.indexOf(F.PARSER_MEDIA_TYPE)?"text/html":F.PARSER_MEDIA_TYPE,G="application/xhtml+xml"===at?function(At){return At}:Bu,Et&&(et=!1),vn&&(pe=!0),tr&&(R=Vt({},Go(p_)),H=[],!0===tr.html&&(Vt(R,g_),Vt(H,h_)),!0===tr.svg&&(Vt(R,Wg),Vt(H,Xg),Vt(H,Pu)),!0===tr.svgFilters&&(Vt(R,Kg),Vt(H,Xg),Vt(H,Pu)),!0===tr.mathMl&&(Vt(R,Yg),Vt(H,b_),Vt(H,Pu))),F.ADD_TAGS&&(R===L&&(R=Ii(R)),Vt(R,F.ADD_TAGS)),F.ADD_ATTR&&(H===V&&(H=Ii(H)),Vt(H,F.ADD_ATTR)),F.ADD_URI_SAFE_ATTR&&Vt(is,F.ADD_URI_SAFE_ATTR),F.FORBID_CONTENTS&&(Rr===Ws&&(Rr=Ii(Rr)),Vt(Rr,F.FORBID_CONTENTS)),ss&&(R["#text"]=!0),Ft&&Vt(R,["html","head","body"]),R.table&&(Vt(R,["tbody"]),delete Y.tbody),Fn&&Fn(F),il=F)},Nx=Vt({},["mi","mo","mn","ms","mtext"]),Ax=Vt({},["foreignobject","desc","title","annotation-xml"]),eD=Vt({},["title","style","font","a","script"]),Om=Vt({},Wg);Vt(Om,Kg),Vt(Om,rA);var xh=Vt({},Yg);Vt(xh,sA);var ls=function(F){Mc(n.removed,{element:F});try{F.parentNode.removeChild(F)}catch{try{F.outerHTML=N}catch{F.remove()}}},Tm=function(F,At){try{Mc(n.removed,{attribute:At.getAttributeNode(F),from:At})}catch{Mc(n.removed,{attribute:null,from:At})}if(At.removeAttribute(F),"is"===F&&!H[F])if(pe||vn)try{ls(At)}catch{}else try{At.setAttribute(F,"")}catch{}},Ox=function(F){var At,vt;if(ke)F="<remove></remove>"+F;else{var te=eA(F,/^[\r\n\t ]+/);vt=te&&te[0]}"application/xhtml+xml"===at&&(F='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+F+"</body></html>");var Se=x?x.createHTML(F):F;if(Dr===bo)try{At=(new h).parseFromString(Se,at)}catch{}if(!At||!At.documentElement){At=B.createDocument(Dr,"template",null);try{At.documentElement.innerHTML=rd?"":Se}catch{}}var on=At.body||At.documentElement;return F&&vt&&on.insertBefore(r.createTextNode(vt),on.childNodes[0]||null),Dr===bo?A.call(At,Ft?"html":"body")[0]:Ft?At.documentElement:on},Tx=function(F){return P.call(F.ownerDocument||F,F,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},sd=function(F){return"object"===Mi(a)?F instanceof a:F&&"object"===Mi(F)&&"number"==typeof F.nodeType&&"string"==typeof F.nodeName},cs=function(F,At,vt){q[F]&&ZN(q[F],function(te){te.call(n,At,vt,il)})},Rx=function(F){var At,vt;if(cs("beforeSanitizeElements",F,null),(vt=F)instanceof f&&("string"!=typeof vt.nodeName||"string"!=typeof vt.textContent||"function"!=typeof vt.removeChild||!(vt.attributes instanceof u)||"function"!=typeof vt.removeAttribute||"function"!=typeof vt.setAttribute||"string"!=typeof vt.namespaceURI||"function"!=typeof vt.insertBefore)||jn(/[\u0080-\uFFFF]/,F.nodeName))return ls(F),!0;var te=G(F.nodeName);if(cs("uponSanitizeElement",F,{tagName:te,allowedTags:R}),F.hasChildNodes()&&!sd(F.firstElementChild)&&(!sd(F.content)||!sd(F.content.firstElementChild))&&jn(/<[/\w]/g,F.innerHTML)&&jn(/<[/\w]/g,F.textContent)||"select"===te&&jn(/<template/i,F.innerHTML))return ls(F),!0;if(!R[te]||Y[te]){if(!Y[te]&&Bx(te)&&(M.tagNameCheck instanceof RegExp&&jn(M.tagNameCheck,te)||M.tagNameCheck instanceof Function&&M.tagNameCheck(te)))return!1;if(ss&&!Rr[te]){var Se=C(F)||F.parentNode,on=_(F)||F.childNodes;if(on&&Se)for(var Ue=on.length-1;Ue>=0;--Ue)Se.insertBefore(p(on[Ue],!0),v(F))}return ls(F),!0}return F instanceof l&&!function(er){var ze=C(er);ze&&ze.tagName||(ze={namespaceURI:bo,tagName:"template"});var He=Bu(er.tagName),Vi=Bu(ze.tagName);return er.namespaceURI===Gn?ze.namespaceURI===bo?"svg"===He:ze.namespaceURI===sl?"svg"===He&&("annotation-xml"===Vi||Nx[Vi]):Boolean(Om[He]):er.namespaceURI===sl?ze.namespaceURI===bo?"math"===He:ze.namespaceURI===Gn?"math"===He&&Ax[Vi]:Boolean(xh[He]):er.namespaceURI===bo&&!(ze.namespaceURI===Gn&&!Ax[Vi])&&!(ze.namespaceURI===sl&&!Nx[Vi])&&!xh[He]&&(eD[He]||!Om[He])}(F)?(ls(F),!0):"noscript"!==te&&"noembed"!==te||!jn(/<\/no(script|embed)/i,F.innerHTML)?(Et&&3===F.nodeType&&(At=Hs(At=F.textContent,pt," "),At=Hs(At,mt," "),F.textContent!==At&&(Mc(n.removed,{element:F.cloneNode()}),F.textContent=At)),cs("afterSanitizeElements",F,null),!1):(ls(F),!0)},Dx=function(F,At,vt){if(We&&("id"===At||"name"===At)&&(vt in r||vt in tD))return!1;if((!et||J[At]||!jn(kt,At))&&(!tt||!jn(St,At)))if(!H[At]||J[At]){if(!(Bx(F)&&(M.tagNameCheck instanceof RegExp&&jn(M.tagNameCheck,F)||M.tagNameCheck instanceof Function&&M.tagNameCheck(F))&&(M.attributeNameCheck instanceof RegExp&&jn(M.attributeNameCheck,At)||M.attributeNameCheck instanceof Function&&M.attributeNameCheck(At))||"is"===At&&M.allowCustomizedBuiltInElements&&(M.tagNameCheck instanceof RegExp&&jn(M.tagNameCheck,vt)||M.tagNameCheck instanceof Function&&M.tagNameCheck(vt))))return!1}else if(!is[At]&&!jn(Nt,Hs(vt,wt,""))&&("src"!==At&&"xlink:href"!==At&&"href"!==At||"script"===F||0!==nA(vt,"data:")||!rl[F])&&(!Z||jn(dt,Hs(vt,wt,"")))&&vt)return!1;return!0},Bx=function(F){return F.indexOf("-")>0},Lx=function(F){var At,vt,te,Se;cs("beforeSanitizeAttributes",F,null);var on=F.attributes;if(on){var Ue={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:H};for(Se=on.length;Se--;){var er=At=on[Se],ze=er.name,He=er.namespaceURI;vt="value"===ze?At.value:oA(At.value),te=G(ze);var Vi=vt;if(Ue.attrName=te,Ue.attrValue=vt,Ue.keepAttr=!0,Ue.forceKeepAttr=void 0,cs("uponSanitizeAttribute",F,Ue),vt=Ue.attrValue,!Ue.forceKeepAttr)if(Ue.keepAttr)if(jn(/\/>/i,vt))Tm(ze,F);else{Et&&(vt=Hs(vt,pt," "),vt=Hs(vt,mt," "));var oD=G(F.nodeName);if(Dx(oD,te,vt)){if(vt!==Vi)try{He?F.setAttributeNS(He,ze,vt):F.setAttribute(ze,vt)}catch{Tm(ze,F)}}else Tm(ze,F)}else Tm(ze,F)}cs("afterSanitizeAttributes",F,null)}},nD=function F(At){var vt,te=Tx(At);for(cs("beforeSanitizeShadowDOM",At,null);vt=te.nextNode();)cs("uponSanitizeShadowNode",vt,null),Rx(vt)||(vt.content instanceof s&&F(vt.content),Lx(vt));cs("afterSanitizeShadowDOM",At,null)};return n.sanitize=function(F,At){var vt,te,Se,on,Ue;if((rd=!F)&&(F="\x3c!--\x3e"),"string"!=typeof F&&!sd(F)){if("function"!=typeof F.toString)throw Vg("toString is not a function");if("string"!=typeof(F=F.toString()))throw Vg("dirty is not a string, aborting")}if(!n.isSupported){if("object"===Mi(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof F)return e.toStaticHTML(F);if(sd(F))return e.toStaticHTML(F.outerHTML)}return F}if(bn||Eh(At),n.removed=[],"string"==typeof F&&(Le=!1),Le){if(F.nodeName){var er=G(F.nodeName);if(!R[er]||Y[er])throw Vg("root node is forbidden and cannot be sanitized in-place")}}else if(F instanceof a)1===(te=(vt=Ox("\x3c!----\x3e")).ownerDocument.importNode(F,!0)).nodeType&&"BODY"===te.nodeName||"HTML"===te.nodeName?vt=te:vt.appendChild(te);else{if(!pe&&!Et&&!Ft&&-1===F.indexOf("<"))return x&&ho?x.createHTML(F):F;if(!(vt=Ox(F)))return pe?null:ho?N:""}vt&&ke&&ls(vt.firstChild);for(var ze=Tx(Le?F:vt);Se=ze.nextNode();)3===Se.nodeType&&Se===on||Rx(Se)||(Se.content instanceof s&&nD(Se.content),Lx(Se),on=Se);if(on=null,Le)return F;if(pe){if(vn)for(Ue=j.call(vt.ownerDocument);vt.firstChild;)Ue.appendChild(vt.firstChild);else Ue=vt;return H.shadowroot&&(Ue=T.call(o,Ue,!0)),Ue}var He=Ft?vt.outerHTML:vt.innerHTML;return Ft&&R["!doctype"]&&vt.ownerDocument&&vt.ownerDocument.doctype&&vt.ownerDocument.doctype.name&&jn(fA,vt.ownerDocument.doctype.name)&&(He="<!DOCTYPE "+vt.ownerDocument.doctype.name+">\n"+He),Et&&(He=Hs(He,pt," "),He=Hs(He,mt," ")),x&&ho?x.createHTML(He):He},n.setConfig=function(F){Eh(F),bn=!0},n.clearConfig=function(){il=null,bn=!1},n.isValidAttribute=function(F,At,vt){il||Eh({});var te=G(F),Se=G(At);return Dx(te,Se,vt)},n.addHook=function(F,At){"function"==typeof At&&(q[F]=q[F]||[],Mc(q[F],At))},n.removeHook=function(F){if(q[F])return tA(q[F])},n.removeHooks=function(F){q[F]&&(q[F]=[])},n.removeAllHooks=function(){q={}},n}();const v_=Q.each,hA=Q.trim,bA=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],vA={ftp:21,http:80,https:443,mailto:25},yA=["img","video"],y_=(t,e,n)=>{const o=(r=>{try{return decodeURIComponent(r)}catch{return unescape(r)}})(e).replace(/\s/g,"");return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(o)||!t.allow_html_data_urls&&(/^data:image\//i.test(o)?(s=n,(ot(r=t.allow_svg_data_urls)?!r:!ot(s)||!gt(yA,s))&&/^data:image\/svg\+xml/i.test(o)):/^data:/i.test(o)));var r,s};class Jo{static parseDataUri(e){let n;const o=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(o[0]);return r&&(n=r[1]),{type:n,data:o[1]}}static isDomSafe(e,n,o={}){if(o.allow_script_urls)return!0;{const r=io.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!y_(o,r,n)}}static getDocumentBaseUrl(e){var n;let o;return o=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(n=e.href)&&void 0!==n?n:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/")),o}constructor(e,n={}){this.path="",this.directory="",e=hA(e),this.settings=n;const o=n.base_uri,r=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(r.source=e);const s=0===e.indexOf("//");if(0!==e.indexOf("/")||s||(e=(o&&o.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const a=o?o.path:new Jo(document.location.href).directory;if(""===o?.protocol)e="//mce_host"+r.toAbsPath(a,e);else{const l=/([^#?]*)([#?]?.*)/.exec(e);l&&(e=(o&&o.protocol||"http")+"://mce_host"+r.toAbsPath(a,l[1])+l[2])}}e=e.replace(/@@/g,"(mce_at)");const i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);i&&v_(bA,(a,l)=>{let c=i[l];c&&(c=c.replace(/\(mce_at\)/g,"@@")),r[a]=c}),o&&(r.protocol||(r.protocol=o.protocol),r.userInfo||(r.userInfo=o.userInfo),r.port||"mce_host"!==r.host||(r.port=o.port),r.host&&"mce_host"!==r.host||(r.host=o.host),r.source=""),s&&(r.protocol="")}setPath(e){const n=/^(.*?)\/?(\w+)?$/.exec(e);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;const n=new Jo(e,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const o=this.getURI(),r=n.getURI();if(o===r||"/"===o.charAt(o.length-1)&&o.substr(0,o.length-1)===r)return o;let s=this.toRelPath(this.path,n.path);return n.query&&(s+="?"+n.query),n.anchor&&(s+="#"+n.anchor),s}toAbsolute(e,n){const o=new Jo(e,{base_uri:this});return o.getURI(n&&this.isSameOrigin(o))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const n=this.protocol?vA[this.protocol]:null;if(n&&(this.port||n)==(e.port||n))return!0}return!1}toRelPath(e,n){let o,r,s=0,i="";const a=e.substring(0,e.lastIndexOf("/")).split("/"),l=n.split("/");if(a.length>=l.length)for(o=0,r=a.length;o<r;o++)if(o>=l.length||a[o]!==l[o]){s=o+1;break}if(a.length<l.length)for(o=0,r=l.length;o<r;o++)if(o>=a.length||a[o]!==l[o]){s=o+1;break}if(1===s)return n;for(o=0,r=a.length-(s-1);o<r;o++)i+="../";for(o=s-1,r=l.length;o<r;o++)i+=o!==s-1?"/"+l[o]:l[o];return i}toAbsPath(e,n){let o=0;const r=/\/$/.test(n)?"/":"",s=e.split("/"),i=n.split("/"),a=[];v_(s,u=>{u&&a.push(u)});const l=[];for(let u=i.length-1;u>=0;u--)0!==i[u].length&&"."!==i[u]&&(".."!==i[u]?o>0?o--:l.push(i[u]):o++);const c=a.length-o;let d;return d=c<=0?Gs(l).join("/"):a.slice(0,c).join("/")+"/"+Gs(l).join("/"),0!==d.indexOf("/")&&(d="/"+d),r&&d.lastIndexOf("/")!==d.length-1&&(d+=r),d}getURI(e=!1){let n;return this.source&&!e||(n="",e||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const _A=Q.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Gg="data-mce-type";let __=0;const C_=(t,e,n,o)=>{var r,s,i,a;const l=e.validate,c=n.getSpecialElements();8===t.nodeType&&!e.allow_conditional_comments&&/^\[if/i.test(null!==(r=t.nodeValue)&&void 0!==r?r:"")&&(t.nodeValue=" "+t.nodeValue);const d=null!==(s=o?.tagName)&&void 0!==s?s:t.nodeName.toLowerCase();if(1!==t.nodeType||"body"===d)return;const u=O(t),f=So(u,Gg),h=cn(u,"data-mce-bogus");if(!f&&ht(h))return void("all"===h?ne(u):Do(u));const g=n.getElementRule(d);if(!l||g){if(ot(o)&&(o.allowedTags[d]=!0),l&&g&&!f){if(W(null!==(i=g.attributesForced)&&void 0!==i?i:[],b=>{fe(u,b.name,"{$uid}"===b.value?"mce_"+__++:b.value)}),W(null!==(a=g.attributesDefault)&&void 0!==a?a:[],b=>{So(u,b.name)||fe(u,b.name,"{$uid}"===b.value?"mce_"+__++:b.value)}),g.attributesRequired&&!le(g.attributesRequired,b=>So(u,b))||g.removeEmptyAttrs&&(b=>{const p=b.dom.attributes;return null==p||0===p.length})(u))return void Do(u);g.outputName&&g.outputName!==d&&((b,p)=>{const v=((C,k)=>{const x=Re(k),N=Ol(C);return xo(x,N),x})(b,p);Ro(b,v);const _=_e(b);Vr(v,_),ne(b)})(u,g.outputName)}}else Ot(c,d)?ne(u):Do(u)},w_=(t,e,n,o,r)=>!(o in _A&&y_(t,r,n))&&(!t.validate||e.isValid(n,o)||Gt(o,"data-")||Gt(o,"aria-")),E_=(t,e)=>t.hasAttribute(Gg)&&("id"===e||"class"===e||"style"===e),x_=(t,e)=>t in e.getBoolAttrs(),CA=(t,e,n)=>{const{attributes:o}=t;for(let r=o.length-1;r>=0;r--){const s=o[r],i=s.name,a=s.value;w_(e,n,t.tagName.toLowerCase(),i,a)||E_(t,i)?x_(i,n)&&t.setAttribute(i,i):t.removeAttribute(i)}},k_=Q.makeMap,S_=Q.extend,N_=(t,e,n)=>{const o=t.name,r=o in n&&"title"!==o&&"textarea"!==o,s=e.childNodes;for(let i=0,a=s.length;i<a;i++){const l=s[i],c=new Nn(l.nodeName.toLowerCase(),l.nodeType);if(ct(l)){const d=l.attributes;for(let u=0,f=d.length;u<f;u++){const h=d[u];c.attr(h.name,h.value)}}else X(l)?(c.value=l.data,r&&(c.raw=!0)):(Lo(l)||Im(l)||Fm(l))&&(c.value=l.data);N_(c,l,n),t.append(c)}},qa=(t={},e=xn())=>{const n=r_(),o=r_(),r={validate:!0,root_name:"body",sanitize:!0,...t},s=new DOMParser,i=((b,p)=>{if(b.sanitize){const v=((t,e)=>{const n=pA();return n.addHook("uponSanitizeElement",(o,r)=>{C_(o,t,e,r)}),n.addHook("uponSanitizeAttribute",(o,r)=>{const s=o.tagName.toLowerCase(),{attrName:i,attrValue:a}=r;r.keepAttr=w_(t,e,s,i,a),r.keepAttr?(r.allowedAttributes[i]=!0,x_(i,e)&&(r.attrValue=i),t.allow_svg_data_urls&&Gt(a,"data:image/svg+xml")&&(r.forceKeepAttr=!0)):E_(o,i)&&(r.forceKeepAttr=!0)}),n})(b,p);return(_,C)=>{v.sanitize(_,((k,x)=>{const N={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return N.PARSER_MEDIA_TYPE=x,k.allow_script_urls?N.ALLOWED_URI_REGEXP=/.*/:k.allow_html_data_urls&&(N.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),N})(b,C)),v.removed=[]}}return(v,_)=>{const C=document.createNodeIterator(v,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let k;for(;k=C.nextNode();)C_(k,b,p),ct(k)&&CA(k,b,p)}})(r,e),l=n.getFilters,u=o.getFilters,h=(b,p)=>{const v=ht(p.attr(Gg)),_=1===p.type&&!Ot(b,p.name)&&!qt(e,p);return 3===p.type||_&&!v},g={schema:e,addAttributeFilter:o.addFilter,getAttributeFilters:u,removeAttributeFilter:o.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:l,removeNodeFilter:n.removeFilter,parse:(b,p={})=>{var v;const _=r.validate,C=null!==(v=p.context)&&void 0!==v?v:r.root_name,k=((I,q,at="html")=>{const G="xhtml"===at?"application/xhtml+xml":"text/html",pt=Ot(e.getSpecialElements(),q.toLowerCase()),mt=pt?`<${q}>${I}</${q}>`:I,St=s.parseFromString("xhtml"===at?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${mt}</body></html>`:`<body>${mt}</body>`,G).body;return i(St,G),pt?St.firstChild:St})(b,C,p.format);Bt(e,k);const x=new Nn(C,11);N_(x,k,e.getSpecialElements()),k.innerHTML="";const[N,D]=((I,q,at,G)=>{const pt=at.validate,mt=q.getNonEmptyElements(),kt=q.getWhitespaceElements(),St=S_(k_("script,style,head,html,body,title,meta,param"),q.getBlockElements()),dt=Kd(q),wt=/[ \t\r\n]+/g,Nt=/^[ \t\r\n]+/,R=/[ \t\r\n]+$/,L=M=>{let Y=M.parent;for(;ot(Y);){if(Y.name in kt)return!0;Y=Y.parent}return!1},H=M=>M.name in St||qt(q,M),V=(M,Y)=>!ot(Y?M.prev:M.next)&&!he(M.parent)&&H(M.parent)&&(M.parent!==I||!0===G.isRootContent);return[M=>{var Y,tt,et;if(3===M.type&&!L(M)){let J=null!==(Y=M.value)&&void 0!==Y?Y:"";J=J.replace(wt," "),et=H,(ot(tt=M.prev)&&(et(tt)||"br"===tt.name)||V(M,!0))&&(J=J.replace(Nt,"")),0===J.length?M.remove():M.value=J}},M=>{var Y,et,Z;if(1===M.type){const J=q.getElementRule(M.name);if(pt&&J){const tt=Bc(q,mt,kt,M);J.paddInEmptyBlock&&tt&&(et=>{let Z=et;for(;ot(Z);){if(Z.name in dt)return Bc(q,mt,kt,Z);Z=Z.parent}return!1})(M)?Cg(at,G,H,M):J.removeEmpty&&tt?H(M)?M.remove():M.unwrap():J.paddEmpty&&(tt||fy(et=M,"#text")&&(null===(Z=et?.firstChild)||void 0===Z?void 0:Z.value)===Ee)&&Cg(at,G,H,M)}}else if(3===M.type&&!L(M)){let J=null!==(Y=M.value)&&void 0!==Y?Y:"";(M.next&&H(M.next)||V(M,!1))&&(J=J.replace(R,"")),0===J.length?M.remove():M.value=J}}]})(x,e,r,p),B=[],j={nodes:{},attributes:{}},A=I=>dy(l(),u(),I,j);if(((I,q,at)=>{const G=[];for(let pt=I,mt=pt;pt;mt=pt,pt=pt.walk()){const kt=pt;W(q,St=>St(kt)),he(kt.parent)&&kt!==I?pt=mt:G.push(kt)}for(let pt=G.length-1;pt>=0;pt--){const mt=G[pt];W(at,kt=>kt(mt))}})(x,[N,A],[D,_?I=>{return at=B,void(gy(e,q=I)&&at.push(q));var q,at}:Tt]),B.reverse(),_&&B.length>0)if(p.context){const{pass:I,fail:q}=$o(B,at=>at.parent===x);Eg(q,e,x,A),p.invalid=I.length>0}else Eg(B,e,x,A);const T=((I,q)=>{var at;const G=null!==(at=q.forced_root_block)&&void 0!==at?at:I.forced_root_block;return!1===G?"":!0===G?"p":G})(r,p);return T&&("body"===x.name||p.isRootContent)&&((I,q)=>{const at=S_(k_("script,style,head,html,body,title,meta,param"),e.getBlockElements()),G=/^[ \t\r\n]+/,pt=/[ \t\r\n]+$/;let mt=I.firstChild,kt=null;const St=dt=>{var wt,Nt;dt&&(mt=dt.firstChild,mt&&3===mt.type&&(mt.value=null===(wt=mt.value)||void 0===wt?void 0:wt.replace(G,"")),mt=dt.lastChild,mt&&3===mt.type&&(mt.value=null===(Nt=mt.value)||void 0===Nt?void 0:Nt.replace(pt,"")))};if(e.isValidChild(I.name,q.toLowerCase())){for(;mt;){const dt=mt.next;h(at,mt)?(kt||(kt=new Nn(q,1),kt.attr(r.forced_root_block_attrs),I.insert(kt,mt)),kt.append(mt)):(St(kt),kt=null),mt=dt}St(kt)}})(x,T),p.invalid||uy(j,p),x}};return((t,e)=>{const n=t.schema;e.remove_trailing_brs&&s_(e,t,n),t.addAttributeFilter("href",r=>{let s=r.length;const i=a=>{const l=a?Q.trim(a):"";return/\b(noopener)\b/g.test(l)?l:l.split(" ").filter(d=>d.length>0).concat(["noopener"]).sort().join(" ")};if(!e.allow_unsafe_link_target)for(;s--;){const a=r[s];"a"===a.name&&"_blank"===a.attr("target")&&a.attr("rel",i(a.attr("rel")))}}),e.allow_html_in_named_anchor||t.addAttributeFilter("id,name",r=>{let s,i,a,l,c=r.length;for(;c--;)if(l=r[c],"a"===l.name&&l.firstChild&&!l.attr("href"))for(a=l.parent,s=l.lastChild;s&&a;)i=s.prev,a.insert(s,l),s=i}),e.fix_list_elements&&t.addNodeFilter("ul,ol",r=>{let s,i,a=r.length;for(;a--;)if(s=r[a],i=s.parent,i&&("ul"===i.name||"ol"===i.name))if(s.prev&&"li"===s.prev.name)s.prev.append(s);else{const l=new Nn("li",1);l.attr("style","list-style-type: none"),s.wrap(l)}});const o=n.getValidClasses();e.validate&&o&&t.addAttributeFilter("class",r=>{var s;let i=r.length;for(;i--;){const a=r[i],l=null!==(s=a.attr("class"))&&void 0!==s?s:"",c=Q.explode(l," ");let d="";for(let u=0;u<c.length;u++){const f=c[u];let h=!1,g=o["*"];g&&g[f]&&(h=!0),g=o[a.name],!h&&g&&g[f]&&(h=!0),h&&(d&&(d+=" "),d+=f)}d.length||(d=null),a.attr("class",d)}}),((r,s)=>{const{blob_cache:i}=s;if(i){const a=l=>{const c=l.attr("src");var d;(d=l).attr("src")===Rt.transparentSrc||ot(d.attr("data-mce-placeholder"))||(d=>ot(d.attr("data-mce-bogus")))(l)||he(c)||d_(i,c,!0).each(d=>{l.attr("src",d.blobUri())})};r.addAttributeFilter("src",l=>W(l,a))}})(t,e)})(g,r),(p=r).inline_styles&&((t,e,n)=>{var o;const r=Rs();var s,i,a;e.convert_fonts_to_spans&&(s=t,i=r,a=Q.explode(null!==(o=e.font_size_legacy_values)&&void 0!==o?o:""),s.addNodeFilter("font",l=>{W(l,c=>{const d=i.parse(c.attr("style")),u=c.attr("color"),f=c.attr("face"),h=c.attr("size");var g;u&&(d.color=u),f&&(d["font-family"]=f),h&&Zs(h).each(g=>{d["font-size"]=a[g-1]}),c.name="span",c.attr("style",i.serialize(d)),g=c,W(["color","face","size"],p=>{g.attr(p,null)})})})),((s,i,a)=>{s.addNodeFilter("strike",l=>{const c="html4"!==i.type;W(l,d=>{if(c)d.name="s";else{const u=a.parse(d.attr("style"));u["text-decoration"]="line-through",d.name="span",d.attr("style",a.serialize(u))}})})})(t,n,r)})(g,p,e),g;var p},A_=(t,e,n)=>{const o=Au(s=t)?Fs({validate:!1}).serialize(s):s,r=e(o);var s;if(r.isDefaultPrevented())return r;if(Au(t)){if(r.content!==o){const s=qa({validate:!1,forced_root_block:!1,sanitize:n}).parse(r.content,{context:t.name});return{...r,content:s}}return{...r,content:t}}return r},O_=(t,e)=>{if(e.no_events)return kn.value(e);{const n=t.dispatch("BeforeGetContent",e);return n.isDefaultPrevented()?kn.error(Ov(t,{content:"",...n}).content):kn.value(n)}},T_=(t,e,n)=>n.no_events?e:A_(e,r=>Ov(t,{...n,content:r}),ff(t)).content,Qg=(t,e)=>{if(e.no_events)return kn.value(e);{const n=A_(e.content,o=>{return r=t,s={...e,content:o},r.dispatch("BeforeSetContent",s);var r,s},ff(t));return n.isDefaultPrevented()?(Av(t,n),kn.error(void 0)):kn.value(n)}},Jg=(t,e,n)=>{n.no_events||Av(t,{...n,content:e})},Zg=(t,e,n)=>({element:t,width:e,rows:n}),R_=(t,e)=>({element:t,cells:e}),EA=(t,e)=>({x:t,y:e}),D_=(t,e)=>ko(t,e).bind(Zs).getOr(1),xA=(t,e,n)=>{const o=t.rows;return!!(o[n]?o[n].cells:[])[e]},B_=t=>Me(t,(e,n)=>n.cells.length>e?n.cells.length:e,0),L_=(t,e)=>{const n=t.rows;for(let o=0;o<n.length;o++){const r=n[o].cells;for(let s=0;s<r.length;s++)if(zt(r[s],e))return w.some(EA(s,o))}return w.none()},P_=(t,e,n,o,r)=>{const s=[],i=t.rows;for(let a=n;a<=r;a++){const l=i[a].cells,c=e<o?l.slice(e,o+1):l.slice(o,e+1);s.push(R_(i[a].element,c))}return s},kA=t=>((e,n)=>{const o=_i(e.element),r=Re("tbody");return Vr(r,n),ge(o,r),o})(t,Mt(t.rows,n=>{const o=Mt(n.cells,s=>{const i=Mh(s);return Te(i,"colspan"),Te(i,"rowspan"),i}),r=_i(n.element);return Vr(r,o),r})),M_=()=>jf([]),Mu=(t,e)=>e>=0&&e<t.length&&Ia(t.charAt(e)),I_=t=>un(t.innerText),F_=t=>ct(t)?t.outerHTML:X(t)?io.encodeRaw(t.data,!1):Lo(t)?"\x3c!--"+t.data+"--\x3e":"",TA=zo(()=>document.implementation.createHTMLDocument("undo")),Iu=t=>{const e=t.serializer.getTempAttrs(),n=h0(t.getBody(),e);return null!==n.querySelector("iframe")?{type:"fragmented",fragments:xt(Mt(Ye(n.childNodes),yo(un,F_)),o=>o.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:un(n.innerHTML),bookmark:null,beforeBookmark:null}},tp=(t,e,n)=>{const o=n?e.beforeBookmark:e.bookmark;"fragmented"===e.type?((t,e)=>{((n,o)=>{let r=0;W(n,s=>{var i,a;0===s[0]?r++:1===s[0]?(((i,a,l)=>{const c=(d=>{let u;const f=document.createElement("div"),h=document.createDocumentFragment();for(d&&(f.innerHTML=d);u=f.firstChild;)h.appendChild(u);return h})(a);i.hasChildNodes()&&l<i.childNodes.length?i.insertBefore(c,i.childNodes[l]):i.appendChild(c)})(o,s[1],r),r++):2===s[0]&&(a=r,(i=o).hasChildNodes()&&a<i.childNodes.length&&i.removeChild(i.childNodes[a]))})})(((n,o)=>{const r=n.length+o.length+2,s=new Array(r),i=new Array(r),a=(u,f,h,g,b)=>{const p=c(u,f,h,g);if(null===p||p.start===f&&p.diag===f-g||p.end===u&&p.diag===u-h){let v=u,_=h;for(;v<f||_<g;)v<f&&_<g&&n[v]===o[_]?(b.push([0,n[v]]),++v,++_):f-u>g-h?(b.push([2,n[v]]),++v):(b.push([1,o[_]]),++_)}else{a(u,p.start,h,p.start-p.diag,b);for(let v=p.start;v<p.end;++v)b.push([0,n[v]]);a(p.end,f,p.end-p.diag,g,b)}},l=(u,f,h,g)=>{let b=u;for(;b-f<g&&b<h&&n[b]===o[b-f];)++b;return{start:u,end:b,diag:f}},c=(u,f,h,g)=>{const b=f-u,p=g-h;if(0===b||0===p)return null;const v=b-p,_=p+b,C=(_%2==0?_:_+1)/2;let k,x,N,D,B;for(s[1+C]=u,i[1+C]=f+1,k=0;k<=C;++k){for(x=-k;x<=k;x+=2){for(N=x+C,s[N]=x===-k||x!==k&&s[N-1]<s[N+1]?s[N+1]:s[N-1]+1,D=s[N],B=D-u+h-x;D<f&&B<g&&n[D]===o[B];)s[N]=++D,++B;if(v%2!=0&&v-k<=x&&x<=v+k&&i[N-v]<=s[N])return l(i[N-v],x+u-h,f,g)}for(x=v-k;x<=v+k;x+=2){for(N=x+C-v,i[N]=x===v-k||x!==v+k&&i[N+1]<=i[N-1]?i[N+1]-1:i[N-1],D=i[N]-1,B=D-u+h-x;D>=u&&B>=h&&n[D]===o[B];)i[N]=D--,B--;if(v%2==0&&-k<=x&&x<=k&&i[N]<=s[N+v])return l(i[N],x+u-h,f,g)}}return null},d=[];return a(0,n.length,0,o.length,d),d})(Mt(Ye(e.childNodes),F_),t),e)})(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw",no_selection:!ot(o)||!Qb(o)||!o.isFakeCaret}),o&&(t.selection.moveToBookmark(o),t.selection.scrollIntoView())},ep=t=>"fragmented"===t.type?t.fragments.join(""):t.content,j_=t=>{const e=Re("body",TA());return ga(e,ep(t)),W(De(e,"*[data-mce-bogus]"),Do),fa(e)},np=(t,e)=>{return!(!t||!e)&&(o=e,!(ep(t)!==ep(o))||((n,o)=>j_(n)===j_(o))(t,e));var o},op=t=>0===t.get(),Fu=(t,e,n)=>{op(n)&&(t.typing=e)},$_=(t,e)=>{t.typing&&(Fu(t,!1,e),t.add())},U_=t=>({init:{bindEvents:Tt},undoManager:{beforeChange:(e,n)=>{return o=t,s=n,void(op(e)&&s.set(af(o.selection)));var o,s},add:(e,n,o,r,s,i)=>((a,l,c,d,u,f,h)=>{const g=Iu(a),b=Q.extend(f||{},g);if(!op(d)||a.removed)return null;const p=l.data[c.get()];if(a.dispatch("BeforeAddUndo",{level:b,lastLevel:p,originalEvent:h}).isDefaultPrevented()||p&&np(p,b))return null;l.data[c.get()]&&u.get().each(C=>{l.data[c.get()].beforeBookmark=C});const v=Tk(a);if(v&&l.data.length>v){for(let C=0;C<l.data.length-1;C++)l.data[C]=l.data[C+1];l.data.length--,c.set(l.data.length)}b.bookmark=af(a.selection),c.get()<l.data.length-1&&(l.data.length=c.get()+1),l.data.push(b),c.set(l.data.length-1);const _={level:b,lastLevel:p,originalEvent:h};return c.get()>0?(a.setDirty(!0),a.dispatch("AddUndo",_),a.dispatch("change",_)):a.dispatch("AddUndo",_),b})(t,e,n,o,r,s,i),undo:(e,n,o)=>((r,s,i,a)=>{let l;return s.typing&&(s.add(),s.typing=!1,Fu(s,!1,i)),a.get()>0&&(a.set(a.get()-1),l=s.data[a.get()],tp(r,l,!0),r.setDirty(!0),r.dispatch("Undo",{level:l})),l})(t,e,n,o),redo:(e,n)=>((o,r,s)=>{let i;return r.get()<s.length-1&&(r.set(r.get()+1),i=s[r.get()],tp(o,i,!1),o.setDirty(!0),o.dispatch("Redo",{level:i})),i})(t,e,n),clear:(e,n)=>{return o=t,s=n,(r=e).data=[],s.set(0),r.typing=!1,void o.dispatch("ClearUndos");var o,r,s},reset:e=>{return(n=e).clear(),void n.add();var n},hasUndo:(e,n)=>{return o=t,r=e,n.get()>0||r.typing&&r.data[0]&&!np(Iu(o),r.data[0]);var o,r},hasRedo:(e,n)=>{return o=e,n.get()<o.data.length-1&&!o.typing;var o},transact:(e,n,o)=>{return i=o,$_(r=e,n),r.beforeChange(),r.ignore(i),r.add();var r,i},ignore:(e,n)=>((o,r)=>{try{o.set(o.get()+1),r()}finally{o.set(o.get()-1)}})(e,n),extra:(e,n,o,r)=>((s,i,a,l,c)=>{if(i.transact(l)){const d=i.data[a.get()].bookmark,u=i.data[a.get()-1];tp(s,u,!0),i.transact(c)&&(i.data[a.get()-1].beforeBookmark=d)}})(t,e,n,o,r)},formatter:{match:(e,n,o,r)=>Rg(t,e,n,o,r),matchAll:(e,n)=>((o,r,s)=>{const i=[],a={},l=o.selection.getStart();return o.dom.getParent(l,c=>{for(let d=0;d<r.length;d++){const u=r[d];!a[u]&&kr(o,c,u,s)&&(a[u]=!0,i.push(u))}},o.dom.getRoot()),i})(t,e,n),matchNode:(e,n,o,r)=>kr(t,e,n,o,r),canApply:e=>((n,o)=>{const r=n.formatter.get(o),s=n.dom;if(r&&n.selection.isEditable()){const i=n.selection.getStart(),a=fu(s,i);for(let l=r.length-1;l>=0;l--){const c=r[l];if(!co(c))return!0;for(let d=a.length-1;d>=0;d--)if(s.is(a[d],c.selector))return!0}}return!1})(t,e),closest:e=>((n,o)=>{const r=s=>zt(s,O(n.getBody()));return w.from(n.selection.getStart(!0)).bind(s=>Ag(O(s),i=>us(o,a=>{return kr(n,i.dom,c=a)?w.some(c):w.none();var c}),r)).getOrNull()})(t,e),apply:(e,n,o)=>Qy(t,e,n,o),remove:(e,n,o,r)=>Yy(t,e,n,o,r),toggle:(e,n,o)=>((r,s,i,a)=>{const l=r.formatter.get(s);l&&(!Rg(r,s,i,a)||"toggle"in l[0]&&!l[0].toggle?Qy(r,s,i,a):Yy(r,s,i,a))})(t,e,n,o),formatChanged:(e,n,o,r,s)=>{return((f,h,g,b,p,v)=>{const _=h.get();W(g.split(","),C=>{const k=Jt(_,C).getOrThunk(()=>{const N={withSimilar:{state:je(!1),similar:!0,callbacks:[]},withoutSimilar:{state:je(!1),similar:!1,callbacks:[]},withVars:[]};return _[C]=N,N}),x=()=>{const N=e_(f);return t_(f,N,C,p,v).isSome()};if(Ne(v)){const N=p?k.withSimilar:k.withoutSimilar;N.callbacks.push(b),1===N.callbacks.length&&N.state.set(x())}else k.withVars.push({state:je(x()),similar:p,vars:v,callback:b})}),h.set(_)})(t,a=e,l=n,c=o,r,s),{unbind:()=>((f,h,g)=>{const b=f.get();W(h.split(","),p=>Jt(b,p).each(v=>{b[p]={withSimilar:{...v.withSimilar,callbacks:xt(v.withSimilar.callbacks,_=>_!==g)},withoutSimilar:{...v.withoutSimilar,callbacks:xt(v.withoutSimilar.callbacks,_=>_!==g)},withVars:xt(v.withVars,_=>_.callback!==g)}})),f.set(b)})(a,l,c)};var a,l,c}},editor:{getContent:e=>{return o=e,w.from((n=t).getBody()).fold(st("tree"===o.format?new Nn("body",11):""),r=>((t,e,n)=>{let o;return o="raw"===e.format?Q.trim(un(h0(n,t.serializer.getTempAttrs()).innerHTML)):"text"===e.format?((r,s)=>{const i=r.getDoc(),a=gr(O(r.getBody())),l=Re("div",i);fe(l,"data-mce-bogus","all"),qr(l,{position:"fixed",left:"-9999999px",top:"0"}),ga(l,s.innerHTML),b0(l),v0(l);const c=Il(u=a)?u:O(Ho(u).dom.body);var u;ge(c,l);const d=un(l.dom.innerText);return ne(l),d})(t,n):"tree"===e.format?t.serializer.serialize(n,e):((r,s)=>{const i=en(r),a=new RegExp(`^(<${i}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${i}>[\r\n]*|<br \\/>[\r\n]*)$`);return s.replace(a,"")})(t,t.serializer.serialize(n,e)),"text"!==e.format&&!ka(O(n))&&ht(o)?Q.trim(o):o})(n,o,r));var n,o},setContent:(e,n)=>{return r=e,s=n,w.from((o=t).getBody()).map(i=>Au(r)?((a,l,c,d)=>{my(a.parser.getNodeFilters(),a.parser.getAttributeFilters(),c);const u=Fs({validate:!1},a.schema).serialize(c),f=un(ka(O(l))?u:Q.trim(u));return Ng(a,f,d.no_selection),{content:c,html:f}})(o,i,r,s):((a,l,c,d)=>{if(0===(c=un(c)).length||/^\s+$/.test(c)){const u='<br data-mce-bogus="1">';"TABLE"===l.nodeName?c="<tr><td>"+u+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(c="<li>"+u+"</li>");const f=en(a);return a.schema.isValidChild(l.nodeName.toLowerCase(),f.toLowerCase())?(c=u,c=a.dom.createHTML(f,gc(a),c)):c||(c=u),Ng(a,c,d.no_selection),{content:c,html:c}}{"raw"!==d.format&&(c=Fs({validate:!1},a.schema).serialize(a.parser.parse(c,{isRootContent:!0,insert:!0})));const u=ka(O(l))?c:Q.trim(c);return Ng(a,u,d.no_selection),{content:u,html:u}}})(o,i,r,s)).getOr({content:r,html:Au(s.content)?"":s.content});var o,r,s},insertContent:(e,n)=>jN(t,e,n),addVisual:e=>((n,o)=>{const r=n.dom,s=ot(o)?o:n.getBody();W(r.select("table,a",s),i=>{switch(i.nodeName){case"TABLE":const a=Mk(n),l=r.getAttrib(i,"border");l&&"0"!==l||!n.hasVisual?r.removeClass(i,a):r.addClass(i,a);break;case"A":if(!r.getAttrib(i,"href")){const c=r.getAttrib(i,"name")||i.id,d=Sb(n);c&&n.hasVisual?r.addClass(i,d):r.removeClass(i,d)}}}),n.dispatch("VisualAid",{element:o,hasVisual:n.hasVisual})})(t,e)},selection:{getContent:(e,n)=>((o,r,s={})=>{const i=(a=s,l=r,{...a,format:l,get:!0,selection:!0,getInner:!0});var a,l;return O_(o,i).fold(Ke,a=>{const l=((c,d)=>{if("text"===d.format)return w.from((u=c).selection.getRng()).map(f=>{var h;const g=w.from(u.dom.getParent(f.commonAncestorContainer,u.dom.isBlock)),b=u.getBody(),p=g.map(N=>N.nodeName).getOr("div").toLowerCase(),v=O(f.cloneContents());b0(v),v0(v);const _=u.dom.add(b,p,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},v.dom),C=I_(_),k=un(null!==(h=_.textContent)&&void 0!==h?h:"");if(u.dom.remove(_),Mu(k,0)||Mu(k,k.length-1)){const x=g.getOr(b),N=I_(x),D=N.indexOf(C);return-1===D?C:(Mu(N,D-1)?" ":"")+C+(Mu(N,D+C.length)?" ":"")}return C}).getOr("");var u;{const u=((f,h)=>{const g=f.selection.getRng(),b=f.dom.create("body"),p=f.selection.getSel(),v=Jf(f,xf(p)),_=h.contextual?((t,e)=>{const n=sv(e,t);return n.length>0?((t,e)=>{return(n=t,o=e[0],si(o,"table",ft(zt,n))).bind(n=>{const o=e[0],r=e[e.length-1],s=(i=>{const a=Zg(_i(i),0,[]);return W(De(i,"tr"),(l,c)=>{W(De(l,"td,th"),(d,u)=>{((f,h,g,b,p)=>{const v=D_(p,"rowspan"),_=D_(p,"colspan"),C=f.rows;for(let k=g;k<g+v;k++){C[k]||(C[k]=R_(Mh(b),[]));for(let x=h;x<h+_;x++)C[k].cells[x]=k===g&&x===h?p:_i(p)}})(a,((f,h,g)=>{for(;xA(f,h,g);)h++;return h})(a,u,c),c,l,d)})}),Zg(a.element,B_(a.rows),a.rows)})(n);return(i=s,a=o,l=r,L_(i,a).bind(c=>L_(i,l).map(d=>((u,f,h)=>{const g=f.x,b=f.y,p=h.x,v=h.y,_=b<v?P_(u,g,b,p,v):P_(u,g,v,p,b);return Zg(u.element,B_(_),_)})(i,c,d)))).map(i=>jf([kA(i)]));var i,a,l}).getOrThunk(M_);var n,o})(t,n):(o=t,(r=e).length>0&&r[0].collapsed?M_():(s=o,((a,l)=>{const c=Me(l,(d,u)=>(ge(u,d),u),a);return l.length>0?jf([c]):c})(O((i=r[0]).cloneContents()),((t,e)=>{const n=O(e.commonAncestorContainer),o=ns(n,t),r=xt(o,Hm),s=(l=e,ye(a=o,c=>"li"===Wt(c)&&Sf(c,l)).fold(st([]),c=>{return(d=a,ye(d,u=>"ul"===Wt(u)||"ol"===Wt(u))).map(d=>{const u=Re(Wt(d)),f=ms(Td(d),(h,g)=>Gt(g,"list-style"));return qr(u,f),[Re("li"),u]}).getOr([]);var d})),i=r.concat(s.length?s:(a=>ci(a)?Vn(a).filter(Wl).fold(st([]),l=>[a,l]):Wl(a)?[a]:[])(n));var a,l;return Mt(i,_i)})(s,i))));var o,r,s,i})(O(f.getBody()),v).dom:g.cloneContents();return _&&b.appendChild(_),f.selection.serializer.serialize(b,h)})(c,d);return"tree"===d.format?u:c.selection.isCollapsed()?"":u}})(o,a);return T_(o,l,a)})})(t,e,n)},autocompleter:{addDecoration:e=>((t,e)=>{if(c0(O(t.getBody())).isNone()){const o=mr('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());ge(o,O(e.extractContents())),e.insertNode(o.dom),Vn(o).each(r=>r.dom.normalize()),(n=o,((r,s)=>{const i=a=>{const l=_e(a);for(let c=l.length-1;c>=0;c--){const d=l[c];if(s(d))return w.some(d);const u=i(d);if(u.isSome())return u}return w.none()};return i(r)})(n,a0)).map(r=>{var s;t.selection.setCursorLocation(r.dom,"img"===Wt(s=r)?1:Ea(s).fold(()=>_e(s).length,i=>i.length))})}var n})(t,e),removeDecoration:()=>{return e=t,n=O(t.getBody()),c0(n).each(o=>{const r=e.selection.getBookmark();Do(o),e.selection.moveToBookmark(r)});var e,n}},raw:{getModel:()=>w.none()}}),Nr=t=>Ot(t.plugins,"rtc"),rp=t=>t.rtcInstance?t.rtcInstance:U_(t),ve=t=>{const e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},z_=t=>ve(t).init.bindEvents(),H_=t=>0===t.dom.length?(ne(t),w.none()):w.some(t),q_=(t,e,n,o)=>{t.bind(r=>((o?lg:xu)(r.dom,o?r.dom.length:0),e.filter(Cn).map(s=>((i,a,l,c)=>{const d=i.dom,u=a.dom,f=c?d.length:u.length;c?(cg(d,u,!1,!c),l.setStart(u,f)):(cg(u,d,!1,!c),l.setEnd(u,f))})(r,s,n,o)))).orThunk(()=>{return(s=e,i=o,s.filter(a=>kc.isBookmarkNode(a.dom)).bind(i?Ao:zr)).or(e).filter(Cn).map(s=>((i,a)=>{Vn(i).each(l=>{const c=i.dom;a&&Tc(l,z(c,0))?xu(c,0):!a&&Rc(l,z(c,c.length))&&lg(c,c.length)})})(s,o));var s,i})},V_=(t,e,n)=>{if(Ot(t,e)){const o=xt(t[e],r=>r!==n);0===o.length?delete t[e]:t[e]=o}},W_=t=>!(!t||!t.ownerDocument)&&No(O(t.ownerDocument),O(t)),K_=(t,e,n,o)=>{let r,s;const{selectorChangedWithUnbind:i}=((p,v)=>{let _,C;const k=(N,D)=>ye(D,B=>p.is(B,N)),x=N=>p.getParents(N,void 0,p.getRoot());return{selectorChangedWithUnbind:(N,D)=>(_||(_={},C={},v.on("NodeChange",B=>{const P=B.element,j=x(P),A={};Xt(_,(T,I)=>{k(I,j).each(q=>{C[I]||(W(T,at=>{at(!0,{node:q,selector:I,parents:j})}),C[I]=T),A[I]=T})}),Xt(C,(T,I)=>{A[I]||(delete C[I],W(T,q=>{q(!1,{node:P,selector:I,parents:j})}))})})),_[N]||(_[N]=[]),_[N].push(D),k(N,x(v.selection.getStart())).each(()=>{C[N]=_[N]}),{unbind:()=>{V_(_,N,D),V_(C,N,D)}})}})(t,o),a=(p,v)=>((_,C,k={})=>{const x=(N=k,D=C,{format:"html",...N,set:!0,selection:!0,content:D});var N,D;Qg(_,x).each(N=>{const D=((P,j)=>{if("raw"!==j.format){const A=P.selection.getRng(),T=P.dom.getParent(A.commonAncestorContainer,P.dom.isBlock),I=T?{context:T.nodeName.toLowerCase()}:{},q=P.parser.parse(j.content,{forced_root_block:!1,...I,...j});return Fs({validate:!1},P.schema).serialize(q)}return j.content})(_,N),B=_.selection.getRng();((P,j)=>{const A=w.from(j.firstChild).map(O),T=w.from(j.lastChild).map(O);P.deleteContents(),P.insertNode(j);const I=A.bind(zr).filter(Cn).bind(H_),q=T.bind(Ao).filter(Cn).bind(H_);q_(I,A,P,!0),q_(q,T,P,!1),P.collapse(!1)})(B,B.createContextualFragment(D)),_.selection.setRng(B),Nc(_,B),Jg(_,D,N)})})(o,p,v),l=p=>{const v=d();v.collapse(!!p),u(v)},c=()=>e.getSelection?e.getSelection():e.document.selection,d=()=>{let p;const v=(C,k,x)=>{try{return k.compareBoundaryPoints(C,x)}catch{return-1}},_=e.document;if(ot(o.bookmark)&&!Ri(o)){const C=Wf(o);if(C.isSome())return C.map(k=>Jf(o,[k])[0]).getOr(_.createRange())}try{const C=c();C&&!va(C.anchorNode)&&(p=C.rangeCount>0?C.getRangeAt(0):_.createRange(),p=Jf(o,[p])[0])}catch{}if(p||(p=_.createRange()),hr(p.startContainer)&&p.collapsed){const C=t.getRoot();p.setStart(C,0),p.setEnd(C,0)}return r&&s&&(0===v(p.START_TO_START,p,r)&&0===v(p.END_TO_END,p,r)?p=s:(r=null,s=null)),p},u=(p,v)=>{if(!((C=p)&&W_(C.startContainer)&&W_(C.endContainer)))return;var C;const _=c();if(p=o.dispatch("SetSelectionRange",{range:p,forward:v}).range,_){s=p;try{_.removeAllRanges(),_.addRange(p)}catch{}!1===v&&_.extend&&(_.collapse(p.endContainer,p.endOffset),_.extend(p.startContainer,p.startOffset)),r=_.rangeCount>0?_.getRangeAt(0):null}if(!p.collapsed&&p.startContainer===p.endContainer&&_?.setBaseAndExtent&&p.endOffset-p.startOffset<2&&p.startContainer.hasChildNodes()){const C=p.startContainer.childNodes[p.startOffset];C&&"IMG"===C.nodeName&&(_.setBaseAndExtent(p.startContainer,p.startOffset,p.endContainer,p.endOffset),_.anchorNode===p.startContainer&&_.focusNode===p.endContainer||_.setBaseAndExtent(C,0,C,1))}o.dispatch("AfterSetSelectionRange",{range:p,forward:v})},f=()=>{const p=c(),v=p?.anchorNode,_=p?.focusNode;if(!p||!v||!_||va(v)||va(_))return!0;const C=t.createRng(),k=t.createRng();try{C.setStart(v,p.anchorOffset),C.collapse(!0),k.setStart(_,p.focusOffset),k.collapse(!0)}catch{return!0}return C.compareBoundaryPoints(C.START_TO_START,k)<=0},h={dom:t,win:e,serializer:n,editor:o,expand:(p={type:"word"})=>u(Ti(t).expand(d(),p)),collapse:l,setCursorLocation:(p,v)=>{const _=t.createRng();ot(p)&&ot(v)?(_.setStart(p,v),_.setEnd(p,v),u(_),l(!1)):(Nf(t,_,o.getBody(),!0),u(_))},getContent:p=>((v,_={})=>{return k=_.format?_.format:"html",x=_,ve(v).selection.getContent(k,x);var k,x})(o,p),setContent:a,getBookmark:(p,v)=>g.getBookmark(p,v),moveToBookmark:p=>g.moveToBookmark(p),select:(p,v)=>{return(_=t,C=p,k=v,w.from(C).bind(x=>w.from(x.parentNode).map(N=>{const D=_.nodeIndex(x),B=_.createRng();return B.setStart(N,D),B.setEnd(N,D+1),k&&(Nf(_,B,x,!0),Nf(_,B,x,!1)),B}))).each(u),p;var _,C,k},isCollapsed:()=>{const p=d(),v=c();return!(!p||p.item)&&(p.compareEndPoints?0===p.compareEndPoints("StartToEnd",p):!v||p.collapsed)},isEditable:()=>{const p=d(),v=o.getBody().querySelectorAll('[data-mce-selected="1"]');return v.length>0?sr(v,_=>t.isEditable(_.parentElement)):p.startContainer===p.endContainer?t.isEditable(p.startContainer):t.isEditable(p.startContainer)&&t.isEditable(p.endContainer)},isForward:f,setNode:p=>(a(t.getOuterHTML(p)),p),getNode:()=>((p,v)=>{if(!v)return p;let _=v.startContainer,C=v.endContainer;const k=v.startOffset,x=v.endOffset;let N=v.commonAncestorContainer;v.collapsed||(_===C&&x-k<2&&_.hasChildNodes()&&(N=_.childNodes[k]),X(_)&&X(C)&&(_=_.length===k?i0(_.nextSibling,!0):_.parentNode,C=0===x?i0(C.previousSibling,!1):C.parentNode,_&&_===C&&(N=_)));const D=X(N)?N.parentNode:N;return ct(D)?D:p})(o.getBody(),d()),getSel:c,setRng:u,getRng:d,getStart:p=>r0(o.getBody(),d(),p),getEnd:p=>s0(o.getBody(),d(),p),getSelectedBlocks:(p,v)=>((_,C,k,x)=>{const N=[],D=_.getRoot(),B=_.getParent(k||r0(D,C,C.collapsed),_.isBlock),P=_.getParent(x||s0(D,C,C.collapsed),_.isBlock);if(B&&B!==D&&N.push(B),B&&P&&B!==P){let j;const A=new Ce(B,D);for(;(j=A.next())&&j!==P;)_.isBlock(j)&&N.push(j)}return P&&B!==P&&P!==D&&N.push(P),N})(t,d(),p,v),normalize:()=>{const p=d(),v=c();if(!(xf(v).length>1)&&uu(o)){const _=vu(t,p);return _.each(C=>{u(C,f())}),_.getOr(p)}return p},selectorChanged:(p,v)=>(i(p,v),h),selectorChangedWithUnbind:i,getScrollContainer:()=>{let p,v=t.getRoot();for(;v&&"BODY"!==v.nodeName;){if(v.scrollHeight>v.clientHeight){p=v;break}v=v.parentNode}return p},scrollIntoView:(p,v)=>{var _;ot(p)?((_=o).inline?WS:YS)(_,p,v):Nc(o,d(),v)},placeCaretAt:(p,v)=>u(Iv(p,v,o.getDoc())),getBoundingClientRect:()=>{const p=d();return p.collapsed?z.fromRangeStart(p).getClientRects()[0]:p.getBoundingClientRect()},destroy:()=>{e=r=s=null,b.destroy()}},g=kc(h),b=Dv(h,o);return h.bookmarkManager=g,h.controlSelection=b,h},RA=(t,e,n)=>{-1===Q.inArray(e,n)&&(t.addAttributeFilter(n,(o,r)=>{let s=o.length;for(;s--;)o[s].attr(r,null)}),e.push(n))},Y_=(t,e)=>{const n=((t,e)=>{const n=["data-mce-selected"],o={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...t},r=e&&e.dom?e.dom:Qt.DOM,s=e&&e.schema?e.schema:xn(o),i=qa(o,s);return l=o,c=r,(a=i).addAttributeFilter("data-mce-tabindex",(d,u)=>{let f=d.length;for(;f--;){const h=d[f];h.attr("tabindex",h.attr("data-mce-tabindex")),h.attr(u,null)}}),a.addAttributeFilter("src,href,style",(d,u)=>{const f="data-mce-"+u,h=l.url_converter,g=l.url_converter_scope;let b=d.length;for(;b--;){const p=d[b];let v=p.attr(f);void 0!==v?(p.attr(u,v.length>0?v:null),p.attr(f,null)):(v=p.attr(u),"style"===u?v=c.serializeStyle(c.parseStyle(v),p.name):h&&(v=h.call(g,v,u,p.name)),p.attr(u,v.length>0?v:null))}}),a.addAttributeFilter("class",d=>{let u=d.length;for(;u--;){const f=d[u];let h=f.attr("class");h&&(h=h.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),f.attr("class",h.length>0?h:null))}}),a.addAttributeFilter("data-mce-type",(d,u,f)=>{let h=d.length;for(;h--;){const g=d[h];"bookmark"===g.attr("data-mce-type")&&!f.cleanup&&(w.from(g.firstChild).exists(p=>{var v;return!As(null!==(v=p.value)&&void 0!==v?v:"")})?g.unwrap():g.remove())}}),a.addNodeFilter("noscript",d=>{var u;let f=d.length;for(;f--;){const h=d[f].firstChild;h&&(h.value=io.decode(null!==(u=h.value)&&void 0!==u?u:""))}}),a.addNodeFilter("script,style",(d,u)=>{var f;const h=b=>b.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let g=d.length;for(;g--;){const b=d[g],p=b.firstChild,v=null!==(f=p?.value)&&void 0!==f?f:"";if("script"===u){const _=b.attr("type");_&&b.attr("type","mce-no/type"===_?null:_.replace(/^mce\-/,"")),"xhtml"===l.element_format&&p&&v.length>0&&(p.value="// <![CDATA[\n"+h(v)+"\n// ]]>")}else"xhtml"===l.element_format&&p&&v.length>0&&(p.value="\x3c!--\n"+h(v)+"\n--\x3e")}}),a.addNodeFilter("#comment",d=>{let u=d.length;for(;u--;){const f=d[u],h=f.value;l.preserve_cdata&&0===h?.indexOf("[CDATA[")?(f.name="#cdata",f.type=4,f.value=c.decode(h.replace(/^\[CDATA\[|\]\]$/g,""))):0===h?.indexOf("mce:protected ")&&(f.name="#text",f.type=3,f.raw=!0,f.value=unescape(h).substr(14))}}),a.addNodeFilter("xml:namespace,input",(d,u)=>{let f=d.length;for(;f--;){const h=d[f];7===h.type?h.remove():1===h.type&&("input"!==u||h.attr("type")||h.attr("type","text"))}}),a.addAttributeFilter("data-mce-type",d=>{W(d,u=>{"format-caret"===u.attr("data-mce-type")&&(u.isEmpty(a.schema.getNonEmptyElements())?u.remove():u.unwrap())})}),a.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(d,u)=>{let f=d.length;for(;f--;)d[f].attr(u,null)}),l.remove_trailing_brs&&s_(l,a,a.schema),{schema:s,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,serialize:(a,l={})=>{const c={format:"html",...l},d=(g=a,v=b=c,ot(p=h=e)&&p.hasEventListeners("PreProcess")&&!v.no_events?((p,v,_)=>{let C;const k=p.dom;let x=v.cloneNode(!0);const N=document.implementation;if(N.createHTMLDocument){const D=N.createHTMLDocument("");Q.each("BODY"===x.nodeName?x.childNodes:[x],B=>{D.body.appendChild(D.importNode(B,!0))}),x="BODY"!==x.nodeName?D.body.firstChild:D.body,C=k.doc,k.doc=D}return B={..._,node:x},p.dispatch("PreProcess",B),C&&(k.doc=C),x;var B})(h,g,b):g),u=((h,g,b)=>{const p=un(b.getInner?g.innerHTML:h.getOuterHTML(g));return b.selection||ka(O(g))?p:Q.trim(p)})(r,d,c),f=((h,g,b)=>{const p=b.selection?{forced_root_block:!1,...b}:b,v=h.parse(g,p);return(_=>{const C=x=>"br"===x?.name,k=_.lastChild;if(C(k)){const x=k.prev;C(x)&&(k.remove(),x.remove())}})(v),v})(i,u,c);var h,g,b,p,v;return"tree"===c.format?f:((h,g,b,p,v)=>{var x;return((C,k,x)=>{return!k.no_events&&C?(D=C,B={...k,content:x},D.dispatch("PostProcess",B)).content:x;var D,B})(h,v,(x=p,Fs(g,b).serialize(x)))})(e,o,s,f,c)},addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:ft(RA,i,n),getTempAttrs:st(n),getNodeFilters:i.getNodeFilters,getAttributeFilters:i.getAttributeFilters,removeNodeFilter:i.removeNodeFilter,removeAttributeFilter:i.removeAttributeFilter};var a,l,c})(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},sp=(t,e,n={})=>{const o=(r=n,s=e,{format:"html",...r,set:!0,content:s});var r,s;return Qg(t,o).map(r=>{const s=(a=r.content,l=r,rp(t).editor.setContent(a,l));var a,l;return Jg(t,s.html,r),s.content}).getOr(e)},BA="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),LA="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),PA="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),X_=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],G_=(t,e)=>{const n=xt(e,o=>Ot(t,o));return ir(n)},Q_=(t,e)=>{const n=Q.makeMap(t.plugins," "),o=xt(e,r=>Ot(n,r));return ir(o)},$A=t=>ye(X_,e=>e.name===t).fold(()=>t,e=>e.replacedWith?`${t}, replaced by ${e.replacedWith}`:t),ju=Qt.DOM,$u=t=>w.from(t).each(e=>e.destroy()),Uu=(()=>{const t={};return{add:(e,n)=>{t[e]=n},get:e=>t[e]?t[e]:{icons:{}},has:e=>Ot(t,e)}})(),Va=pn.ModelManager,J_=(t,e)=>e.dom[t],Z_=(t,e)=>parseInt(oo(e,t),10),UA=ft(J_,"clientWidth"),zA=ft(J_,"clientHeight"),HA=ft(Z_,"margin-top"),qA=ft(Z_,"margin-left"),tC=t=>{const e=[],n=()=>{const l=t.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const c=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:c,close:c,getArgs:c}})()},o=()=>w.from(e[0]),r=()=>{W(e,l=>{l.reposition()})},s=l=>{Xs(e,c=>c===l).each(c=>{e.splice(c,1)})},i=(l,c=!0)=>{return t.removed||!(u=(d=t).inline?d.getBody():d.getContentAreaContainer(),w.from(u).map(O)).map(xs).getOr(!1)?{}:(c&&t.dispatch("BeforeOpenNotification",{notification:l}),ye(e,d=>{return!((u=n().getArgs(d)).type!==(f=l).type||u.text!==f.text||u.progressBar||u.timeout||f.progressBar||f.timeout);var u,f}).getOrThunk(()=>{t.editorManager.setActive(t);const d=n().open(l,()=>{s(d),r(),o().fold(()=>t.focus(),u=>Gv(O(u.getEl())))});return(u=>{e.push(u)})(d),r(),t.dispatch("OpenNotification",{notification:{...d}}),d}));var d,u},a=st(e);return(l=t).on("SkinLoaded",()=>{const c=vk(l);c&&i({text:c,type:"warning",timeout:0},!1),r()}),l.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(r)}),l.on("remove",()=>{W(e.slice(),c=>{n().close(c)})}),{open:i,close:()=>{o().each(l=>{n().close(l),s(l),r()})},getNotifications:a};var l},Wa=pn.PluginManager,Fi=pn.ThemeManager,eC=t=>{let e=[];const n=()=>{const i=t.theme;return i&&i.getWindowManagerImpl?i.getWindowManagerImpl():(()=>{const a=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:a,openUrl:a,alert:a,confirm:a,close:a}})()},o=(i,a)=>(...l)=>a?a.apply(i,l):void 0,r=i=>{t.dispatch("CloseWindow",{dialog:i}),e=xt(e,a=>a!==i),0===e.length&&t.focus()},s=i=>{t.editorManager.setActive(t),Vf(t),t.ui.show();const a=i();return e.push(l=a),t.dispatch("OpenWindow",{dialog:l}),a;var l};return t.on("remove",()=>{W(e,i=>{n().close(i)})}),{open:(i,a)=>s(()=>n().open(i,a,r)),openUrl:i=>s(()=>n().openUrl(i,r)),alert:(i,a,l)=>{const c=n();c.alert(i,o(l||c,a))},confirm:(i,a,l)=>{const c=n();c.confirm(i,o(l||c,a))},close:()=>{w.from(e[e.length-1]).each(i=>{n().close(i),r(i)})}}},nC=(t,e)=>{t.notificationManager.open({type:"error",text:e})},zu=(t,e)=>{t._skinLoaded?nC(t,e):t.on("SkinLoaded",()=>{nC(t,e)})},Ic=(t,e,n)=>{kv(t,e,{message:n}),console.error(n)},Fc=(t,e,n)=>n?`Failed to load ${t}: ${n} from url ${e}`:`Failed to load ${t} url: ${e}`,Hu=(t,...e)=>{const n=window.console;n&&(n.error?n.error(t,...e):n.log(t,...e))},oC=(t,e)=>{const n=t.editorManager.baseURL+"/skins/content",o=`content${t.editorManager.suffix}.css`;return Mt(e,r=>/^[a-z0-9\-]+$/i.test(r)&&!t.inline?`${n}/${r}/${o}`:t.documentBaseURI.toAbsolute(r))},rC=()=>{let t={};const e=(o,r)=>({status:o,resultUri:r}),n=o=>o in t;return{hasBlobUri:n,getResultUri:o=>{const r=t[o];return r?r.resultUri:null},isPending:o=>!!n(o)&&1===t[o].status,isUploaded:o=>!!n(o)&&2===t[o].status,markPending:o=>{t[o]=e(1,null)},markUploaded:(o,r)=>{t[o]=e(2,r)},removeFailed:o=>{delete t[o]},destroy:()=>{t={}}}};let WA=0;const sC=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),iC=(t,e)=>((t,e)=>{const n={},o=(l,c)=>new Promise((d,u)=>{const f=new XMLHttpRequest;f.open("POST",e.url),f.withCredentials=e.credentials,f.upload.onprogress=g=>{c(g.loaded/g.total*100)},f.onerror=()=>{u("Image upload failed due to a XHR Transport error. Code: "+f.status)},f.onload=()=>{if(f.status<200||f.status>=300)return void u("HTTP Error: "+f.status);const g=JSON.parse(f.responseText);var b,p;g&&ht(g.location)?d((p=g.location,(b=e.basePath)?b.replace(/\/$/,"")+"/"+p.replace(/^\//,""):p)):u("Invalid JSON: "+f.responseText)};const h=new FormData;h.append("file",l.blob(),l.filename()),f.send(h)}),r=Ut(e.handler)?e.handler:o,s=(l,c)=>({url:c,blobInfo:l,status:!0}),i=(l,c)=>({url:"",blobInfo:l,status:!1,error:c}),a=(l,c)=>{Q.each(n[l],d=>{d(c)}),delete n[l]};return{upload:(l,c)=>{return e.url||r!==o?(u=c,d=Q.grep(d=l,f=>!t.isUploaded(f.blobUri())),Promise.all(Q.map(d,f=>{return t.isPending(f.blobUri())?(h=>{const g=h.blobUri();return new Promise(b=>{n[g]=n[g]||[],n[g].push(b)})})(f):(g=r,b=u,t.markPending((h=f).blobUri()),new Promise(p=>{let v,_;try{const C=()=>{v&&(v.close(),_=Tt)},k=N=>{C(),t.markUploaded(h.blobUri(),N),a(h.blobUri(),s(h,N)),p(s(h,N))},x=N=>{C(),t.removeFailed(h.blobUri()),a(h.blobUri(),i(h,N)),p(i(h,N))};_=N=>{N<0||N>100||w.from(v).orThunk(()=>w.from(b).map(Ki)).each(D=>{v=D,D.progressBar.value(N)})},g(h,_).then(k,N=>{x(ht(N)?{message:N}:N)})}catch(C){p(i(h,C))}}));var h,g,b}))):new Promise(d=>{d([])});var d,u}}})(e,{url:sk(t),basePath:ik(t),credentials:ak(t),handler:lk(t)}),aC={remove_similar:!0,inherit:!1},Ka={selector:"td,th",...aC},XA={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Ka},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Ka},tablecellbordercolor:{styles:{borderColor:"%value"},...Ka},tablecellclass:{classes:["%value"],...Ka},tableclass:{selector:"table",classes:["%value"],...aC},tablecellborderstyle:{styles:{borderStyle:"%value"},...Ka},tablecellborderwidth:{styles:{borderWidth:"%value"},...Ka}},GA=st(XA),qu=Q.each,fo=Qt.DOM,ip=t=>ot(t)&&Pe(t),lC=(t,e)=>{const n=e&&e.schema||xn({}),o=i=>{const a=ht(i)?{name:i,classes:[],attrs:{}}:i,l=fo.create(a.name);return c=l,(d=a).classes.length>0&&fo.addClass(c,d.classes.join(" ")),fo.setAttribs(c,d.attrs),l;var c,d},r=(i,a,l)=>{let c;const d=a[0],u=ip(d)?d.name:void 0,f=((b,p)=>{const _=n.getElementRule(b.nodeName.toLowerCase())?.parentsRequired;return!(!_||!_.length)&&(p&&gt(_,p)?p:_[0])})(i,u);if(f)u===f?(c=d,a=a.slice(1)):c=f;else if(d)c=d,a=a.slice(1);else if(!l)return i;const h=c?o(c):fo.create("div");h.appendChild(i),l&&Q.each(l,b=>{const p=o(b);h.insertBefore(p,i)});const g=ip(c)?c.siblings:void 0;return r(h,a,g)},s=fo.create("div");if(t.length>0){const i=t[0],a=o(i),l=ip(i)?i.siblings:void 0;s.appendChild(r(a,t.slice(1),l))}return s},QA=t=>{let e="div";const n={name:e,classes:[],attrs:{},selector:t=Q.trim(t)};return"*"!==t&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(o,r,s,i,a)=>{switch(r){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":-1!==Q.inArray("checked disabled enabled read-only required".split(" "),s)&&(n.attrs[s]=s)}if("["===i){const l=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=e||"div",n},JA=(t,e)=>{let n="",o=wk(t);if(""===o)return"";const r=h=>ht(h)?h.replace(/%(\w+)/g,""):"",s=(h,g)=>fo.getStyle(g??t.getBody(),h,!0);if(ht(e)){const h=t.formatter.get(e);if(!h)return"";e=h[0]}if("preview"in e){const h=e.preview;if(!1===h)return"";o=h||o}let i,a=e.block||e.inline||"span";const l=ht(c=e.selector)?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Q.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),h=>{const g=Q.map(h.split(/(?:~\+|~|\+)/),QA),b=g.pop();return g.length&&(b.siblings=g),b}).reverse()):[];var c;l.length>0?(l[0].name||(l[0].name=a),a=e.selector,i=lC(l,t)):i=lC([a],t);const d=fo.select(a,i)[0]||i.firstChild;qu(e.styles,(h,g)=>{const b=r(h);b&&fo.setStyle(d,g,b)}),qu(e.attributes,(h,g)=>{const b=r(h);b&&fo.setAttrib(d,g,b)}),qu(e.classes,h=>{const g=r(h);fo.hasClass(d,g)||fo.addClass(d,g)}),t.dispatch("PreviewFormats"),fo.setStyles(i,{position:"absolute",left:-65535}),t.getBody().appendChild(i);const u=s("fontSize"),f=/px$/.test(u)?parseInt(u,10):0;return qu(o.split(" "),h=>{let g=s(h,d);if(!("background-color"===h&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(g)&&(g=s(h),"#ffffff"===du(g).toLowerCase())||"color"===h&&"#000000"===du(g).toLowerCase())){if("font-size"===h&&/em|%$/.test(g)){if(0===f)return;g=parseFloat(g)/(/%$/.test(g)?100:1)*f+"px"}"border"===h&&g&&(n+="padding:0 2px;"),n+=h+":"+g+";"}}),t.dispatch("AfterPreviewFormats"),fo.remove(i),n},cC=t=>{const e=(o=>{const r={},s=(i,a)=>{i&&(ht(i)?(Kt(a)||(a=[a]),W(a,l=>{Ne(l.deep)&&(l.deep=!co(l)),Ne(l.split)&&(l.split=!co(l)||Be(l)),Ne(l.remove)&&co(l)&&!Be(l)&&(l.remove="none"),co(l)&&Be(l)&&(l.mixed=!0,l.block_expand=!0),ht(l.classes)&&(l.classes=l.classes.split(/\s+/))}),r[i]=a):Xt(i,(l,c)=>{s(c,l)}))};return s((i=>{const a=i.dom,l=i.schema.type,c={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:d=>{a.setStyle(d,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:d=>{a.setStyle(d,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const d={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==l?[f,d,u]:[d,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(d,u,f)=>ct(d)&&d.hasAttribute("href"),onformat:(d,u,f)=>{Q.each(f,(h,g)=>{a.setAttrib(d,g,h)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":d=>{var u;return null!==(u=d?.customValue)&&void 0!==u?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Q.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),d=>{c[d]={block:d,remove:"all"}}),c})(o)),s(GA()),s(Ck(o)),{get:i=>ot(i)?r[i]:r,has:i=>Ot(r,i),register:s,unregister:i=>(i&&r[i]&&delete r[i],r)}})(t),n=je({});return(o=>{o.addShortcut("meta+b","","Bold"),o.addShortcut("meta+i","","Italic"),o.addShortcut("meta+u","","Underline");for(let r=1;r<=6;r++)o.addShortcut("access+"+r,"",["FormatBlock",!1,"h"+r]);o.addShortcut("access+7","",["FormatBlock",!1,"p"]),o.addShortcut("access+8","",["FormatBlock",!1,"div"]),o.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(o=t).on("mouseup keydown",r=>{var s;((i,a,l)=>{const c=i.selection,d=i.getBody();Lg(i,null,l),8!==a&&46!==a||!c.isCollapsed()||"\ufeff"!==c.getStart().innerHTML||Lg(i,Si(d,c.getStart())),37!==a&&39!==a||Lg(i,Si(d,c.getStart()))})(o,r.keyCode,(s=o.selection.getRng().endContainer,X(s)&&rn(s.data,Ee)))}),Nr(t)||((o,r)=>{o.set({}),r.on("NodeChange",s=>{n_(r,s.element,o.get())}),r.on("FormatApply FormatRemove",s=>{const i=w.from(s.node).map(a=>Ec(a)?a:a.startContainer).bind(a=>ct(a)?w.some(a):w.from(a.parentElement)).getOrThunk(()=>Zy(r));n_(r,i,o.get())})})(n,t),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(o,r,s)=>{var a,l,c;a=o,l=r,c=s,ve(t).formatter.apply(a,l,c)},remove:(o,r,s,i)=>{var l,c,d,u;l=o,c=r,d=s,u=i,ve(t).formatter.remove(l,c,d,u)},toggle:(o,r,s)=>{var a,l,c;a=o,l=r,c=s,ve(t).formatter.toggle(a,l,c)},match:(o,r,s,i)=>{return l=o,c=r,d=s,u=i,ve(t).formatter.match(l,c,d,u);var l,c,d,u},closest:o=>{return s=o,ve(t).formatter.closest(s);var s},matchAll:(o,r)=>{return i=o,a=r,ve(t).formatter.matchAll(i,a);var i,a},matchNode:(o,r,s,i)=>{return l=o,c=r,d=s,u=i,ve(t).formatter.matchNode(l,c,d,u);var l,c,d,u},canApply:o=>{return s=o,ve(t).formatter.canApply(s);var s},formatChanged:(o,r,s,i)=>{return l=n,c=o,d=r,u=s,f=i,ve(t).formatter.formatChanged(l,c,d,u,f);var l,c,d,u,f},getCssText:ft(JA,t)};var o},dC=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},uC=t=>{const e=Bs(),n=je(0),o=je(0),r={data:[],typing:!1,beforeChange:()=>{var i,a;i=n,a=e,ve(t).undoManager.beforeChange(i,a)},add:(s,i)=>{return l=r,c=o,d=n,u=e,f=s,h=i,ve(t).undoManager.add(l,c,d,u,f,h);var l,c,d,u,f,h},dispatchChange:()=>{t.setDirty(!0);const s=Iu(t);s.bookmark=af(t.selection),t.dispatch("change",{level:s,lastLevel:ar(r.data,o.get()).getOrUndefined()})},undo:()=>{return i=r,a=n,l=o,ve(t).undoManager.undo(i,a,l);var i,a,l},redo:()=>{return i=o,a=r.data,ve(t).undoManager.redo(i,a);var i,a},clear:()=>{var i,a;i=r,a=o,ve(t).undoManager.clear(i,a)},reset:()=>{var i;i=r,ve(t).undoManager.reset(i)},hasUndo:()=>{return i=r,a=o,ve(t).undoManager.hasUndo(i,a);var i,a},hasRedo:()=>{return i=r,a=o,ve(t).undoManager.hasRedo(i,a);var i,a},transact:s=>{return a=r,l=n,c=s,ve(t).undoManager.transact(a,l,c);var a,l,c},ignore:s=>{var a,l;a=n,l=s,ve(t).undoManager.ignore(a,l)},extra:(s,i)=>{var l,c,d,u;l=r,c=o,d=s,u=i,ve(t).undoManager.extra(l,c,d,u)}};return Nr(t)||((s,i,a)=>{const l=je(!1),c=d=>{Fu(i,!1,a),i.add({},d)};s.on("init",()=>{i.add()}),s.on("BeforeExecCommand",d=>{dC(d.command)||($_(i,a),i.beforeChange())}),s.on("ExecCommand",d=>{dC(d.command)||c(d)}),s.on("ObjectResizeStart cut",()=>{i.beforeChange()}),s.on("SaveContent ObjectResized blur",c),s.on("dragend",c),s.on("keyup",d=>{const u=d.keyCode;if(d.isDefaultPrevented())return;const f=Rt.os.isMacOS()&&"Meta"===d.key;(u>=33&&u<=36||u>=37&&u<=40||45===u||d.ctrlKey||f)&&(c(),s.nodeChanged()),46!==u&&8!==u||s.nodeChanged(),l.get()&&i.typing&&!np(Iu(s),i.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged())}),s.on("keydown",d=>{const u=d.keyCode;if(!d.isDefaultPrevented()){if(!(u>=33&&u<=36||u>=37&&u<=40||45===u))return!(u<16||u>20)||224===u||91===u||i.typing||d.ctrlKey&&!d.altKey||d.metaKey?void((Rt.os.isMacOS()?d.metaKey:d.ctrlKey&&!d.altKey)&&i.beforeChange()):(i.beforeChange(),Fu(i,!0,a),i.add({},d),void l.set(!0));i.typing&&c(d)}}),s.on("mousedown",d=>{i.typing&&c(d)}),s.on("input",d=>{var u,f;d.inputType&&("insertReplacementText"===d.inputType||"insertText"===(u=d).inputType&&null===u.data||"insertFromPaste"===(f=d).inputType||"insertFromDrop"===f.inputType)&&c(d)}),s.on("AddUndo Undo Redo ClearUndos",d=>{d.isDefaultPrevented()||s.nodeChanged()})})(t,r,n),(s=t).addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo"),r;var s},ZA=[9,27,lt.HOME,lt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,lt.DOWN,lt.UP,lt.LEFT,lt.RIGHT].concat(Rt.browser.isFirefox()?[224]:[]),mC="data-mce-placeholder",fC=t=>"keydown"===t.type||"keyup"===t.type,gC=t=>{const e=t.keyCode;return e===lt.BACKSPACE||e===lt.DELETE},tO=(t,e)=>({from:t,to:e}),ap=(t,e)=>{const n=O(t),o=O(e.container());return ku(n,o).map(r=>({block:r,position:e}))},pC=(t,e)=>To(e,n=>di(n)||Bn(n.dom),n=>zt(n,t)).filter(ln).getOr(t),hC=t=>{const e=(n=>{const o=_e(n);return Xs(o,Ln).fold(st(o),r=>o.slice(0,r))})(t);return W(e,ne),e},bC=(t,e)=>{const n=ns(e,t);return ye(n.reverse(),o=>rt(o)).each(ne)},eO=(t,e,n,o)=>{if(rt(n))return Wo(n),nn(n.dom);0===xt(fr(o),s=>!rt(s)).length&&rt(e)&&Je(o,Re("br"));const r=In(n.dom,z.before(o.dom));return W(hC(e),s=>{Je(o,s)}),bC(t,e),r},nO=(t,e,n)=>{if(rt(n)){if(rt(e)){const s=Uo((i=>{const a=(l,c)=>Ll(l).fold(()=>c,d=>xa(d)?a(d,c.concat(_i(d))):c);return a(i,[])})(n),(i,a)=>(Bd(i,a),a),ui());Ss(e),ge(e,s)}return ne(n),nn(e.dom)}const o=Fo(n.dom);return W(hC(e),r=>{ge(n,r)}),bC(t,e),o},vC=(t,e)=>{Ma(t,e.dom).bind(n=>w.from(n.getNode())).map(O).filter(ro).each(ne)},yC=(t,e,n)=>{return vC(!0,e),vC(!1,n),(o=e,r=n,No(r,o)?((s,i)=>{const a=ns(i,s);return w.from(a[a.length-1])})(r,o):w.none()).fold(ft(nO,t,e,n),ft(eO,t,e,n));var o,r},_C=(t,e,n,o)=>e?yC(t,o,n):yC(t,n,o),lp=(t,e)=>{const n=O(t.getBody());return(r=n.dom,s=e,i=t.selection.getRng(),i.collapsed?((a,l,c)=>{const d=ap(a,z.fromRangeStart(c)),u=d.bind(f=>ao(l,a,f.position).bind(h=>ap(a,h).map(g=>{return b=a,p=l,ce((v=g).position.getNode())&&!rt(v.block)?Ma(!1,v.block.dom).bind(_=>_.isEqual(v.position)?ao(p,b,_).bind(C=>ap(b,C)):w.some(v)).getOr(v):v;var b,p,v})));return qe(d,u,tO).filter(f=>{return!zt((h=f).from.block,h.to.block)&&((h,g)=>{const b=O(h);return zt(pC(b,g.from.block),pC(b,g.to.block))})(a,f)&&(h=>!1===Zt(h.from.block.dom)&&!1===Zt(h.to.block.dom))(f)&&(h=>{const g=b=>vr(b)||oe(b.dom);return g(h.from.block)&&g(h.to.block)})(f);var h})})(r,s,i):w.none()).map(r=>()=>{_C(n,e,r.from.block,r.to.block).each(s=>{t.selection.setRng(s.toRange())})});var r,s,i},CC=(t,e)=>{const n=O(e),o=ft(zt,t);return Oo(n,di,o).isSome()},cp=(t,e)=>t.selection.isCollapsed()?w.none():(t=>{const e=O(t.getBody());return((n,o)=>{const r=In(n.dom,z.fromRangeStart(o)).isNone(),s=Sn(n.dom,z.fromRangeEnd(o)).isNone();return!(CC(i=n,(a=o).startContainer)||CC(i,a.endContainer))&&r&&s;var i,a})(e,t.selection.getRng())?(n=t,w.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,o)=>{const r=o.getRng();return qe(ku(n,O(r.startContainer)),ku(n,O(r.endContainer)),(s,i)=>zt(s,i)?w.none():w.some(()=>{r.deleteContents(),_C(n,!0,s,i).each(a=>{o.setRng(a.toRange())})})).getOr(w.none())})(e,t.selection);var n})(t),os=(t,e,n,o,r)=>w.from(e._selectionOverrides.showCaret(t,n,o,r)),jc=(t,e)=>t.dispatch("BeforeObjectSelected",{target:e}).isDefaultPrevented()?w.none():w.some((n=>{const o=n.ownerDocument.createRange();return o.selectNode(n),o})(e)),dp=(t,e,n)=>e.collapsed?((o,r,s)=>{const i=hf(1,o.getBody(),r),a=z.fromRangeStart(i),l=a.getNode();if(hc(l))return os(1,o,l,!a.isAtEnd(),!1);const c=a.getNode(!0);if(hc(c))return os(1,o,c,!1,!1);const d=Li(o.dom.getRoot(),a.getNode());return hc(d)?os(1,o,d,!1,s):w.none()})(t,e,n).getOr(e):e,rO=t=>$s(t)||Ac(t),sO=t=>Us(t)||Oc(t),wC=(t,e,n,o,r,s)=>{var i,a;os(o,t,s.getNode(!r),r,!0).each(i=>{if(e.collapsed){const a=e.cloneRange();r?a.setEnd(i.startContainer,i.startOffset):a.setStart(i.endContainer,i.endOffset),a.deleteContents()}else e.deleteContents();t.selection.setRng(i)}),i=t.dom,X(a=n)&&0===a.data.length&&i.remove(a)},up=(t,e)=>((n,o)=>{const r=n.selection.getRng();if(!X(r.commonAncestorContainer))return w.none();const s=o?$e.Forwards:$e.Backwards,i=Er(n.getBody()),a=ft(bf,o?i.next:i.prev),l=o?rO:sO,c=Cc(s,n.getBody(),r),d=a(c),u=d&&mo(o,d);if(!u||!iu(c,u))return w.none();if(l(u))return w.some(()=>wC(n,r,c.getNode(),s,o,u));const f=a(u);return f&&l(f)&&iu(u,f)?w.some(()=>wC(n,r,c.getNode(),s,o,f)):w.none()})(t,e),mp=(t,e)=>{const n=t.getBody();return e?nn(n).filter($s):Fo(n).filter(Us)},fp=t=>{const e=t.selection.getRng();return!e.collapsed&&(mp(t,!0).exists(n=>n.isEqual(z.fromRangeStart(e)))||mp(t,!1).exists(n=>n.isEqual(z.fromRangeEnd(e))))},go=_r([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),EC=(t,e,n)=>ao(e,t,n).bind(o=>{return r=o.getNode(),ot(r)&&(di(O(r))||ci(O(r)))||((s,i,a,l)=>{const c=d=>xa(O(d))&&!Cr(a,l,s);return Ub(!i,a).fold(()=>Ub(i,l).fold(ee,c),c)})(t,e,n,o)?w.none():e&&Zt(o.getNode())||!e&&Zt(o.getNode(!0))?((s,i,a,l)=>{const c=l.getNode(!i);return ku(O(s),O(a.getNode())).map(d=>rt(d)?go.remove(d.dom):go.moveToElement(c)).orThunk(()=>w.some(go.moveToElement(c)))})(t,e,n,o):e&&Us(n)||!e&&$s(n)?w.some(go.moveToPosition(o)):w.none();var r}),xC=(t,e)=>w.from(Li(t.getBody(),e)),kC=t=>{const e=t.dom,n=t.selection,o=Li(t.getBody(),n.getNode());if(Bn(o)&&e.isBlock(o)&&e.isEmpty(o)){const r=e.create("br",{"data-mce-bogus":"1"});e.setHTML(o,""),o.appendChild(r),n.setRng(z.before(r).toRange())}return!0},gp=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=t.selection.getNode();return xC(t,n).filter(Zt).fold(()=>((o,r,s)=>{const i=hf(r?1:-1,o,s),a=z.fromRangeStart(i),l=O(o);return!r&&Us(a)?w.some(go.remove(a.getNode(!0))):r&&$s(a)?w.some(go.remove(a.getNode())):!r&&$s(a)&&sg(l,a)?yN(l,a).map(c=>go.remove(c.getNode())):r&&Us(a)&&rg(l,a)?_N(l,a).map(c=>go.remove(c.getNode())):(c=o,((f,h)=>{const g=h.getNode(!f),b=f?"after":"before";return ct(g)&&g.getAttribute("data-mce-caret")===b})(d=r,u=a)?(f=d,h=u.getNode(!d),he(h)?w.none():f&&Zt(h.nextSibling)?w.some(go.moveToElement(h.nextSibling)):!f&&Zt(h.previousSibling)?w.some(go.moveToElement(h.previousSibling)):w.none()).orThunk(()=>EC(c,d,u)):EC(c,d,u).bind(f=>((h,g,b)=>b.fold(p=>w.some(go.remove(p)),p=>w.some(go.moveToElement(p)),p=>Cr(g,p,h)?w.none():w.some(go.moveToPosition(p))))(c,u,f)));var c,d,u,f,h})(t.getBody(),e,t.selection.getRng()).map(o=>()=>{return o.fold((r=t,s=e,i=>(r._selectionOverrides.hideFakeCaret(),Di(r,s,O(i)),!0)),((r,s)=>i=>{const a=s?z.before(i):z.after(i);return r.selection.setRng(a.toRange()),!0})(t,e),(r=>s=>(r.selection.setRng(s.toRange()),!0))(t));var r,s}),()=>w.some(Tt))})(t,e):((n,o)=>{const r=n.selection.getNode();return Zt(r)&&!_a(r)?xC(n,r.parentNode).filter(Zt).fold(()=>w.some(()=>{var s;s=O(n.getBody()),W(De(s,".mce-offscreen-selection"),ne),Di(n,o,O(n.selection.getNode())),ug(n)}),()=>w.some(Tt)):fp(n)?w.some(()=>{Z0(n,n.selection.getRng(),O(n.getBody()))}):w.none()})(t,e),pp=(t,e)=>t.selection.isCollapsed()?((n,o)=>{const r=z.fromRangeStart(n.selection.getRng());return ao(o,n.getBody(),r).filter(s=>o?gN(s):pN(s)).bind(s=>pf(o?0:-1,s)).map(s=>()=>n.selection.select(s))})(t,e):w.none(),Ya=X,SC=t=>Ya(t)&&t.data[0]===xe,NC=t=>Ya(t)&&t.data[t.data.length-1]===xe,AC=t=>{var e;return(null!==(e=t.ownerDocument)&&void 0!==e?e:document).createTextNode(xe)},Vu=(t,e)=>t?(n=>{var o;if(Ya(n.previousSibling))return NC(n.previousSibling)||n.previousSibling.appendData(xe),n.previousSibling;if(Ya(n))return SC(n)||n.insertData(0,xe),n;{const r=AC(n);return null===(o=n.parentNode)||void 0===o||o.insertBefore(r,n),r}})(e):(n=>{var o,r;if(Ya(n.nextSibling))return SC(n.nextSibling)||n.nextSibling.insertData(0,xe),n.nextSibling;if(Ya(n))return NC(n)||n.appendData(xe),n;{const s=AC(n);return n.nextSibling?null===(o=n.parentNode)||void 0===o||o.insertBefore(s,n.nextSibling):null===(r=n.parentNode)||void 0===r||r.appendChild(s),s}})(e),aO=ft(Vu,!0),lO=ft(Vu,!1),OC=(t,e)=>X(t.container())?Vu(e,t.container()):Vu(e,t.getNode()),TC=(t,e)=>{const n=e.get();return n&&t.container()===n&&Ko(n)},hp=(t,e)=>e.fold(n=>{xi(t.get());const o=aO(n);return t.set(o),w.some(z(o,o.length-1))},n=>nn(n).map(o=>{if(TC(o,t)){const r=t.get();return z(r,1)}{xi(t.get());const r=OC(o,!0);return t.set(r),z(r,1)}}),n=>Fo(n).map(o=>{if(TC(o,t)){const r=t.get();return z(r,r.length-1)}{xi(t.get());const r=OC(o,!1);return t.set(r),z(r,r.length-1)}}),n=>{xi(t.get());const o=lO(n);return t.set(o),w.some(z(o,1))}),RC=(t,e)=>{for(let n=0;n<t.length;n++){const o=t[n].apply(null,e);if(o.isSome())return o}return w.none()},hn=_r([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),DC=(t,e)=>Ms(e,t)||t,cO=(t,e,n)=>{const o=Y0(n),r=DC(e,o.container());return zs(t,r,o).fold(()=>Sn(r,o).bind(ft(zs,t,r)).map(s=>hn.before(s)),w.none)},dO=(t,e)=>null===Si(t,e),BC=(t,e,n)=>zs(t,e,n).filter(ft(dO,e)),uO=(t,e,n)=>{const o=X0(n);return BC(t,e,o).bind(r=>In(r,o).isNone()?w.some(hn.start(r)):w.none())},mO=(t,e,n)=>{const o=Y0(n);return BC(t,e,o).bind(r=>Sn(r,o).isNone()?w.some(hn.end(r)):w.none())},fO=(t,e,n)=>{const o=X0(n),r=DC(e,o.container());return zs(t,r,o).fold(()=>In(r,o).bind(ft(zs,t,r)).map(s=>hn.after(s)),w.none)},LC=t=>!K0(bp(t)),Ar=(t,e,n)=>RC([cO,uO,mO,fO],[t,e,n]).filter(LC),bp=t=>t.fold(Ke,Ke,Ke,Ke),PC=t=>t.fold(st("before"),st("start"),st("end"),st("after")),Wu=t=>t.fold(hn.before,hn.before,hn.after,hn.after),vp=t=>t.fold(hn.start,hn.start,hn.end,hn.end),gO=(t,e,n,o,r,s)=>qe(zs(e,n,o),zs(e,n,r),(i,a)=>i!==a&&((l,c,d)=>{const u=Ms(c,l),f=Ms(d,l);return ot(u)&&u===f})(n,i,a)?hn.after(t?i:a):s).getOr(s),pO=(t,e)=>t.fold(me,n=>{return r=e,!(PC(o=n)===PC(r)&&bp(o)===bp(r));var o,r}),hO=(t,e)=>t?e.fold(yo(w.some,hn.start),w.none,yo(w.some,hn.after),w.none):e.fold(w.none,yo(w.some,hn.before),w.none,yo(w.some,hn.end)),MC=(t,e,n)=>{const o=t?1:-1;return e.setRng(z(n.container(),n.offset()+o).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0};var Or;!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(Or||(Or={}));const Ku=(t,e)=>t===$e.Backwards?Gs(e):e,bO=(t,e,n)=>t===$e.Forwards?e.next(n):e.prev(n),vO=(t,e,n,o)=>ce(o.getNode(e===$e.Forwards))?Or.Br:!1===Cr(n,o)?Or.Block:Or.Wrap,IC=(t,e,n,o)=>{const r=Er(n);let s=o;const i=[];for(;s;){const a=bO(e,r,s);if(!a)break;if(ce(a.getNode(!1)))return e===$e.Forwards?{positions:Ku(e,i).concat([a]),breakType:Or.Br,breakAt:w.some(a)}:{positions:Ku(e,i),breakType:Or.Br,breakAt:w.some(a)};if(a.isVisible()){if(t(s,a)){const l=vO(0,e,s,a);return{positions:Ku(e,i),breakType:l,breakAt:w.some(a)}}i.push(a),s=a}else s=a}return{positions:Ku(e,i),breakType:Or.Eol,breakAt:w.none()}},FC=(t,e,n,o)=>e(n,o).breakAt.map(r=>{const s=e(n,r).positions;return t===$e.Backwards?s.concat(r):[r].concat(s)}).getOr([]),yp=(t,e)=>Me(t,(n,o)=>n.fold(()=>w.some(o),r=>qe(Ae(r.getClientRects()),Ae(o.getClientRects()),(s,i)=>{const a=Math.abs(e-s.left);return Math.abs(e-i.left)<=a?o:r}).or(n)),w.none()),Yu=(t,e)=>Ae(e.getClientRects()).bind(n=>yp(t,n.left)),$c=ft(IC,z.isAbove,-1),Uc=ft(IC,z.isBelow,1),jC=ft(FC,-1,$c),$C=ft(FC,1,Uc),UC=(t,e)=>$c(t,e).breakAt.isNone(),zC=(t,e)=>Uc(t,e).breakAt.isNone(),yO=(t,e)=>Yu(jC(t,e),e),_O=(t,e)=>Yu($C(t,e),e),CO=Zt,HC=(t,e)=>Math.abs(t.left-e),qC=(t,e)=>Math.abs(t.right-e),VC=(t,e)=>Qi(t,(n,o)=>{const r=Math.min(HC(n,e),qC(n,e)),s=Math.min(HC(o,e),qC(o,e));return s===r&&gs(o,"node")&&CO(o.node)||s<r?o:n}),wO=t=>{const e=n=>Mt(n,o=>{const r=wi(o);return r.node=t,r});if(ct(t))return e(t.getClientRects());if(X(t)){const n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}return[]},WC=t=>Un(t,wO);var zc;!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(zc||(zc={}));const KC=(t,e,n,o,r,s)=>{let i=0;const a=[],l=u=>{let f=WC([u]);-1===t&&(f=f.reverse());for(let h=0;h<f.length;h++){const g=f[h];if(!n(g,c)){if(a.length>0&&e(g,Mr(a))&&i++,g.line=i,r(g))return!0;a.push(g)}}return!1},c=Mr(s.getClientRects());if(!c)return a;const d=s.getNode();return d&&(l(d),((u,f,h,g)=>{let b=g;for(;b=vc(b,u,Vd,f);)if(h(b))return})(t,o,l,d)),a},EO=ft(KC,zc.Up,dc,uc),xO=ft(KC,zc.Down,uc,dc),YC=t=>Mr(t.getClientRects()),XC=t=>e=>e.line>t,_p=t=>e=>e.line===t,rs=(t,e)=>{t.selection.setRng(e),Nc(t,t.selection.getRng())},Cp=(t,e,n)=>w.some(dp(t,e,n)),GC=(t,e,n,o,r,s)=>{const i=e===$e.Forwards,a=Er(t.getBody()),l=ft(bf,i?a.next:a.prev),c=i?o:r;if(!n.collapsed){const g=Jd(n);if(s(g))return os(e,t,g,e===$e.Backwards,!1);if(fp(t)){const b=n.cloneRange();return b.collapse(e===$e.Backwards),w.from(b)}}const d=Cc(e,t.getBody(),n);if(c(d))return jc(t,d.getNode(!i));let u=l(d);const f=Ud(n);if(!u)return f?w.some(n):w.none();if(u=mo(i,u),c(u))return os(e,t,u.getNode(!i),i,!1);const h=l(u);return h&&c(h)&&iu(u,h)?os(e,t,h.getNode(!i),i,!1):f?Cp(t,u.toRange(),!1):w.none()},QC=(t,e,n,o,r,s)=>{const i=Cc(e,t.getBody(),n),a=Mr(i.getClientRects()),l=e===zc.Down,c=t.getBody();if(!a)return w.none();if(fp(t)){const b=l?z.fromRangeEnd(n):z.fromRangeStart(n);return(l?_O:yO)(c,b).orThunk(()=>w.from(b)).map(p=>p.toRange())}const d=(l?xO:EO)(c,XC(1),i),u=xt(d,_p(1)),f=a.left,h=VC(u,f);if(h&&s(h.node)){const b=Math.abs(f-h.left),p=Math.abs(f-h.right);return os(e,t,h.node,b<p,!1)}let g;if(g=o(i)?i.getNode():r(i)?i.getNode(!0):Jd(n),g){const b=((v,_,C,k)=>{const x=Er(_);let N,D,B,P;const j=[];let A=0;1===v?(N=x.next,D=uc,B=dc,P=z.after(k)):(N=x.prev,D=dc,B=uc,P=z.before(k));const T=YC(P);do{if(!P.isVisible())continue;const I=YC(P);if(B(I,T))continue;j.length>0&&D(I,Mr(j))&&A++;const q=wi(I);if(q.position=P,q.line=A,C(q))return j;j.push(q)}while(P=N(P));return j})(e,c,XC(1),g);let p=VC(xt(b,_p(1)),f);if(p||(p=Mr(xt(b,_p(0))),p))return Cp(t,p.position.toRange(),!1)}return 0===u.length?wp(t,l).filter(l?r:o).map(b=>dp(t,b.toRange(),!1)):w.none()},wp=(t,e)=>{const n=t.selection.getRng(),o=e?z.fromRangeEnd(n):z.fromRangeStart(n),r=(s=o.container(),i=t.getBody(),Oo(O(s),a=>bS(a.dom),a=>a.dom===i).map(a=>a.dom).getOr(i));var s,i;if(e){const a=Uc(r,o);return zn(a.positions)}{const a=$c(r,o);return Ae(a.positions)}},JC=(t,e,n)=>wp(t,e).filter(n).exists(o=>(t.selection.setRng(o.toRange()),!0)),Xu=(t,e)=>{const n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},ZC=(t,e)=>{t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},tw=(t,e,n)=>hp(e,n).map(o=>(Xu(t,o),n)),ew=(t,e,n)=>!!pc(t)&&((t,e,n)=>{const o=t.getBody(),r=((s,i,a)=>{const l=z.fromRangeStart(s);if(s.collapsed)return l;{const c=z.fromRangeEnd(s);return a?In(i,c).getOr(c):Sn(i,l).getOr(l)}})(t.selection.getRng(),o,n);return((s,i,a,l)=>{const c=mo(s,l),d=Ar(i,a,c);return Ar(i,a,c).bind(ft(hO,s)).orThunk(()=>((u,f,h,g,b)=>{const p=mo(u,b);return ao(u,h,p).map(ft(mo,u)).fold(()=>g.map(Wu),v=>Ar(f,h,v).map(ft(gO,u,f,h,p,v)).filter(ft(pO,g))).filter(LC)})(s,i,a,d,l))})(n,ft(Bi,t),o,r).bind(s=>tw(t,e,s))})(t,e,n).isSome(),nw=(t,e,n)=>!!pc(e)&&((o,r)=>{const s=r.selection.getRng(),i=o?z.fromRangeEnd(s):z.fromRangeStart(s);return!!Ut(r.selection.getSel().modify)&&(o&&mi(i)?MC(!0,r.selection,i):!(o||!Yl(i))&&MC(!1,r.selection,i))})(t,e),NO=ft(nw,!0),AO=ft(nw,!1),Gu=(t,e,n)=>{if(pc(t)){const o=wp(t,e).getOrThunk(()=>{const r=t.selection.getRng();return e?z.fromRangeEnd(r):z.fromRangeStart(r)});return Ar(ft(Bi,t),t.getBody(),o).exists(r=>{const s=Wu(r);return hp(n,s).exists(i=>(Xu(t,i),!0))})}return!1},ow=(t,e)=>n=>hp(e,n).map(o=>()=>Xu(t,o)),rw=(t,e,n,o)=>{const r=t.getBody(),s=ft(Bi,t);t.undoManager.ignore(()=>{t.selection.setRng(((i,a)=>{const l=document.createRange();return l.setStart(i.container(),i.offset()),l.setEnd(a.container(),a.offset()),l})(n,o)),dg(t),Ar(s,r,z.fromRangeStart(t.selection.getRng())).map(vp).bind(ow(t,e)).each(it)}),t.nodeChanged()},Ep=(t,e,n)=>{if(t.selection.isCollapsed()&&pc(t)){const o=z.fromRangeStart(t.selection.getRng());return((r,s,i,a)=>{const l=(u=r.getBody(),f=a.container(),Ms(f,u)||u),c=ft(Bi,r),d=Ar(c,l,a);var u,f;return d.bind(u=>i?u.fold(st(w.some(vp(u))),w.none,st(w.some(Wu(u))),w.none):u.fold(w.none,st(w.some(Wu(u))),w.none,st(w.some(vp(u))))).map(ow(r,s)).getOrThunk(()=>{const u=Pa(i,l,a),f=u.bind(h=>Ar(c,l,h));return qe(d,f,()=>zs(c,l,a).bind(h=>{return qe(nn(g=h),Fo(g),(b,p)=>{const v=mo(!0,b),_=mo(!1,p);return Sn(g,v).forall(C=>C.isEqual(_))}).getOr(!0)?w.some(()=>{Di(r,i,O(h))}):w.none();var g})).getOrThunk(()=>f.bind(()=>u.map(h=>()=>{i?rw(r,s,a,h):rw(r,s,h,a)})))})})(t,e,n,o)}return w.none()},sw=(t,e)=>{const n=O(t.getBody()),o=O(t.selection.getStart()),r=ns(o,n);return Xs(r,e).fold(st(r),s=>r.slice(0,s))},OO=t=>1===Ml(t),iw=(t,e)=>{const n=ft(ky,t);return Un(e,o=>n(o)?[o.dom]:[])},aw=t=>{const e=sw(t,Ln);return iw(t,e)},lw=(t,e)=>{const n=t.selection.getStart(),o=((r,s)=>{const i=s.parentElement;return ce(s)&&!se(i)&&r.dom.isEmpty(i)})(t,n)||Sy(O(n))?xy(n,e):((r,s)=>{const{caretContainer:i,caretPosition:a}=Ey(s);return r.insertNode(i.dom),a})(t.selection.getRng(),e);t.selection.setRng(o.toRange())},cw=t=>X(t.startContainer),xp=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=xt(sw(t,r=>Ln(r)||Ml(r)>1),OO);return zn(n).bind(o=>{const r=z.fromRangeStart(t.selection.getRng());return Q0(e,r,o.dom)&&!Sy(o)?w.some(()=>((s,i,a,l)=>{const c=iw(i,l);if(0===c.length)Di(i,s,a);else{const d=xy(a.dom,c);i.selection.setRng(d.toRange())}})(e,t,o,n)):w.none()})})(t,e):(n=>{if((t=>{const e=t.selection.getRng();return 0===(n=e).startOffset&&cw(n)&&((n,o)=>{const r=o.startContainer.parentElement;return!se(r)&&ky(n,O(r))})(t,e)&&(n=>{return(r=>{const s=r.startContainer.parentNode,i=r.endContainer.parentNode;return!se(s)&&!se(i)&&s.isEqualNode(i)})(o=n)&&(r=>{const s=r.endContainer;return r.endOffset===(X(s)?s.length:s.childNodes.length)})(o)||(o=>!o.endContainer.isEqualNode(o.commonAncestorContainer))(n);var o})(e);var n})(n)){const o=aw(n);return w.some(()=>{dg(n),((r,s)=>{const i=Pr(s,aw(r));i.length>0&&lw(r,i)})(n,o)})}return w.none()})(t),Hc=t=>((e=>{const n=e.selection.getRng();return n.collapsed&&(cw(n)||e.dom.isEmpty(n.startContainer))&&!(t=>Oo(t,r=>jo(r.dom),Ln).isSome())(O(e.selection.getStart()))})(t)&&lw(t,[]),!0),kp=(t,e,n)=>ot(n)?w.some(()=>{t._selectionOverrides.hideFakeCaret(),Di(t,e,O(n))}):w.none(),Sp=(t,e)=>t.selection.isCollapsed()?((n,o)=>{const r=o?Ac:Oc,i=Cc(o?$e.Forwards:$e.Backwards,n.getBody(),n.selection.getRng());return r(i)?kp(n,o,i.getNode(!o)):w.from(mo(o,i)).filter(a=>r(a)&&iu(i,a)).bind(a=>kp(n,o,a.getNode(!o)))})(t,e):((n,o)=>{const r=n.selection.getNode();return Ze(r)?kp(n,o,r):w.none()})(t,e),Np=t=>Zs(t??"").getOr(0),dw=(t,e)=>(t||"table"===Wt(e)?"margin":"padding")+("rtl"===oo(e,"direction")?"-right":"-left"),uw=t=>{const e=fw(t);return!t.mode.isReadOnly()&&(e.length>1||(n=t,sr(e,r=>{const s=dw(_b(n),r),i=dn(r,s).map(Np).getOr(0);return"false"!==n.dom.getContentEditable(r.dom)&&i>0})));var n},mw=t=>Wl(t)||ci(t),fw=t=>xt(ma(t.selection.getSelectedBlocks()),e=>!mw(e)&&!Vn(e).exists(mw)&&To(e,n=>Bn(n.dom)||Zt(n.dom)).exists(n=>Bn(n.dom))),gw=(t,e)=>{var n,o;const{dom:r}=t,s=uk(t),i=null!==(o=null===(n=/[a-z%]+$/i.exec(s))||void 0===n?void 0:n[0])&&void 0!==o?o:"px",a=Np(s),l=_b(t);W(fw(t),c=>{((d,u,f,h,g,b)=>{const p=dw(f,O(b)),v=Np(d.getStyle(b,p));if("outdent"===u){const _=Math.max(0,v-h);d.setStyle(b,p,_?_+g:"")}else d.setStyle(b,p,v+h+g)})(r,e,l,a,i,c.dom)})},pw=t=>gw(t,"outdent"),hw=t=>{if(t.selection.isCollapsed()&&uw(t)){const e=t.dom,n=t.selection.getRng(),o=z.fromRangeStart(n),r=e.getParent(n.startContainer,e.isBlock);if(null!==r&&og(O(r),o))return w.some(()=>pw(t))}return w.none()},bw=(t,e,n)=>us([hw,gp,up,(o,r)=>Ep(o,e,r),lp,yg,pp,Sp,cp,xp],o=>o(t,n)).filter(o=>t.selection.isEditable()),vw=t=>void 0===t.touches||1!==t.touches.length?w.none():w.some(t.touches[0]),Ap=(t,e)=>Ot(t,e.nodeName),LO=(t,e)=>!!X(e)||!!ct(e)&&!Ap(t.getBlockElements(),e)&&!lo(e)&&!Ht(t,e),PO=(t,e)=>!(!X(e)||0!==e.data.length&&(!/^\s+$/.test(e.data)||e.nextSibling&&!Ap(t,e.nextSibling))),yw=t=>t.dom.create(en(t),gc(t)),MO=t=>{const e=t.dom,n=t.selection,o=t.schema,r=o.getBlockElements(),s=n.getStart(),i=t.getBody();let a,l,c=!1;const d=en(t);if(!s||!ct(s))return;const u=i.nodeName.toLowerCase();if(!o.isValidChild(u,d.toLowerCase())||(C=r,k=i,le(A0(O(s),O(k)),N=>Ap(C,N.dom))))return;var C,k;const f=n.getRng(),{startContainer:h,startOffset:g,endContainer:b,endOffset:p}=f,v=Ri(t);let _=i.firstChild;for(;_;)if(ct(_)&&Pt(o,_),LO(o,_)){if(PO(r,_)){l=_,_=_.nextSibling,e.remove(l);continue}a||(a=yw(t),i.insertBefore(a,_),c=!0),l=_,_=_.nextSibling,a.appendChild(l)}else a=null,_=_.nextSibling;c&&v&&(f.setStart(h,g),f.setEnd(b,p),n.setRng(f),t.nodeChanged())},_w=(t,e,n)=>{const o=O(yw(t)),r=ui();ge(o,r),n(e,o);const s=document.createRange();return s.setStartBefore(r.dom),s.setEndBefore(r.dom),s},Cw=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),IO=(t,e,n)=>function(o){const r=arguments,s=r[r.length-2],i=s>0?e.charAt(s-1):"";if('"'===i)return o;if(">"===i){const a=e.lastIndexOf("<",s);if(-1!==a&&-1!==e.substring(a,s).indexOf('contenteditable="false"'))return o}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(r[0])+'">'+t.dom.encode("string"==typeof r[1]?r[1]:r[0])+"</span>"},ww=(t,e)=>{e.hasAttribute("data-mce-caret")&&(Xl(e),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(e))},FO=(t,e)=>{const n=ii(O(t.getBody()),"*[data-mce-caret]").map(r=>r.dom).getOrNull();if(n)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void ww(t,n)):void(Kl(n)&&(ww(t,n),t.undoManager.add()))},Ew=Zt,xw=(t,e,n)=>{const o=Er(t.getBody()),r=ft(bf,1===e?o.next:o.prev);if(n.collapsed){const s=t.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!r(z.fromRangeStart(n))){const i=O((a=>{const l=a.dom.create(en(a));return l.innerHTML='<br data-mce-bogus="1">',l})(t));1===e?Ro(O(s),i):Je(O(s),i),t.selection.select(i.dom,!0),t.selection.collapse()}}},kw=(t,e)=>((n,o)=>{const r=o?$e.Forwards:$e.Backwards,s=n.selection.getRng();return(i=r,a=n,l=s,GC(a,i,l,$s,Us,Ew)).orThunk(()=>(xw(n,r,s),w.none()));var i,a,l})(t,((n,o)=>{const r=o?n.getEnd(!0):n.getStart(!0);return K0(r)?!o:o})(t.selection,e)).exists(n=>(rs(t,n),!0)),Sw=(t,e)=>((n,o)=>{const r=o?1:-1,s=n.selection.getRng();return(i=r,a=n,l=s,QC(a,i,l,c=>$s(c)||S0(c),c=>Us(c)||N0(c),Ew)).orThunk(()=>(xw(n,r,s),w.none()));var i,a,l})(t,e).exists(n=>(rs(t,n),!0)),Nw=(t,e)=>JC(t,e,e?Us:$s),Qu=(t,e)=>mp(t,!e).map(n=>{const o=n.toRange(),r=t.selection.getRng();return e?o.setStart(r.startContainer,r.startOffset):o.setEnd(r.endContainer,r.endOffset),o}).exists(n=>(rs(t,n),!0)),jO=t=>gt(["figcaption"],Wt(t)),Aw=(t,e)=>!!t.selection.isCollapsed()&&((n,o)=>{const r=O(n.getBody()),s=z.fromRangeStart(n.selection.getRng());return((i,a)=>{const l=ft(zt,a);return To(O(i.container()),Ln,l).filter(jO)})(s,r).exists(()=>{if(i=r,l=s,o?zC(i.dom,l):UC(i.dom,l)){const i=_w(n,r,o?ge:Dd);return n.selection.setRng(i),!0}var i,l;return!1})})(t,e),Ow=(t,e)=>{return n=t,e?w.from(n.dom.getParent(n.selection.getNode(),"details")).map(r=>((s,i)=>{const a=s.selection.getRng(),l=z.fromRangeStart(a);return!(s.getBody().lastChild!==i||!zC(i,l)||(s.execCommand("InsertNewBlockAfter"),0))})(n,r)).getOr(!1):w.from(n.dom.getParent(n.selection.getNode(),"summary")).bind(r=>w.from(n.dom.getParent(r,"details")).map(s=>((i,a,l)=>{const c=i.selection.getRng(),d=z.fromRangeStart(c);return!(i.getBody().firstChild!==a||!UC(l,d)||(i.execCommand("InsertNewBlockBefore"),0))})(n,s,r))).getOr(!1);var n},Tw={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},Rw=(t,e)=>e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey,_t=(t,...e)=>()=>t.apply(null,e),qc=(t,e)=>{return ye((o=e,Un(Mt(t,s=>({...Tw,...s})),r=>Rw(r,o)?[r]:[])),n=>n.action());var o},Dw=(t,e)=>{return us((o=e,Un(Mt(t,s=>({...Tw,...s})),r=>Rw(r,o)?[r]:[])),n=>n.action());var o},Bw=(t,e)=>{const n=e?$e.Forwards:$e.Backwards,o=t.selection.getRng();return GC(t,n,o,Ac,Oc,Ze).exists(r=>(rs(t,r),!0))},Lw=(t,e)=>{const n=e?1:-1,o=t.selection.getRng();return QC(t,n,o,Ac,Oc,Ze).exists(r=>(rs(t,r),!0))},Pw=(t,e)=>JC(t,e,e?Oc:Ac),Mw=_r([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Vc={...Mw,none:t=>Mw.none(t)},Iw=(t,e,n)=>Un(_e(t),o=>Ge(o,e)?n(o)?[o]:[]:Iw(o,e,n)),Fw=(t,e)=>pr(t,"table",e),Op=(t,e,n,o,r=me)=>{const s=1===o;if(!s&&n<=0)return Vc.first(t[0]);if(s&&n>=t.length-1)return Vc.last(t[t.length-1]);{const i=n+o,a=t[i];return r(a)?Vc.middle(e,a):Op(t,e,i,o,r)}},jw=(t,e)=>Fw(t,e).bind(n=>{const o=Iw(n,"th,td",me);return Xs(o,r=>zt(t,r)).map(r=>({index:r,all:o}))}),$w=(t,e,n,o,r)=>{const s=De(O(n),"td,th,caption").map(a=>a.dom);var a;return((a,l,c)=>Me(a,(d,u)=>d.fold(()=>w.some(u),f=>{const h=Math.sqrt(Math.abs(f.x-l)+Math.abs(f.y-c)),g=Math.sqrt(Math.abs(u.x-l)+Math.abs(u.y-c));return w.some(g<h?u:f)}),w.none()))(xt((a=t,Un(s,c=>{const d={left:(u=wi(c.getBoundingClientRect())).left- -1,top:u.top- -1,right:u.right+-2,bottom:u.bottom+-2,width:u.width+-1,height:u.height+-1};var u;return[{x:d.left,y:a(d),cell:c},{x:d.right,y:a(d),cell:c}]})),a=>e(a,r)),o,r).map(a=>a.cell)},$O=ft($w,t=>t.bottom,(t,e)=>t.y<e),UO=ft($w,t=>t.top,(t,e)=>t.y>e),Uw=(t,e,n)=>{const o=t(e,n);return(r=o).breakType===Or.Wrap&&0===r.positions.length||!ce(n.getNode())&&(r=>r.breakType===Or.Br&&1===r.positions.length)(o)?!((r,s,i)=>i.breakAt.exists(a=>r(s,a).breakAt.isSome()))(t,e,o):o.breakAt.isNone();var r},zO=ft(Uw,$c),HO=ft(Uw,Uc),qO=(t,e,n,o)=>{const r=t.selection.getRng(),s=e?1:-1;return!(!Pb()||!((i,a,l)=>{const c=z.fromRangeStart(a);return Ma(!i,l).exists(d=>d.isEqual(c))})(e,r,n)||(os(s,t,n,!e,!1).each(i=>{rs(t,i)}),0))},zw=(t,e,n)=>{const o=((s,i)=>{const a=i.getNode(s);return qo(a)?w.some(a):w.none()})(!!e,n),r=!1===e;o.fold(()=>rs(t,n.toRange()),s=>Ma(r,t.getBody()).filter(i=>i.isEqual(n)).fold(()=>rs(t,n.toRange()),i=>{return a=e,c=s,void(l=t).undoManager.transact(()=>{const d=a?Ro:Je,u=_w(l,O(c),d);rs(l,u)});var a,l,c}))},VO=(t,e,n,o)=>{const r=t.selection.getRng(),s=z.fromRangeStart(r),i=t.getBody();if(!e&&zO(o,s)){const a=(l=i,(u=c=n,f=d=s,Ae(f.getClientRects()).bind(h=>$O(u,h.left,h.top)).bind(h=>{return Yu(Fo(g=h).map(b=>$c(g,b).positions.concat(b)).getOr([]),f);var g})).orThunk(()=>Ae(d.getClientRects()).bind(u=>yp(jC(l,z.before(c)),u.left))).getOr(z.before(c)));return zw(t,e,a),!0}var l,c,d,u,f;if(e&&HO(o,s)){const a=((l,c,d)=>((u,f)=>zn(f.getClientRects()).bind(h=>UO(u,h.left,h.top)).bind(h=>{return Yu(nn(g=h).map(b=>[b].concat(Uc(g,b).positions)).getOr([]),f);var g}))(c,d).orThunk(()=>Ae(d.getClientRects()).bind(u=>yp($C(l,z.after(c)),u.left))).getOr(z.after(c)))(i,n,s);return zw(t,e,a),!0}return!1},Hw=(t,e,n)=>w.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(o=>w.from(t.dom.getParent(o,"table")).map(r=>n(t,e,r,o))).getOr(!1),qw=(t,e)=>Hw(t,e,qO),Tp=(t,e)=>Hw(t,e,VO),Vw=(t,e,n)=>n.fold(w.none,w.none,(o,r)=>{return(s=r,((i,a)=>{const l=c=>{for(let d=0;d<c.childNodes.length;d++){const u=O(c.childNodes[d]);if(a(u))return w.some(u);const f=l(c.childNodes[d]);if(f.isSome())return f}return w.none()};return l(i.dom)})(s,a0)).map(i=>{return(t=>{const e=Ua.getWin(t).dom,n=(r,s,i,a)=>If(e,r,s,i,a),o=t.match({domRange:s=>{const i=O(s.startContainer),a=O(s.endContainer);return Mv(i,s.startOffset,a,s.endOffset)},relative:IS,exact:Mv});return((r,s)=>{var a;return((a,l)=>{const c=l.ltr();return c.collapsed?l.rtl().filter(d=>!1===d.collapsed).map(d=>Sc.rtl(O(d.endContainer),d.endOffset,O(d.startContainer),d.startOffset)).getOrThunk(()=>Lv(0,Sc.ltr,c)):Lv(0,Sc.ltr,c)})(0,(a=r,s.match({domRange:c=>({ltr:st(c),rtl:w.none}),relative:(c,d)=>({ltr:zo(()=>Bv(a,c,d)),rtl:zo(()=>w.some(Bv(a,d,c)))}),exact:(c,d,u,f)=>({ltr:zo(()=>If(a,c,d,u,f)),rtl:zo(()=>w.some(If(a,u,f,c,d)))})})))})(e,o).match({ltr:n,rtl:n})})(Ua.exact(a=i,0,a,0));var a});var s},o=>(t.execCommand("mceTableInsertRowAfter"),Ww(t,e,o))),Ww=(t,e,n)=>{return Vw(t,e,(r=Hr,jw(o=n,void 0).fold(()=>Vc.none(o),s=>Op(s.all,o,s.index,1,r))));var o,r},WO=(t,e,n)=>{return Vw(t,e,(r=Hr,jw(o=n,void 0).fold(()=>Vc.none(),s=>Op(s.all,o,s.index,-1,r))));var o,r},Kw=(t,e)=>{const n=["table","li","dl"],o=O(t.getBody()),r=i=>{const a=Wt(i);return zt(i,o)||gt(n,a)},s=t.selection.getRng();return(i=O(e?s.endContainer:s.startContainer),a=r,((l,c,d=ee)=>d(c)?w.none():gt(l,Wt(c))?w.some(c):si(c,l.join(","),u=>Ge(u,"table")||d(u)))(["td","th"],i,a)).map(i=>(Fw(i,r).each(a=>{t.model.table.clearSelectedCells(a.dom)}),t.selection.collapse(!e),(e?Ww:WO)(t,r,i).each(a=>{t.selection.setRng(a)}),!0)).getOr(!1);var i,a},Zo=(t,e)=>({container:t,offset:e}),Ju=Qt.DOM,Zu=t=>e=>t===e?-1:0,Rp=(t,e,n)=>{if(X(t)&&e>=0)return w.some(Zo(t,e));{const o=Ci(Ju);return w.from(o.backwards(t,e,Zu(t),n)).map(r=>Zo(r.container,r.container.data.length))}},Dp=(t,e,n)=>{if(!X(t))return w.none();if(e>=0&&e<=t.data.length)return w.some(Zo(t,e));{const r=Ci(Ju);return w.from(r.backwards(t,e,Zu(t),n)).bind(s=>Dp(s.container,e+s.container.data.length,n))}},Yw=(t,e,n)=>{if(!X(t))return w.none();const o=t.data;if(e<=o.length)return w.some(Zo(t,e));{const r=Ci(Ju);return w.from(r.forwards(t,e,Zu(t),n)).bind(s=>Yw(s.container,e-o.length,n))}},Bp=(t,e,n,o,r)=>{const s=Ci(t,(i=t,a=>i.isBlock(a)||gt(["BR","IMG","HR","INPUT"],a.nodeName)||"false"===i.getContentEditable(a)));var i;return w.from(s.backwards(e,n,o,r))},Xw=t=>un(t.toString().replace(/\u00A0/g," ")),Gw=t=>""!==t&&-1!==" \xa0\f\n\r\t\v".indexOf(t),Lp=(t,e)=>t.substring(e.length),Qw=(t,e,n,o=0)=>{return(r=O(e.startContainer),pr(r,l0)).fold(()=>((s,i,a,l=0)=>{if(!(c=i).collapsed||!X(c.startContainer))return w.none();var c;const d={text:"",offset:0},u=s.getParent(i.startContainer,s.isBlock)||s.getRoot();return Bp(s,i.startContainer,i.startOffset,(f,h,g)=>(d.text=g+d.text,d.offset+=h,((b,p,v)=>{let _;const C=v.charAt(0);for(_=p-1;_>=0;_--){const k=b.charAt(_);if(Gw(k))return w.none();if(C===k&&be(b,v,_,p))break}return w.some(_)})(d.text,d.offset,a).getOr(h)),u).bind(f=>{const h=i.cloneRange();if(h.setStart(f.container,f.offset),h.setEnd(i.endContainer,i.endOffset),h.collapsed)return w.none();const g=Xw(h);return 0!==g.lastIndexOf(a)||Lp(g,a).length<l?w.none():w.some({text:Lp(g,a),range:h,trigger:a})})})(t,e,n,o),s=>{const i=t.createRng();i.selectNode(s.dom);const a=Xw(i);return w.some({range:i,text:Lp(a,n),trigger:n})});var r},Jw=t=>{if(3===t.nodeType)return Zo(t,t.data.length);{const e=t.childNodes;return e.length>0?Jw(e[e.length-1]):Zo(t,e.length)}},Zw=(t,e)=>{const n=t.childNodes;return n.length>0&&e<n.length?Zw(n[e],0):n.length>0&&1===t.nodeType&&n.length===e?Jw(n[n.length-1]):Zo(t,e)},t1=(t,e,n,o={})=>{var r;const s=e(),i=null!==(r=t.selection.getRng().startContainer.nodeValue)&&void 0!==r?r:"",a=xt(s.lookupByTrigger(n.trigger),c=>n.text.length>=c.minChars&&c.matches.getOrThunk(()=>{return d=t.dom,u=>{const f=Zw(u.startContainer,u.startOffset);return!((h,g)=>{var b;const p=null!==(b=h.getParent(g.container,h.isBlock))&&void 0!==b?b:h.getRoot();return Bp(h,g.container,g.offset,(v,_)=>0===_?-1:_,p).filter(v=>{const _=v.container.data.charAt(v.offset-1);return!Gw(_)}).isSome()})(d,f)};var d})(n.range,i,n.text));if(0===a.length)return w.none();const l=Promise.all(Mt(a,c=>c.fetch(n.text,c.maxResults,o).then(d=>({matchText:n.text,items:d,columns:c.columns,onAction:c.onAction,highlightOn:c.highlightOn}))));return w.some({lookupData:l,context:n})};var Tr;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(Tr||(Tr={}));const Pp=(t,e,n)=>t.stype===Tr.Error?e(t.serror):n(t.svalue),Xa=t=>({stype:Tr.Value,svalue:t}),Wc=t=>({stype:Tr.Error,serror:t}),KO=Pp,Mp=t=>Pe(t)&&Xe(t).length>100?" removed due to size":JSON.stringify(t,null,2),tm=(t,e)=>Wc([{path:t,getErrorInfo:e}]),e1=t=>(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const n={};for(let o=0;o<e.length;o++){const r=e[o];for(const s in r)Ot(r,s)&&(n[s]=t(n[s],r[s]))}return n},Ip=e1((t,e)=>On(t)&&On(e)?Ip(t,e):e),n1=(e1((t,e)=>e),t=>({tag:"defaultedThunk",process:st(t)})),o1=(t,e,n)=>{switch(t.tag){case"field":return e(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},Fp=t=>({extract:(e,n)=>{return(o=t(n)).stype===Tr.Error?tm(e,st(o.serror)):o;var o},toString:st("val")}),GO=Fp(Xa),r1=(t,e,n,o)=>o(Jt(t,e).getOrThunk(()=>n(t))),QO=(t,e,n,o,r)=>{const s=a=>r.extract(e.concat([o]),a),i=a=>a.fold(()=>Xa(w.none()),l=>{return(d=r.extract(e.concat([o]),l)).stype===Tr.Value?{stype:Tr.Value,svalue:(0,w.some)(d.svalue)}:d;var d});switch(t.tag){case"required":return a=e,d=s,Jt(l=n,c=o).fold(()=>{return f=c,h=l,tm(a,()=>'Could not find valid *required* value for "'+f+'" in '+Mp(h));var f,h},d);case"defaultedThunk":return r1(n,o,t.process,s);case"option":return((a,l,c)=>c(Jt(a,l)))(n,o,i);case"defaultedOptionThunk":return((a,l,c,d)=>d(Jt(a,l).map(u=>!0===u?c(a):u)))(n,o,t.process,i);case"mergeWithThunk":return r1(n,o,st({}),a=>{const l=Ip(t.process(n),a);return s(l)})}var a,l,c,d},jp=t=>({extract:(e,n)=>((o,r,s)=>{const i={},a=[];for(const l of s)o1(l,(c,d,u,f)=>{const h=QO(u,o,r,c,f);KO(h,g=>{a.push(...g)},g=>{i[d]=g})},(c,d)=>{i[c]=d(r)});return a.length>0?Wc(a):Xa(i)})(e,n,t),toString:()=>"obj{\n"+Mt(t,n=>o1(n,(o,r,s,i)=>o+" -> "+i.toString(),(o,r)=>"state("+o+")")).join("\n")+"}"}),s1=t=>({extract:(e,n)=>(t=>{const e=(o=>{const r=[],s=[];return W(o,i=>{Pp(i,a=>s.push(a),a=>r.push(a))}),{values:r,errors:s}})(t);return e.errors.length>0?(n=e.errors,yo(Wc,cd)(n)):Xa(e.values);var n})(Mt(n,(r,s)=>t.extract(e.concat(["["+s+"]"]),r))),toString:()=>"array("+t.toString()+")"}),i1=(t,e)=>((t,e)=>({extract:(n,o)=>Jt(o,t).fold(()=>{return s=t,tm(n,()=>'Choice schema did not contain choice key: "'+s+'"');var s},r=>{return s=n,i=o,Jt(a=e,l=r).fold(()=>{return d=a,u=l,tm(s,()=>'The chosen schema: "'+u+'" did not exist in branches: '+Mp(d));var d,u},c=>c.extract(s.concat(["branch: "+l]),i));var s,i,a,l}),toString:()=>"chooseOn("+t+"). Possible values: "+Xe(e)}))(t,Xi(e,jp)),ZO=st(GO),em=(t,e)=>Fp(n=>{const o=typeof n;return t(n)?Xa(n):Wc(`Expected type: ${e} but got: ${o}`)}),tT=em(Tn,"number"),nm=em(ht,"string"),eT=em(rr,"boolean"),$p=em(Ut,"function"),Kc=(t,e,n,o)=>({tag:"field",key:t,newKey:e,presence:n,prop:o}),a1=(t,e)=>({tag:"custom",newKey:t,instantiator:e}),l1=(t,e)=>Kc(t,t,{tag:"required",process:{}},e),c1=t=>l1(t,nm),d1=t=>l1(t,$p),Up=(t,e)=>Kc(t,t,{tag:"option",process:{}},e),om=t=>Up(t,nm),Ga=(t,e,n)=>Kc(t,t,n1(e),n),u1=(t,e)=>Ga(t,e,tT),m1=(t,e,n)=>{return Ga(t,e,(o=n,r=s=>gt(o,s)?kn.value(s):kn.error(`Unsupported value: "${s}", choose one of "${o.join(", ")}".`),Fp(s=>r(s).fold(Wc,Xa))));var o,r},zp=(t,e)=>Ga(t,e,eT),Hp=(t,e)=>Ga(t,e,$p),nT=c1("type"),oT=d1("fetch"),qp=d1("onAction"),rT=Hp("onSetup",()=>Tt),sT=om("text"),iT=om("icon"),aT=om("tooltip"),lT=om("label"),cT=zp("active",!1),dT=zp("enabled",!0),f1=zp("primary",!1),Yc=t=>Ga("type",t,nm),uT=jp([nT,c1("trigger"),u1("minChars",1),((t,e)=>Kc(t,t,n1(1),ZO()))("columns"),u1("maxResults",10),Up("matches",$p),oT,qp,(g1=nm,Ga("highlightOn",[],s1(g1)))]);var g1;const Vp=[dT,aT,iT,sT,rT],p1=[cT].concat(Vp),mT=[Hp("predicate",ee),m1("scope","node",["node","editor"]),m1("position","selection",["node","selection","line"])],fT=Vp.concat([Yc("contextformbutton"),f1,qp,a1("original",Ke)]),gT=p1.concat([Yc("contextformbutton"),f1,qp,a1("original",Ke)]),pT=Vp.concat([Yc("contextformbutton")]),hT=p1.concat([Yc("contextformtogglebutton")]),bT=i1("type",{contextformbutton:fT,contextformtogglebutton:gT});jp([Yc("contextform"),Hp("initValue",st("")),lT,((t,e)=>Kc(t,t,{tag:"required",process:{}},s1(e)))("commands",bT),Up("launch",i1("type",{contextformbutton:pT,contextformtogglebutton:hT}))].concat(mT));const yT=t=>{const e=Bs(),n=je(!1),o=e.isSet,r=()=>{o()&&(ve(t).autocompleter.removeDecoration(),t.dispatch("AutocompleterEnd"),n.set(!1),e.clear())},s=zo(()=>(t=>{const e=t.ui.registry.getAll().popups,n=Xi(e,s=>{return(i=s,((t,e,n)=>{return o=(a=e.extract([t],i=n)).stype===Tr.Error?{stype:Tr.Error,serror:(a=>({input:i,errors:a}))(a.serror)}:a,Pp(o,kn.error,kn.value);var i,a,o})("Autocompleter",uT,{trigger:i.ch,...i})).fold(a=>{throw new Error("Errors: \n"+(c=>{const d=c.length>10?c.slice(0,10).concat([{path:[],getErrorInfo:st("... (only showing first ten failures)")}]):c;return Mt(d,u=>"Failed path: ("+u.path.join(" > ")+")\n"+u.getErrorInfo())})((l=a).errors).join("\n")+"\n\nInput object: "+Mp(l.input));var l},Ke);var i}),o=ud(fs(n,s=>s.trigger)),r=Gi(n);return{dataset:n,triggers:o,lookupByTrigger:s=>xt(r,i=>i.trigger===s)}})(t)),i=a=>{var l;(l=a,e.get().map(c=>Qw(t.dom,t.selection.getRng(),c.trigger).bind(d=>t1(t,s,d,l))).getOrThunk(()=>((c,d)=>{const u=d(),f=c.selection.getRng();return(h=c.dom,g=f,b=u,us(b.triggers,p=>Qw(h,g,p))).bind(h=>t1(c,d,h));var h,g,b})(t,s))).fold(r,l=>{var c,u;c=l.context,o()||(u=c.range,ve(t).autocompleter.addDecoration(u),e.set({trigger:c.trigger,matchLength:c.text.length})),l.lookupData.then(c=>{e.get().map(d=>{const u=l.context;d.trigger===u.trigger&&(u.text.length-d.matchLength>=10?r():(e.set({...d,matchLength:u.text.length}),n.get()?t.dispatch("AutocompleterUpdate",{lookupData:c}):(n.set(!0),t.dispatch("AutocompleterStart",{lookupData:c}))))})})})};t.addCommand("mceAutocompleterReload",(a,l)=>{const c=Pe(l)?l.fetchOptions:{};i(c)}),t.addCommand("mceAutocompleterClose",r),((a,l)=>{const c=Jm(l.load,50);a.on("keypress compositionend",d=>{27!==d.which&&c.throttle()}),a.on("keydown",d=>{const u=d.which;8===u?c.throttle():27===u&&l.cancelIfNecessary()}),a.on("remove",c.cancel)})(t,{cancelIfNecessary:r,load:i})},_T=Hn().browser.isSafari(),h1=t=>Wo(O(t)),b1=(t,e)=>{var n;return 0===t.startOffset&&t.endOffset===(null===(n=e.textContent)||void 0===n?void 0:n.length)},rm=(t,e)=>w.from(t.getParent(e.container(),"details")),v1=(t,e)=>rm(t,e).isSome(),y1=(t,e)=>{const n=e.getNode();Ne(n)||t.selection.setCursorLocation(n,e.offset())},_1=(t,e,n)=>{const o=t.dom.getParent(e.container(),"details");if(o&&!o.open){const r=t.dom.select("summary",o)[0];r&&(n?nn(r):Fo(r)).each(s=>y1(t,s))}else y1(t,e)},C1=(t,e,n)=>{const{dom:o,selection:r}=t,s=t.getBody();if("character"===n){const i=z.fromRangeStart(r.getRng()),a=o.getParent(i.container(),o.isBlock),l=rm(o,i),c=a&&o.isEmpty(a),d=se(a?.previousSibling),u=se(a?.nextSibling);return!!(c&&(e?u:d)&&Pa(!e,s,i).exists(f=>v1(o,f)&&!xl(l,rm(o,f))))||Pa(e,s,i).fold(ee,f=>{const h=rm(o,f);if(v1(o,f)&&!xl(l,h)){if(e||_1(t,f,!1),a&&c){if(e&&d||!e&&u)return!0;_1(t,f,e),t.dom.remove(a)}return!0}return!1})}return!1},ji=(t,e,n)=>{return r=e,s=n,((i,a)=>{const l=w.from(i.getParent(a.startContainer,"details")),c=w.from(i.getParent(a.endContainer,"details"));if(l.isSome()||c.isSome()){const d=l.bind(u=>w.from(i.select("summary",u)[0]));return w.some({startSummary:d,startDetails:l,endDetails:c})}return w.none()})((o=t).dom,o.selection.getRng()).fold(()=>C1(o,r,s),i=>((t,e,n,o)=>{const r=t.selection.getRng(),s=z.fromRangeStart(r),i=t.getBody();return"selection"===o?((a,l)=>{const c=l.startSummary.exists(f=>f.contains(a.startContainer)),d=l.startSummary.exists(f=>f.contains(a.endContainer)),u=l.startDetails.forall(f=>l.endDetails.forall(h=>f!==h));return(c||d)&&!(c&&d)||u})(r,e):n?(a=s,e.startSummary.exists(c=>{return d=a,Fo(u=c).exists(f=>ce(f.getNode())&&In(u,f).exists(h=>h.isEqual(d))||f.isEqual(d));var d,u})||((a,l,c)=>c.startDetails.exists(d=>Sn(a,l).forall(u=>!d.contains(u.container()))))(i,s,e)):((a,l)=>l.startSummary.exists(c=>{return d=a,nn(c).exists(f=>f.isEqual(d));var d}))(s,e)||((a,l)=>l.startDetails.exists(c=>In(c,a).forall(d=>l.startSummary.exists(u=>!u.contains(a.container())&&u.contains(d.container())))))(s,e);var a})(o,i,r,s)||C1(o,r,s))||_T&&((o,r,s)=>{const i=o.selection,a=i.getNode(),l=i.getRng(),c=z.fromRangeStart(l);return!!Ca(a)&&("selection"===s&&b1(l,a)||Q0(r,c,a)?h1(a):o.undoManager.transact(()=>{const d=i.getSel();let{anchorNode:u,anchorOffset:f,focusNode:h,focusOffset:g}=d??{};const b=()=>{ot(u)&&ot(f)&&ot(h)&&ot(g)&&d?.setBaseAndExtent(u,f,h,g)},p=(_,C)=>{W(_.childNodes,k=>{Ec(k)&&C.appendChild(k)})},v=o.dom.create("span",{"data-mce-bogus":"1"});p(a,v),a.appendChild(v),b(),"word"!==s&&"line"!==s||null==d||d.modify("extend",r?"right":"left",s),!i.isCollapsed()&&b1(i.getRng(),v)?h1(a):(o.execCommand(r?"ForwardDelete":"Delete"),u=d?.anchorNode,f=d?.anchorOffset,h=d?.focusNode,g=d?.focusOffset,p(v,a),b()),o.dom.remove(v)}),!0)})(t,e,n)?w.some(Tt):w.none();var o,r,s},w1=t=>(e,n,o={})=>{const r=e.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:r,currentTarget:r,eventPhase:Event.AT_TARGET,originalTarget:r,explicitOriginalTarget:r,isTrusted:!1,srcElement:r,cancelable:!1,preventDefault:Tt,inputType:n},i=nc(new InputEvent(t));return e.dispatch(t,{...i,...s,...o})},Xc=w1("input"),sm=w1("beforeinput"),E1=Hn(),x1=E1.os,k1=x1.isMacOS()||x1.isiOS(),wT=E1.browser.isFirefox(),Qa=(t,e)=>{const n=t.dom,o=t.schema.getMoveCaretBeforeOnEnterElements();if(!e)return;if(/^(LI|DT|DD)$/.test(e.nodeName)){const s=(i=>{for(;i;){if(ct(i)||X(i)&&i.data&&/[\r\n\s]/.test(i.data))return i;i=i.nextSibling}return null})(e.firstChild);s&&/^(UL|OL|DL)$/.test(s.nodeName)&&e.insertBefore(n.doc.createTextNode(Ee),e.firstChild)}const r=n.createRng();if(e.normalize(),e.hasChildNodes()){const s=new Ce(e,e);let i,a=e;for(;i=s.current();){if(X(i)){r.setStart(i,0),r.setEnd(i,0);break}if(o[i.nodeName.toLowerCase()]){r.setStartBefore(i),r.setEndBefore(i);break}a=i,i=s.next()}i||(r.setStart(a,0),r.setEnd(a,0))}else ce(e)?e.nextSibling&&n.isBlock(e.nextSibling)?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)):(r.setStart(e,0),r.setEnd(e,0));t.selection.setRng(r),Nc(t,r)},Gc=(t,e)=>{const n=t.getRoot();let o,r=e;for(;r!==n&&r&&"false"!==t.getContentEditable(r);){if("true"===t.getContentEditable(r)){o=r;break}r=r.parentNode}return r!==n?o:n},Wp=t=>w.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),Kp=t=>{t.innerHTML='<br data-mce-bogus="1">'},Qc=(t,e)=>{en(t).toLowerCase()===e.tagName.toLowerCase()&&((n,o,r)=>{const s=n.dom;w.from(r.style).map(s.parseStyle).each(d=>{const u={...Td(O(o)),...d};s.setStyles(o,u)});const i=w.from(r.class).map(d=>d.split(/\s+/)),a=w.from(o.className).map(d=>xt(d.split(/\s+/),u=>""!==u));qe(i,a,(d,u)=>{const f=xt(u,g=>!gt(d,g)),h=[...d,...f];s.setAttrib(o,"class",h.join(" "))});const l=["style","class"],c=ms(r,(d,u)=>!gt(l,u));s.setAttribs(o,c)})(t,e,gc(t))},S1=(t,e,n,o,r=!0,s)=>{const i=t.dom,a=t.schema,l=en(t),c=n?n.nodeName.toUpperCase():"";let d=e;const u=a.getTextInlineElements();let f;f=s||"TABLE"===c||"HR"===c?i.create(s||l):n.cloneNode(!1);let h=f;if(r){do{if(u[d.nodeName]){if(jo(d)||lo(d))continue;const g=d.cloneNode(!1);i.setAttrib(g,"id",""),f.hasChildNodes()?(g.appendChild(f.firstChild),f.appendChild(g)):(h=g,f.appendChild(g))}}while((d=d.parentNode)&&d!==o)}else i.setAttrib(f,"style",null),i.setAttrib(f,"class",null);return Qc(t,f),Kp(h),f},N1=(t,e)=>{const n=t?.parentNode;return ot(n)&&n.nodeName===e},A1=t=>ot(t)&&/^(OL|UL|LI)$/.test(t.nodeName),im=t=>{const e=t.parentNode;return ot(n=e)&&/^(LI|DT|DD)$/.test(n.nodeName)?e:t;var n},am=(t,e,n)=>{let o=t[n?"firstChild":"lastChild"];for(;o&&!ct(o);)o=o[n?"nextSibling":"previousSibling"];return o===e},ET=(t,e)=>e&&"A"===e.nodeName&&t.isEmpty(e),Yp=(t,e)=>t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e,Xp=(t,e)=>ot(e)&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&t.isEditable(e.parentNode)&&"false"!==t.getContentEditable(e),Gp=(t,e,n)=>X(e)?t?1===n&&e.data.charAt(n-1)===xe?0:n:n===e.data.length-1&&e.data.charAt(n)===xe?e.data.length:n:n,O1={insert:(t,e)=>{let n,o,r,s,i=!1;const a=t.dom,l=t.schema.getNonEmptyElements(),c=t.selection.getRng(),d=en(t),u=O(c.startContainer),f=Es(u,c.startOffset),h=f.exists(P=>ys(P)&&!Hr(P)),g=c.collapsed&&h,b=P=>S1(t,n,x,k,ek(t),P),p=P=>{const j=Gp(P,n,o);if(X(n)&&(P?j>0:j<n.data.length))return!1;if(n.parentNode===x&&i&&!P||P&&ct(n)&&n===x.firstChild)return!0;if(Yp(n,"TABLE")||Yp(n,"HR"))return i&&!P||!i&&P;const A=new Ce(n,x);let T;for(X(n)&&(P&&0===j?A.prev():P||j!==n.data.length||A.next());T=A.current();){if(ct(T)){if(!T.getAttribute("data-mce-bogus")){const I=T.nodeName.toLowerCase();if(l[I]&&"br"!==I)return!1}}else if(X(T)&&!E(T.data))return!1;P?A.prev():A.next()}return!0},v=()=>{let P;return P=/^(H[1-6]|PRE|FIGURE)$/.test(r)&&"HGROUP"!==N?b(d):b(),((j,A)=>{const T=nk(j);return!he(A)&&(ht(T)?gt(Q.explode(T),A.nodeName.toLowerCase()):T)})(t,s)&&Xp(a,s)&&a.isEmpty(x,void 0,{includeZwsp:!0})?P=a.split(s,x):a.insertAfter(P,x),Qa(t,P),P};vu(a,c).each(P=>{c.setStart(P.startContainer,P.startOffset),c.setEnd(P.endContainer,P.endOffset)}),n=c.startContainer,o=c.startOffset;const _=!(!e||!e.shiftKey),C=!(!e||!e.ctrlKey);ct(n)&&n.hasChildNodes()&&!g&&(i=o>n.childNodes.length-1,n=n.childNodes[Math.min(o,n.childNodes.length-1)]||n,o=i&&X(n)?n.data.length:0);const k=Gc(a,n);if(!k||((P,j)=>{const A=P.dom.getParent(j,"ol,ul,dl");return null!==A&&"false"===P.dom.getContentEditableParent(A)})(t,n))return;_||(n=((P,j,A,T,I)=>{var q,at;const G=P.dom,pt=null!==(q=Gc(G,T))&&void 0!==q?q:G.getRoot();let mt=G.getParent(T,G.isBlock);if(!mt||!Xp(G,mt)){if(mt=mt||pt,!mt.hasChildNodes()){const wt=G.create(j);return Qc(P,wt),mt.appendChild(wt),A.setStart(wt,0),A.setEnd(wt,0),wt}let kt,St=T;for(;St&&St.parentNode!==mt;)St=St.parentNode;for(;St&&!G.isBlock(St);)kt=St,St=St.previousSibling;const dt=null===(at=kt?.parentElement)||void 0===at?void 0:at.nodeName;if(kt&&dt&&P.schema.isValidChild(dt,j.toLowerCase())){const wt=kt.parentNode,Nt=G.create(j);for(Qc(P,Nt),wt.insertBefore(Nt,kt),St=kt;St&&!G.isBlock(St);){const R=St.nextSibling;Nt.appendChild(St),St=R}A.setStart(T,I),A.setEnd(T,I)}}return T})(t,d,c,n,o));let x=a.getParent(n,a.isBlock)||a.getRoot();s=ot(x?.parentNode)?a.getParent(x.parentNode,a.isBlock):null,r=x?x.nodeName.toUpperCase():"";const N=s?s.nodeName.toUpperCase():"";if("LI"!==N||C||(x=s,s=s.parentNode,r=N),ct(s)&&(P=t,A=x,!_&&A.nodeName.toLowerCase()===en(P)&&P.dom.isEmpty(A)&&((T,I,q)=>{let at=I;for(;at&&at!==T&&se(at.nextSibling);){const pt=at.parentElement;if(!pt||(G=pt,!Ot(P.schema.getTextBlockElements(),G.nodeName.toLowerCase())))return jd(pt);at=pt}var G;return!1})(P.getBody(),A)))return((P,j,A)=>{var T,I,q;const at=j(en(P)),G=P.dom.getParent(A,jd);G&&(P.dom.insertAfter(at,G),Qa(P,at),(null!==(q=null===(I=null===(T=A.parentElement)||void 0===T?void 0:T.childNodes)||void 0===I?void 0:I.length)&&void 0!==q?q:0)>1&&P.dom.remove(A))})(t,b,x);var P,A;if(/^(LI|DT|DD)$/.test(r)&&ct(s)&&a.isEmpty(x))return void((P,j,A,T,I)=>{const q=P.dom,at=P.selection.getRng(),G=A.parentNode;if(A===P.getBody()||!G)return;var pt;A1(pt=A)&&A1(pt.parentNode)&&(I="LI");let mt=j(I);if(am(A,T,!0)&&am(A,T,!1))if(N1(A,"LI")){const kt=im(A);q.insertAfter(mt,kt),(null===(dt=(St=A).parentNode)||void 0===dt?void 0:dt.firstChild)===St?q.remove(kt):q.remove(A)}else q.replace(mt,A);else if(am(A,T,!0))N1(A,"LI")?(q.insertAfter(mt,im(A)),mt.appendChild(q.doc.createTextNode(" ")),mt.appendChild(A)):G.insertBefore(mt,A),q.remove(T);else if(am(A,T,!1))q.insertAfter(mt,im(A)),q.remove(T);else{A=im(A);const kt=at.cloneRange();kt.setStartAfter(T),kt.setEndAfter(A);const St=kt.extractContents();"LI"===I&&((dt,wt)=>dt.firstChild&&"LI"===dt.firstChild.nodeName)(St)?(mt=St.firstChild,q.insertAfter(St,A)):(q.insertAfter(St,A),q.insertAfter(mt,A)),q.remove(T)}var St,dt;Qa(P,mt)})(t,b,s,x,d);if(!(g||x!==t.getBody()&&Xp(a,x)))return;const D=x.parentNode;let B;if(g)B=b(d),f.fold(()=>{ge(u,O(B))},P=>{Je(P,O(B))}),t.selection.setCursorLocation(B,0);else if(yr(x))B=Xl(x),a.isEmpty(x)&&Kp(x),Qc(t,B),Qa(t,B);else if(p(!1))B=v();else if(p(!0)&&D){B=D.insertBefore(b(),x);const P=O(c.startContainer).dom.hasChildNodes()&&c.collapsed;Qa(t,Yp(x,"HR")||P?B:x)}else{const P=(A=>{const T=A.cloneRange();return T.setStart(A.startContainer,Gp(!0,A.startContainer,A.startOffset)),T.setEnd(A.endContainer,Gp(!1,A.endContainer,A.endOffset)),T})(c).cloneRange();P.setEndAfter(x);const j=P.extractContents();(A=>{W(Md(O(A),Cn),T=>{const I=T.dom;I.nodeValue=un(I.data)})})(j),(A=>{let T=A;do{X(T)&&(T.data=T.data.replace(/^[\r\n]+/,"")),T=T.firstChild}while(T)})(j),B=j.firstChild,a.insertAfter(j,x),((A,T,I)=>{var q;const at=[];if(!I)return;let G=I;for(;G=G.firstChild;){if(A.isBlock(G))return;ct(G)&&!T[G.nodeName.toLowerCase()]&&at.push(G)}let pt=at.length;for(;pt--;)G=at[pt],(!G.hasChildNodes()||G.firstChild===G.lastChild&&""===(null===(q=G.firstChild)||void 0===q?void 0:q.nodeValue)||ET(A,G))&&A.remove(G)})(a,l,B),((A,T)=>{T.normalize();const I=T.lastChild;(!I||ct(I)&&/^(left|right)$/gi.test(A.getStyle(I,"float",!0)))&&A.add(T,"br")})(a,x),a.isEmpty(x)&&Kp(x),B.normalize(),a.isEmpty(B)?(a.remove(B),v()):(Qc(t,B),Qa(t,B))}a.setAttrib(B,"id",""),t.dispatch("NewBlock",{newBlock:B})},fakeEventName:"insertParagraph"},T1=(t,e,n)=>{const o=t.dom.createRng();n?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)),t.selection.setRng(o),Nc(t,o)},xT=(t,e)=>{const n=Re("br");Je(O(e),n),t.undoManager.add()},kT=(t,e)=>{ST(t.getBody(),e)||Ro(O(e),Re("br"));const n=Re("br");Ro(O(e),n),T1(t,n.dom,!1),t.undoManager.add()},ST=(t,e)=>{return n=z.after(e),!!ce(n.getNode())||Sn(t,z.after(e)).map(o=>ce(o.getNode())).getOr(!1);var n},R1=t=>t&&"A"===t.nodeName&&"href"in t,NT=t=>t.fold(ee,R1,R1,ee),AT=(t,e)=>{e.fold(Tt,ft(xT,t),ft(kT,t),Tt)},D1={insert:(t,e)=>{const n=(o=>{const r=ft(Bi,o),s=z.fromRangeStart(o.selection.getRng());return Ar(r,o.getBody(),s).filter(NT)})(t);n.isSome()?n.each(ft(AT,t)):((o,r)=>{const i=o.dom,a=o.selection.getRng();let l,c=!1;vu(i,a).each(p=>{a.setStart(p.startContainer,p.startOffset),a.setEnd(p.endContainer,p.endOffset)});let d=a.startOffset,u=a.startContainer;if(ct(u)&&u.hasChildNodes()){const p=d>u.childNodes.length-1;u=u.childNodes[Math.min(d,u.childNodes.length-1)]||u,d=p&&X(u)?u.data.length:0}let f=i.getParent(u,i.isBlock);const h=f&&f.parentNode?i.getParent(f.parentNode,i.isBlock):null;"LI"!==(h?h.nodeName.toUpperCase():"")||!(!r||!r.ctrlKey)||(f=h),X(u)&&d>=u.data.length&&(((p,v,_)=>{const C=new Ce(v,_);let k;const x=p.getNonEmptyElements();for(;k=C.next();)if(x[k.nodeName.toLowerCase()]||X(k)&&k.length>0)return!0;return!1})(o.schema,u,f||i.getRoot())||(l=i.create("br"),a.insertNode(l),a.setStartAfter(l),a.setEndAfter(l),c=!0)),l=i.create("br"),of(i,a,l),T1(o,l,c),o.undoManager.add()})(t,e)},fakeEventName:"insertLineBreak"},B1=(t,e)=>Wp(t).filter(n=>e.length>0&&Ge(O(n),e)).isSome(),Xn=_r([{br:[]},{block:[]},{none:[]}]),OT=(t,e)=>{return B1(n=t,tk(n));var n},L1=t=>(e,n)=>Wp(e).filter(r=>ci(O(r))).isSome()===t,P1=(t,e)=>(n,o)=>Wp(n).fold(st(""),i=>i.nodeName.toUpperCase())===t.toUpperCase()===e,TT=t=>{const e=Gc(t.dom,t.selection.getStart());return he(e)},Jc=t=>P1("pre",t),lm=t=>(e,n)=>Qx(e)===t,RT=(t,e)=>{return B1(n=t,Zx(n));var n},cm=(t,e)=>e,DT=t=>{const e=en(t),n=Gc(t.dom,t.selection.getStart());return ot(n)&&t.schema.isValidChild(n.nodeName,e)},BT=t=>{const e=t.selection.getRng(),n=O(e.startContainer),o=Es(n,e.startOffset).map(r=>ys(r)&&!Hr(r));return e.collapsed&&o.getOr(!0)},po=(t,e)=>(n,o)=>Me(t,(r,s)=>r&&s(n,o),!0)?w.some(e):w.none(),dm=(t,e,n)=>{e.selection.isCollapsed()||e.execCommand("delete"),ot(n)&&sm(e,t.fakeEventName).isDefaultPrevented()||(t.insert(e,n),ot(n)&&Xc(e,t.fakeEventName))},M1=(t,e)=>{const n=()=>dm(D1,t,e),o=()=>dm(O1,t,e),r=(s=t,i=e,RC([po([OT],Xn.none()),po([Jc(!0),TT],Xn.none()),po([P1("summary",!0)],Xn.br()),po([Jc(!0),lm(!1),cm],Xn.br()),po([Jc(!0),lm(!1)],Xn.block()),po([Jc(!0),lm(!0),cm],Xn.block()),po([Jc(!0),lm(!0)],Xn.br()),po([L1(!0),cm],Xn.br()),po([L1(!0)],Xn.block()),po([RT],Xn.br()),po([cm],Xn.br()),po([DT],Xn.block()),po([BT],Xn.block())],[s,!(!i||!i.shiftKey)]).getOr(Xn.none()));var s,i;switch(Jx(t)){case"linebreak":r.fold(n,n,Tt);break;case"block":r.fold(o,o,Tt);break;case"invert":r.fold(o,n,Tt);break;default:r.fold(n,o,Tt)}},I1=Hn(),LT=I1.os.isiOS()&&I1.browser.isSafari(),F1=(t,e)=>{var n;e.isDefaultPrevented()||(e.preventDefault(),(n=t.undoManager).typing&&(n.typing=!1,n.add()),t.undoManager.transact(()=>{M1(t,e)}))},PT=Hn(),j1=t=>t.stopImmediatePropagation(),$1=t=>t.keyCode===lt.PAGE_UP||t.keyCode===lt.PAGE_DOWN,U1=(t,e,n)=>{n&&!t.get()?e.on("NodeChange",j1,!0):!n&&t.get()&&e.off("NodeChange",j1),t.set(n)},z1=(t,e)=>{const n=e.container(),o=e.offset();return X(n)?(n.insertData(o,t),w.some(z(n,o+t.length))):su(e).map(r=>{const s=ws(t);return e.isAtEnd()?Ro(r,s):Je(r,s),z(s.dom,t.length)})},H1=ft(z1,Ee),q1=ft(z1," "),V1=t=>e=>{t.selection.setRng(e.toRange()),t.nodeChanged()},MT=t=>{const e=z.fromRangeStart(t.selection.getRng()),n=O(t.getBody());if(t.selection.isCollapsed()){const o=ft(Bi,t),r=z.fromRangeStart(t.selection.getRng());return Ar(o,t.getBody(),r).bind((s=n,i=>i.fold(a=>In(s.dom,z.before(a)),a=>nn(a),a=>Fo(a),a=>Sn(s.dom,z.after(a))))).map(s=>()=>{return(i=n,a=e,l=>F0(i,l)?H1(a):q1(a))(s).each(V1(t));var i,a})}var s;return w.none()},IT=t=>{return $r(Rt.browser.isFirefox()&&t.selection.isEditable()&&(e=t.dom,n=t.selection.getRng().startContainer,e.isEditable(e.getParent(n,"summary"))),()=>{const o=O(t.getBody());var r,s;t.selection.isCollapsed()||t.getDoc().execCommand("Delete"),(r=o,s=z.fromRangeStart(t.selection.getRng()),F0(r,s)?H1(s):q1(s)).each(V1(t))});var e,n},FT=t=>lS(t)?[{keyCode:lt.TAB,action:_t(Kw,t,!0)},{keyCode:lt.TAB,shiftKey:!0,action:_t(Kw,t,!1)}]:[],jT=t=>{if(t.addShortcut("Meta+P","","mcePrint"),yT(t),Nr(t))return je(null);{const e=(t=>{const e=je(null),n=ft(Bi,t);return t.on("NodeChange",o=>{pc(t)&&(((r,s,i)=>{const a=Mt(De(O(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),d=>d.dom),l=xt(a,r),c=xt(i,r);W(Pr(l,c),ft(ZC,!1)),W(Pr(c,l),ft(ZC,!0))})(n,t.dom,o.parents),((r,s)=>{const i=s.get();if(r.selection.isCollapsed()&&!r.composing&&i){const a=z.fromRangeStart(r.selection.getRng());z.isTextPosition(a)&&!mi(l=a)&&!Yl(l)&&(Xu(r,((t,e)=>{return z.isTextPosition(e)?(o=e,Ob(n=t)&&o.container()===n?((r,s)=>{const i=Rb(r.data.substr(0,s.offset())),a=Rb(r.data.substr(s.offset()));return(i.text+a.text).length>0?(Db(r),z(r,s.offset()-i.count)):s})(n,o):Bb(n,o)):((n,o)=>o.container()===n.parentNode?((r,s)=>{const i=s.container(),a=((l,c)=>{const d=Yi(l,c);return-1===d?w.none():w.some(d)})(Ye(i.childNodes),r).map(l=>l<s.offset()?z(i,s.offset()-1):s).getOr(s);return xi(r),a})(n,o):Bb(n,o))(t,e);var n,o})(i,a)),s.set(null))}var l})(t,e),((r,s,i,a)=>{if(s.selection.isCollapsed()){const l=xt(a,r);W(l,c=>{const d=z.fromRangeStart(s.selection.getRng());Ar(r,s.getBody(),d).bind(u=>tw(s,i,u))})}})(n,t,e,o.parents))}),e})(t);return(n=t).on("keyup compositionstart",ft(FO,n)),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,i,a)=>{const l=Rt.os.isMacOS()||Rt.os.isiOS();qc([{keyCode:lt.RIGHT,action:_t(kw,s,!0)},{keyCode:lt.LEFT,action:_t(kw,s,!1)},{keyCode:lt.UP,action:_t(Sw,s,!1)},{keyCode:lt.DOWN,action:_t(Sw,s,!0)},...l?[{keyCode:lt.UP,action:_t(Qu,s,!1),metaKey:!0,shiftKey:!0},{keyCode:lt.DOWN,action:_t(Qu,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:lt.RIGHT,action:_t(qw,s,!0)},{keyCode:lt.LEFT,action:_t(qw,s,!1)},{keyCode:lt.UP,action:_t(Tp,s,!1)},{keyCode:lt.DOWN,action:_t(Tp,s,!0)},{keyCode:lt.UP,action:_t(Tp,s,!1)},{keyCode:lt.UP,action:_t(Ow,s,!1)},{keyCode:lt.DOWN,action:_t(Ow,s,!0)},{keyCode:lt.RIGHT,action:_t(Bw,s,!0)},{keyCode:lt.LEFT,action:_t(Bw,s,!1)},{keyCode:lt.UP,action:_t(Lw,s,!1)},{keyCode:lt.DOWN,action:_t(Lw,s,!0)},{keyCode:lt.RIGHT,action:_t(ew,s,i,!0)},{keyCode:lt.LEFT,action:_t(ew,s,i,!1)},{keyCode:lt.RIGHT,ctrlKey:!l,altKey:l,action:_t(NO,s,i)},{keyCode:lt.LEFT,ctrlKey:!l,altKey:l,action:_t(AO,s,i)},{keyCode:lt.UP,action:_t(Aw,s,!1)},{keyCode:lt.DOWN,action:_t(Aw,s,!0)}],a).each(c=>{a.preventDefault()})})(n,o,r)})})(t,e),((n,o)=>{let r=!1;n.on("keydown",s=>{r=s.keyCode===lt.BACKSPACE,s.isDefaultPrevented()||((i,a,l)=>{const c=l.keyCode===lt.BACKSPACE?"deleteContentBackward":"deleteContentForward",d=i.selection.isCollapsed(),u=d?"character":"selection",f=h=>d?h?"word":"line":"selection";Dw([{keyCode:lt.BACKSPACE,action:_t(hw,i)},{keyCode:lt.BACKSPACE,action:_t(gp,i,!1)},{keyCode:lt.DELETE,action:_t(gp,i,!0)},{keyCode:lt.BACKSPACE,action:_t(up,i,!1)},{keyCode:lt.DELETE,action:_t(up,i,!0)},{keyCode:lt.BACKSPACE,action:_t(Ep,i,a,!1)},{keyCode:lt.DELETE,action:_t(Ep,i,a,!0)},{keyCode:lt.BACKSPACE,action:_t(yg,i,!1)},{keyCode:lt.DELETE,action:_t(yg,i,!0)},{keyCode:lt.BACKSPACE,action:_t(ji,i,!1,u)},{keyCode:lt.DELETE,action:_t(ji,i,!0,u)},...k1?[{keyCode:lt.BACKSPACE,altKey:!0,action:_t(ji,i,!1,f(!0))},{keyCode:lt.DELETE,altKey:!0,action:_t(ji,i,!0,f(!0))},{keyCode:lt.BACKSPACE,metaKey:!0,action:_t(ji,i,!1,f(!1))}]:[{keyCode:lt.BACKSPACE,ctrlKey:!0,action:_t(ji,i,!1,f(!0))},{keyCode:lt.DELETE,ctrlKey:!0,action:_t(ji,i,!0,f(!0))}],{keyCode:lt.BACKSPACE,action:_t(pp,i,!1)},{keyCode:lt.DELETE,action:_t(pp,i,!0)},{keyCode:lt.BACKSPACE,action:_t(Sp,i,!1)},{keyCode:lt.DELETE,action:_t(Sp,i,!0)},{keyCode:lt.BACKSPACE,action:_t(cp,i,!1)},{keyCode:lt.DELETE,action:_t(cp,i,!0)},{keyCode:lt.BACKSPACE,action:_t(lp,i,!1)},{keyCode:lt.DELETE,action:_t(lp,i,!0)},{keyCode:lt.BACKSPACE,action:_t(xp,i,!1)},{keyCode:lt.DELETE,action:_t(xp,i,!0)}],l).filter(h=>i.selection.isEditable()).each(h=>{l.preventDefault(),sm(i,c).isDefaultPrevented()||(h(),Xc(i,c))})})(n,o,s)}),n.on("keyup",s=>{var i,a,l;s.isDefaultPrevented()||(a=s,l=r,qc([{keyCode:lt.BACKSPACE,action:_t(kC,i=n)},{keyCode:lt.DELETE,action:_t(kC,i)},...k1?[{keyCode:lt.BACKSPACE,altKey:!0,action:_t(Hc,i)},{keyCode:lt.DELETE,altKey:!0,action:_t(Hc,i)},...l?[{keyCode:wT?224:91,action:_t(Hc,i)}]:[]]:[{keyCode:lt.BACKSPACE,ctrlKey:!0,action:_t(Hc,i)},{keyCode:lt.DELETE,ctrlKey:!0,action:_t(Hc,i)}]],a)),r=!1})})(t,e),(n=>{let o=w.none();n.on("keydown",r=>{var s;r.keyCode===lt.ENTER&&(LT&&(s=>{if(!s.collapsed)return!1;const i=s.startContainer;if(X(i)){const a=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=i.data.charAt(s.startOffset-1);return a.test(l)}return!1})(n.selection.getRng())?(o=w.some((s=n).selection.getBookmark()),s.undoManager.add()):F1(n,r))}),n.on("keyup",r=>{r.keyCode===lt.ENTER&&o.each(()=>{return i=r,(s=n).undoManager.undo(),o.fold(Tt,a=>s.selection.moveToBookmark(a)),F1(s,i),void(o=w.none());var s,i})})})(t),(n=>{n.on("keydown",o=>{var r,s;o.isDefaultPrevented()||(s=o,Dw([{keyCode:lt.SPACEBAR,action:_t(MT,r=n)},{keyCode:lt.SPACEBAR,action:_t(IT,r)}],s).each(i=>{s.preventDefault(),sm(r,"insertText",{data:" "}).isDefaultPrevented()||(i(),Xc(r,"insertText",{data:" "}))}))})})(t),(n=>{n.on("input",o=>{o.isComposing||(r=>{const s=O(r.getBody());r.selection.isCollapsed()&&((t,e)=>{const n=e.container();if(!X(n))return w.none();if((o=>{const r=o.container();return X(r)&&be(r.data,Ee)})(e)){const o=U0(t,n,!1)||(r=>{const s=r.data,i=(a=>{const l=a.split("");return Mt(l,(c,d)=>cu(c)&&d>0&&d<l.length-1&&wf(l[d-1])&&wf(l[d+1])?" ":c).join("")})(s);return i!==s&&(r.data=i,!0)})(n)||z0(t,n,!1);return $r(o,e)}if(ag(t,e)){const o=U0(t,n,!0)||z0(t,n,!0);return $r(o,e)}return w.none()})(s,z.fromRangeStart(r.selection.getRng())).each(i=>{r.selection.setRng(i.toRange())})})(n)})})(t),(n=>{n.on("keydown",o=>{var s;o.isDefaultPrevented()||(s=o,qc([...FT(n)],s).each(i=>{s.preventDefault()}))})})(t),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,i,a)=>{const l=Rt.os.isMacOS()||Rt.os.isiOS();qc([{keyCode:lt.END,action:_t(Nw,s,!0)},{keyCode:lt.HOME,action:_t(Nw,s,!1)},...l?[]:[{keyCode:lt.HOME,action:_t(Qu,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:lt.END,action:_t(Qu,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:lt.END,action:_t(Pw,s,!0)},{keyCode:lt.HOME,action:_t(Pw,s,!1)},{keyCode:lt.END,action:_t(Gu,s,!0,i)},{keyCode:lt.HOME,action:_t(Gu,s,!1,i)}],a).each(c=>{a.preventDefault()})})(n,o,r)})})(t,e),((n,o)=>{if(PT.os.isMacOS())return;const r=je(!1);n.on("keydown",s=>{$1(s)&&U1(r,n,!0)}),n.on("keyup",s=>{var i,a,l;s.isDefaultPrevented()||(l=s,qc([{keyCode:lt.PAGE_UP,action:_t(Gu,i=n,!1,a=o)},{keyCode:lt.PAGE_DOWN,action:_t(Gu,i,!0,a)}],l)),$1(s)&&r.get()&&(U1(r,n,!1),n.nodeChanged())})})(t,e),e}var n};class $T{constructor(e){let n;this.lastPath=[],this.editor=e;const o=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",r=>{const s=e.selection.getRng(),i={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};"nodechange"!==r.type&&$f(i,n)||e.dispatch("SelectionChange"),n=i}),e.on("contextmenu",()=>{e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{const r=e.selection.getStart(!0);r&&uu(e)&&!o.isSameElementPath(r)&&e.dom.isChildOf(r,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",r=>{!r.isDefaultPrevented()&&uu(e)&&("IMG"===e.selection.getNode().nodeName?uo.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){const n=this.editor.selection;let o;if(this.editor.initialized&&n&&!Rk(this.editor)&&!this.editor.mode.isReadOnly()){const r=this.editor.getBody();o=n.getStart(!0)||r,o.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(o,r)||(o=r);const s=[];this.editor.dom.getParent(o,i=>i===r||(s.push(i),!1)),this.editor.dispatch("NodeChange",{...e,element:o,parents:s})}}isSameElementPath(e){let n;const o=this.editor,r=Gs(o.dom.getParents(e,me,o.getBody()));if(r.length===this.lastPath.length){for(n=r.length;n>=0&&r[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=r,!0}return this.lastPath=r,!1}}const W1=cc("image"),Qp=cc("event"),um=t=>e=>{e[Qp]=t},K1=um(0),UT=um(2),zT=um(1),Jp=cc("mode"),mm=t=>e=>{e[Jp]=t},Y1=(t,e)=>mm(e)(t),X1=mm(0),Zp=mm(2),qT=mm(1),G1=t=>e=>w.from(e[Jp]).exists(o=>o===t),Ja=G1(0),Q1=G1(1),VT=["none","copy","link","move"],WT=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],th=()=>{const t=new window.DataTransfer;let e="move",n="all";const o={get dropEffect(){return e},set dropEffect(r){gt(VT,r)&&(e=r)},get effectAllowed(){return n},set effectAllowed(r){(t=>w.from(t[Qp]).exists(n=>0===n))(o)&&gt(WT,r)&&(n=r)},get items(){return r=o,s=t.items,{...s,get length(){return s.length},add:(i,a)=>{if(Ja(r)){if(!ht(i))return s.add(i);if(!Ne(a))return s.add(i,a)}return null},remove:i=>{Ja(r)&&s.remove(i)},clear:()=>{Ja(r)&&s.clear()}};var r,s},get files(){return Q1(o)?Object.freeze({length:0,item:r=>null}):t.files},get types(){return t.types},setDragImage:(r,s,i)=>{Ja(o)&&(o[W1]={image:r,x:s,y:i},t.setDragImage(r,s,i))},getData:r=>Q1(o)?"":t.getData(r),setData:(r,s)=>{Ja(o)&&t.setData(r,s)},clearData:r=>{Ja(o)&&t.clearData(r)}};return X1(o),o},J1=(t,e)=>t.setData("text/html",e),Z1="x-tinymce/html",fm=st(Z1),eh="\x3c!-- "+Z1+" --\x3e",KT=t=>eh+t,tE=t=>-1!==t.indexOf(eh),eE="%MCEPASTEBIN%",nh=t=>t.dom.get("mcepastebin"),YT=t=>ot(t)&&"mcepastebin"===t.id,nE=t=>t===eE,oE=(t,e)=>(Q.each(e,n=>{t=or(n,RegExp)?t.replace(n,""):t.replace(n[0],n[1])}),t),rE=t=>oE(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,n,o)=>n||o?Ee:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),sE=(t,e)=>({content:t,cancelled:e}),oh=(t,e)=>(t.insertContent(e,{merge:Gk(t),paste:!0}),!0),rh=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),XT=(t,e,n)=>{return!(t.selection.isCollapsed()||!rh(e)||(o=t,r=e,s=n,o.undoManager.extra(()=>{s(o,r)},()=>{o.execCommand("mceInsertLink",!1,r)}),0));var o,r,s},GT=(t,e,n)=>{return o=t,!(!rh(r=e)||!le(Ab(o),s=>rn(r.toLowerCase(),`.${s.toLowerCase()}`)))&&((o,r,s)=>(o.undoManager.extra(()=>{s(o,r)},()=>{o.insertContent('<img src="'+r+'">')}),!0))(t,e,n);var o,r},QT=(t=>{let e=0;return()=>"mceclip"+e++})(),JT=t=>{const e=th();return J1(e,t),Zp(e),e},iE=(t,e,n,o,r)=>{const s=((c,d,u)=>{const f=c.dispatch("PastePreProcess",{content:d,internal:u}),h=((g,b)=>{const p=qa({sanitize:ff(g)},g.schema);p.addNodeFilter("meta",_=>{Q.each(_,C=>{C.remove()})});const v=p.parse(b,{forced_root_block:!1,isRootContent:!0});return Fs({validate:!0},g.schema).serialize(v)})(c,f.content);return c.hasEventListeners("PastePostProcess")&&!f.isDefaultPrevented()?((g,b,p)=>{const v=g.dom.create("div",{style:"display:none"},b),_=g.dispatch("PastePostProcess",{node:v,internal:p});return sE(_.node.innerHTML,_.isDefaultPrevented())})(c,h,u):sE(h,f.isDefaultPrevented())})(t,e,n);if(!s.cancelled){const i=s.content,a=()=>{return l=t,c=i,void(o||!Qk(l)?oh(l,c):(u=l,f=c,Q.each([XT,GT,oh],h=>!h(u,f,oh))));var l,c,u,f};r?sm(t,"insertFromPaste",{dataTransfer:JT(i)}).isDefaultPrevented()||(a(),Xc(t,"insertFromPaste")):a()}},gm=(t,e,n,o)=>{const r=n||tE(e);iE(t,e.replace(eh,""),r,!1,o)},sh=(t,e,n)=>{const o=t.dom.encode(e).replace(/\r\n/g,"\n"),r=((s,i,a)=>{const l=s.split(/\n\n/),c=((f,h)=>{let g="<"+f;const b=fs(h,(p,v)=>v+'="'+io.encodeAllRaw(p)+'"');return b.length&&(g+=" "+b.join(" ")),g+">"})(i,a),d="</"+i+">",u=Mt(l,f=>f.split(/\n/).join("<br />"));return 1===u.length?u[0]:Mt(u,f=>c+f+d).join("")})(S(o,Zk(t)),en(t),gc(t));iE(t,r,!1,!0,n)},aE=t=>{const e={};if(t&&t.types)for(let n=0;n<t.types.length;n++){const o=t.types[n];try{e[o]=t.getData(o)}catch{e[o]=""}}return e},qs=(t,e)=>e in t&&t[e].length>0,lE=t=>qs(t,"text/html")||qs(t,"text/plain"),cE=(t,e,n)=>{const o="paste"===e.type?e.clipboardData:e.dataTransfer;var r;if(ou(t)&&o){const s=((i,a)=>{const l=a.items?Un(Ye(a.items),d=>"file"===d.kind?[d.getAsFile()]:[]):[],c=a.files?Ye(a.files):[];return xt(l.length>0?l:c,(d=>{const u=Ab(d);return f=>Gt(f.type,"image/")&&le(u,h=>(g=>{const b=g.toLowerCase(),p={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Q.hasOwn(p,b)?"image/"+p[b]:"image/"+b})(h)===f.type)})(i))})(t,o);if(s.length>0)return e.preventDefault(),(r=s,Promise.all(Mt(r,i=>a_(i).then(a=>({file:i,uri:a}))))).then(i=>{n&&t.selection.setRng(n),W(i,a=>{var l,c;l=t,$g((c=a).uri).each(({data:d,type:u,base64Encoded:f})=>{const h=f?d:btoa(d),g=c.file,b=l.editorUpload.blobCache,v=b.getByData(h,u)??((_,C,k,x)=>{const N=QT(),D=bb(_)&&ot(k.name),B=D?((A,T)=>{const I=T.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return ot(I)?A.dom.encode(I[1]):void 0})(_,k.name):N,j=C.create(N,k,x,B,D?k.name:void 0);return C.add(j),j})(l,b,g,h);gm(l,`<img src="${v.blobUri()}">`,!1,!0)})})}),!0}return!1},ih=(t,e,n,o,r)=>{let s=rE(n);const i=qs(e,fm())||tE(n),a=!i&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(s),l=rh(s);(nE(s)||!s.length||a&&!l)&&(o=!0),(o||l)&&(s=qs(e,"text/plain")&&a?e["text/plain"]:(c=>{const d=xn(),u=qa({},d);let f="";const h=d.getVoidElements(),g=Q.makeMap("script noscript style textarea video audio iframe object"," "),b=d.getBlockElements(),p=v=>{const _=v.name,C=v;if("br"!==_){if("wbr"!==_)if(h[_]&&(f+=" "),g[_])f+=" ";else{if(3===v.type&&(f+=v.value),!(v.name in d.getVoidElements())){let k=v.firstChild;if(k)do{p(k)}while(k=k.next)}b[_]&&C.next&&(f+="\n","p"===_&&(f+="\n"))}}else f+="\n"};return c=oE(c,[/<!\[[^\]]+\]>/g]),p(u.parse(c)),f})(s)),nE(s)||(o?sh(t,s,r):gm(t,s,i,r))},dE=(t,e,n,o)=>{((r,s,i)=>{if(!r)return!1;try{return r.clearData(),r.setData("text/html",s),r.setData("text/plain",i),r.setData(fm(),s),!0}catch{return!1}})(t.clipboardData,e.html,e.text)?(t.preventDefault(),o()):n(e.html,o)},uE=t=>(e,n)=>{const{dom:o,selection:r}=t,s=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=o.create("div",{contenteditable:"true"},e);o.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(i),o.add(t.getBody(),s);const a=r.getRng();i.focus();const l=o.createRng();l.selectNodeContents(i),r.setRng(l),uo.setEditorTimeout(t,()=>{r.setRng(a),o.remove(s),n()},0)},mE=t=>({html:KT(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),fE=t=>{return!t.selection.isCollapsed()||!!(e=t).dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody());var e},gE=(t,e)=>{var n,o;return Ti.getCaretRangeFromPoint(null!==(n=e.clientX)&&void 0!==n?n:0,null!==(o=e.clientY)&&void 0!==o?o:0,t.getDoc())},pE=(t,e)=>{t.focus(),e&&t.selection.setRng(e)},tR=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,hE=t=>Q.trim(t).replace(tR,du).toLowerCase(),eR=(t,e,n)=>{const o=Yk(t);if(n||"all"===o||!Xk(t))return e;const r=o?o.split(/[, ]/):[];if(r&&"none"!==o){const s=t.dom,i=t.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(a,l,c,d)=>{const u=s.parseStyle(s.decode(c)),f={};for(let g=0;g<r.length;g++){const b=u[r[g]];let p=b,v=s.getStyle(i,r[g],!0);/color/.test(r[g])&&(p=hE(p),v=hE(v)),v!==p&&(f[r[g]]=b)}const h=s.serializeStyle(f,"span");return h?l+' style="'+h+'"'+d:l+d})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(s,i,a,l)=>i+' style="'+a+'"'+l)},oR=ce,bE=X,rR=t=>Zt(t.dom),vE=t=>e=>zt(O(t),e),yE=(t,e)=>To(O(t),rR,vE(e)),_E=(t,e,n)=>{const o=new Ce(t,e),r=n?o.next.bind(o):o.prev.bind(o);let s=t;for(let i=n?t:r();i&&!oR(i);i=r())fn(i)&&(s=i);return s};var Za;!function(t){t.Before="before",t.After="after"}(Za||(Za={}));const iR=(t,e)=>Math.abs(t.left-e),aR=(t,e)=>Math.abs(t.right-e),cR=(t,e,n)=>e>t.left&&e<t.right?0:Math.min(Math.abs(t.left-e),Math.abs(t.right-e)),ah=(t,e,n)=>{const o=c=>fn(c.node)?w.some(c):ct(c.node)?ah(Ye(c.node.childNodes),e,n):w.none(),r=(c,d)=>{const u=ir(c,(f,h)=>d(f,e,n)-d(h,e,n));return((f,h)=>{if(f.length>=2){const g=o(f[0]).getOr(f[0]),b=o(f[1]).getOr(f[1]);if(Math.abs(h(g,e,n)-h(b,e,n))<2){if(X(g.node))return w.some(g);if(X(b.node))return w.some(b)}}return w.none()})(u,d).orThunk(()=>us(u,o))},[s,i]=((t,e)=>{return(n=xt(t,n=>{return(o=e)>=(r=n).top&&o<=r.bottom;var o,r}),Me(n,(o,r)=>o.fold(()=>w.some(r),s=>{const i=Math.min(r.left,s.left),a=Math.min(r.top,s.top),l=Math.max(r.right,s.right),c=Math.max(r.bottom,s.bottom);return w.some({top:a,right:l,bottom:c,left:i,width:l-i,height:c-a})}),w.none())).fold(()=>[[],t],n=>{const{pass:o,fail:r}=$o(t,s=>((i,a)=>{const l=(c=i,d=a,Math.max(0,Math.min(c.bottom,d.bottom)-Math.max(c.top,d.top))/Math.min(i.height,a.height));var c,d;return((c,d)=>c.top<d.bottom&&c.bottom>d.top)(i,a)&&l>.5})(s,n));return[o,r]});var n})(WC(t),n),{pass:a,fail:l}=$o(i,c=>c.top<n);return r(s,cR).orThunk(()=>r(l,$h)).orThunk(()=>r(a,$h))},CE=(t,e,n)=>((o,r,s)=>{const i=O(o),l=((t,e,n)=>w.from(t.dom.elementFromPoint(e,n)).map(Cs))(Ho(i),r,s).filter(c=>No(i,c)).getOr(i);return((c,d,u,f)=>{const h=(g,b)=>{const p=xt(g.dom.childNodes,ds(v=>ct(v)&&v.classList.contains("mce-drag-container")));return b.fold(()=>ah(p,u,f),v=>{const _=xt(p,C=>C!==v.dom);return ah(_,u,f)}).orThunk(()=>(zt(g,c)?w.none():ri(g)).bind(v=>h(v,w.some(g))))};return h(d,w.none())})(i,l,r,s)})(t,e,n).filter(o=>bc(o.node)).map(o=>{return{node:(r=o).node,position:iR(r,s=e)<aR(r,s)?Za.Before:Za.After};var r,s}),wE=t=>{var e,n;const o=t.getBoundingClientRect(),r=t.ownerDocument,s=r.documentElement,i=r.defaultView;return{top:o.top+(null!==(e=i?.scrollY)&&void 0!==e?e:0)-s.clientTop,left:o.left+(null!==(n=i?.scrollX)&&void 0!==n?n:0)-s.clientLeft}},EE=t=>({target:t,srcElement:t}),xE=Zt,uR=((...t)=>e=>{for(let n=0;n<t.length;n++)if(t[n](e))return!0;return!1})(xE,Bn),mR=(t,e,n,o)=>{const r=t.dom,s=e.cloneNode(!0);r.setStyles(s,{width:n,height:o}),r.setAttrib(s,"data-mce-selected",null);const i=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),r.setStyles(s,{margin:0,boxSizing:"border-box"}),i.appendChild(s),i},pm=(t,e)=>n=>()=>{n.scroll({[t]:("left"===t?n.scrollX:n.scrollY)+e,behavior:"smooth"})},kE=pm("left",-32),SE=pm("left",32),NE=pm("top",-32),AE=pm("top",32),OE=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},Zc=(t,e,n,o,r)=>{"dragstart"===e&&J1(o,t.dom.getOuterHTML(n));const s=((t,e,n,o)=>{const r=((s,i)=>{const a=(l=>{const c=th(),d=w.from(l[Jp]);return Zp(l),K1(c),c.dropEffect=l.dropEffect,c.effectAllowed=l.effectAllowed,(u=l,w.from(u[W1])).each(u=>c.setDragImage(u.image,u.x,u.y)),W(l.types,u=>{"Files"!==u&&c.setData(u,l.getData(u))}),W(l.files,u=>c.items.add(u)),(u=>w.from(u[Qp]))(l).each(u=>{var f;f=c,um(u)(f)}),d.each(u=>{Y1(l,u),Y1(c,u)}),c;var u})(s);return"dragstart"===i?(K1(a),X1(a)):"drop"===i?(UT(a),Zp(a)):(zT(a),qT(a)),a})(n,t);return Ne(o)?((s,i,a)=>{const l=id("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:s,composedPath:l,initEvent:l,preventDefault:Tt,stopImmediatePropagation:Tt,stopPropagation:Tt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:a,...EE(i)}})(t,e,r):(s=t,i=o,a=e,l=r,{...i,dataTransfer:l,type:s,...EE(a)});var s,i,a,l})(e,n,o,r);return t.dispatch(e,s)},TE=(t,e,n)=>{t.on(o=>{o.intervalId.clear(),o.dragging&&n.fold(()=>Zc(e,"dragend",o.element,o.dataTransfer),r=>Zc(e,"dragend",o.element,o.dataTransfer,r))}),RE(t)},RE=t=>{t.on(e=>{e.intervalId.clear(),OE(e.ghost)}),t.clear()},td=Zt,DE=(t,e)=>Li(t.getBody(),e),pR=t=>{const e=t.selection,n=t.dom,o=t.getBody(),r=((t,e,n,o)=>{const r=Bs();let s,i;const a=en(t),l=t.dom,c=()=>{(d=>{var u,f;const h=De(O(d),"*[contentEditable=false],video,audio,embed,object");for(let g=0;g<h.length;g++){const b=h[g].dom;let p=b.previousSibling;if(so(p)){const v=p.data;1===v.length?null===(u=p.parentNode)||void 0===u||u.removeChild(p):p.deleteData(v.length-1,1)}p=b.nextSibling,Po(p)&&(1===p.data.length?null===(f=p.parentNode)||void 0===f||f.removeChild(p):p.deleteData(0,1))}})(e),i&&(xi(i),i=null),r.on(d=>{l.remove(d.caret),r.clear()}),s&&(clearInterval(s),s=void 0)};return{show:(d,u)=>{let f;if(c(),pS(u))return null;if(!n(u))return i=((h,g)=>{var b;const p=(null!==(b=h.ownerDocument)&&void 0!==b?b:document).createTextNode(xe),v=h.parentNode;if(g){const _=h.previousSibling;if(Jr(_)){if(mn(_))return _;if(so(_))return _.splitText(_.data.length-1)}v?.insertBefore(p,h)}else{const _=h.nextSibling;if(Jr(_)){if(mn(_))return _;if(Po(_))return _.splitText(1),_}h.nextSibling?v?.insertBefore(p,h.nextSibling):v?.appendChild(p)}return p})(u,d),f=u.ownerDocument.createRange(),hc(i.nextSibling)?(f.setStart(i,0),f.setEnd(i,0)):(f.setStart(i,1),f.setEnd(i,1)),f;{const h=((p,v,_)=>{var C;const k=(null!==(C=v.ownerDocument)&&void 0!==C?C:document).createElement(p);k.setAttribute("data-mce-caret",_?"before":"after"),k.setAttribute("data-mce-bogus","all"),k.appendChild(ui().dom);const x=v.parentNode;return _?x?.insertBefore(k,v):v.nextSibling?x?.insertBefore(k,v.nextSibling):x?.appendChild(k),k})(a,u,d),g=Lb(e,u,d);l.setStyle(h,"top",g.top),i=h;const b=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(b,{...g}),l.add(e,b),r.set({caret:b,element:u,before:d}),d&&l.addClass(b,"mce-visual-caret-before"),s=setInterval(()=>{r.on(p=>{o()?l.toggleClass(p.caret,"mce-visual-caret-hidden"):l.addClass(p.caret,"mce-visual-caret-hidden")})},500),f=u.ownerDocument.createRange(),f.setStart(h,0),f.setEnd(h,0)}return f},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{r.on(d=>{const u=Lb(e,d.element,d.before);l.setStyles(d.caret,{...u})})},destroy:()=>clearInterval(s)}})(t,o,n.isBlock,()=>Ri(t)),s="sel-"+n.uniqueId(),i="data-mce-selected";let a;const l=p=>p!==o&&(td(p)||Ze(p))&&n.isChildOf(p,o)&&n.isEditable(p.parentNode),c=(p,v,_,C=!0)=>t.dispatch("ShowCaret",{target:v,direction:p,before:_}).isDefaultPrevented()?null:(C&&e.scrollIntoView(v,-1===p),r.show(_,v)),d=p=>mn(p)||Po(p)||so(p),u=p=>d(p.startContainer)||d(p.endContainer),h=(p,v)=>{if(!p)return null;if(p.collapsed){if(!u(p)){const x=v?1:-1,N=Cc(x,o,p),D=N.getNode(!v);if(ot(D)){if(bc(D))return c(x,D,!!v&&!N.isAtEnd(),!1);if(Ko(D)&&Zt(D.nextSibling)){const P=n.createRng();return P.setStart(D,0),P.setEnd(D,0),P}}const B=N.getNode(v);if(ot(B)){if(bc(B))return c(x,B,!v&&!N.isAtEnd(),!1);if(Ko(B)&&Zt(B.previousSibling)){const P=n.createRng();return P.setStart(B,1),P.setEnd(B,1),P}}}return null}let _=p.startContainer,C=p.startOffset;const k=p.endOffset;if(X(_)&&0===C&&td(_.parentNode)&&(_=_.parentNode,C=n.nodeIndex(_),_=_.parentNode),!ct(_))return null;if(k===C+1&&_===p.endContainer){const x=_.childNodes[C];if(l(x))return(N=>{const D=N.cloneNode(!0),B=t.dispatch("ObjectSelected",{target:N,targetClone:D});if(B.isDefaultPrevented())return null;const P=((A,T)=>{const I=O(t.getBody()),q=t.getDoc(),at=ii(I,"#"+s).getOrThunk(()=>{const mt=mr('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',q);return fe(mt,"id",s),ge(I,mt),mt}),G=n.createRng();Ss(at),Vr(at,[ws(Ee,q),O(T),ws(Ee,q)]),G.setStart(at.dom.firstChild,1),G.setEnd(at.dom.lastChild,0),qr(at,{top:n.getPos(A,t.getBody()).y+"px"}),Gv(at);const pt=e.getSel();return pt&&(pt.removeAllRanges(),pt.addRange(G)),G})(N,B.targetClone),j=O(N);return W(De(O(t.getBody()),`*[${i}]`),A=>{zt(j,A)||Te(A,i)}),n.getAttrib(N,i)||N.setAttribute(i,"1"),a=N,b(),P})(x)}return null},g=()=>{a&&a.removeAttribute(i),ii(O(t.getBody()),"#"+s).each(ne),a=null},b=()=>{r.hide()};return Nr(t)||(t.on("click",p=>{n.isEditable(p.target)||(p.preventDefault(),t.focus())}),t.on("blur NewBlock",g),t.on("ResizeWindow FullscreenStateChanged",r.reposition),t.on("tap",p=>{const v=p.target,_=DE(t,v);td(_)?(p.preventDefault(),jc(t,_).each(h)):l(v)&&jc(t,v).each(h)},!0),t.on("mousedown",p=>{const v=p.target;if(v!==o&&"HTML"!==v.nodeName&&!n.isChildOf(v,o)||!((C,k,x)=>{const N=O(C.getBody()),D=C.inline?N:O(Ho(N).dom.documentElement),B=((P,j,A,T)=>{const I=j.dom.getBoundingClientRect();return{x:A-(P?I.left+j.dom.clientLeft+qA(j):0),y:T-(P?I.top+j.dom.clientTop+HA(j):0)}})(C.inline,D,k,x);return((P,j,A)=>{const T=UA(P),I=zA(P);return j>=0&&A>=0&&j<=T&&A<=I})(D,B.x,B.y)})(t,p.clientX,p.clientY))return;g(),b();const _=DE(t,v);td(_)?(p.preventDefault(),jc(t,_).each(h)):CE(o,p.clientX,p.clientY).each(C=>{var k;p.preventDefault(),(k=c(1,C.node,C.position===Za.Before,!1))&&e.setRng(k),ct(_)?_.focus():t.getBody().focus()})}),t.on("keypress",p=>{lt.modifierPressed(p)||td(e.getNode())&&p.preventDefault()}),t.on("GetSelectionRange",p=>{let v=p.range;if(a){if(!a.parentNode)return void(a=null);v=v.cloneRange(),v.selectNode(a),p.range=v}}),t.on("SetSelectionRange",p=>{p.range=(p=>{const v=t.schema.getVoidElements(),_=n.createRng(),C=p.startContainer,k=p.startOffset,x=p.endContainer,N=p.endOffset;return Ot(v,C.nodeName.toLowerCase())?0===k?_.setStartBefore(C):_.setStartAfter(C):_.setStart(C,k),Ot(v,x.nodeName.toLowerCase())?0===N?_.setEndBefore(x):_.setEndAfter(x):_.setEnd(x,N),_})(p.range);const v=h(p.range,p.forward);v&&(p.range=v)}),t.on("AfterSetSelectionRange",p=>{const v=p.range,_=v.startContainer.parentElement;var C,k;u(v)||ct(C=_)&&"mcepastebin"===C.id||b(),ot(k=_)&&n.hasClass(k,"mce-offscreen-selection")||g()}),(t=>{const e=Bs(),n=Qt.DOM,o=document,r=(l=e,c=t,d=>{if(0===d.button){const u=ye(c.dom.getParents(d.target),uR).getOr(null);if(ot(u)&&(f=c.dom,h=c.getBody(),xE(g=u)&&g!==h&&f.isEditable(g.parentElement))){const f=c.dom.getPos(u),h=c.getBody(),g=c.getDoc().documentElement;l.set({element:u,dataTransfer:th(),dragging:!1,screenX:d.screenX,screenY:d.screenY,maxX:(c.inline?h.scrollWidth:g.offsetWidth)-2,maxY:(c.inline?h.scrollHeight:g.offsetHeight)-2,relX:d.pageX-f.x,relY:d.pageY-f.y,width:u.offsetWidth,height:u.offsetHeight,ghost:mR(c,u,u.offsetWidth,u.offsetHeight),intervalId:Ix(100)})}}var f,h,g}),s=((t,e)=>{const n=Qd((r,s)=>{return a=r,l=s,(i=e)._selectionOverrides.hideFakeCaret(),void CE(i.getBody(),a,l).fold(()=>i.selection.placeCaretAt(a,l),c=>{const d=i._selectionOverrides.showCaret(1,c.node,c.position===Za.Before,!1);d?i.selection.setRng(d):i.selection.placeCaretAt(a,l)});var i,a,l},0);e.on("remove",n.cancel);const o=t;return r=>t.on(s=>{const i=Math.max(Math.abs(r.screenX-s.screenX),Math.abs(r.screenY-s.screenY));if(!s.dragging&&i>10){const c=Zc(e,"dragstart",s.element,s.dataTransfer,r);if(ot(c.dataTransfer)&&(s.dataTransfer=c.dataTransfer),c.isDefaultPrevented())return;s.dragging=!0,e.focus()}if(s.dragging){const c=r.currentTarget===e.getDoc().documentElement,d=((u,f)=>({pageX:f.pageX-u.relX,pageY:f.pageY+5}))(s,(f=r,h=(p=u=e).inline?wE(p.getBody()):{left:0,top:0},g=(p=>{const v=p.getBody();return p.inline?{left:v.scrollLeft,top:v.scrollTop}:{left:0,top:0}})(u),b=((p,v)=>{if(v.target.ownerDocument!==p.getDoc()){const _=wE(p.getContentAreaContainer()),C=(k=>{const x=k.getBody(),N=k.getDoc().documentElement;return k.inline?{left:x.scrollLeft,top:x.scrollTop}:{left:x.scrollLeft||N.scrollLeft,top:x.scrollTop||N.scrollTop}})(p);return{left:v.pageX-_.left+C.left,top:v.pageY-_.top+C.top}}return{left:v.pageX,top:v.pageY}})(u,f),{pageX:b.left-h.left+g.left,pageY:b.top-h.top+g.top}));a=s.ghost,l=e.getBody(),a.parentNode!==l&&l.appendChild(a),((u,f,h,g,b,p,v,_,C,k,x,N)=>{let D=0,B=0;u.style.left=f.pageX+"px",u.style.top=f.pageY+"px",f.pageX+h>b&&(D=f.pageX+h-b),f.pageY+g>p&&(B=f.pageY+g-p),u.style.width=h-D+"px",u.style.height=g-B+"px";const P=C.clientHeight,j=C.clientWidth,A=v+C.getBoundingClientRect().top,T=_+C.getBoundingClientRect().left;x.on(I=>{I.intervalId.clear(),I.dragging&&N&&(v+8>=P?I.intervalId.set(AE(k)):v-8<=0?I.intervalId.set(NE(k)):_+8>=j?I.intervalId.set(SE(k)):_-8<=0?I.intervalId.set(kE(k)):A+16>=window.innerHeight?I.intervalId.set(AE(window)):A-16<=0?I.intervalId.set(NE(window)):T+16>=window.innerWidth?I.intervalId.set(SE(window)):T-16<=0&&I.intervalId.set(kE(window)))})})(s.ghost,d,s.width,s.height,s.maxX,s.maxY,r.clientY,r.clientX,e.getContentAreaContainer(),e.getWin(),o,c),n.throttle(r.clientX,r.clientY)}var u,f,p,h,g,b,a,l})})(e,t),i=((l,c)=>d=>{l.on(u=>{var f,h,g,b;if(u.intervalId.clear(),u.dragging){if(h=c,g=(h=>{const g=h.getSel();if(ot(g)){const b=g.getRangeAt(0).startContainer;return X(b)?b.parentNode:b}return null})(c.selection),b=u.element,!he(g)&&g!==b&&!h.dom.isChildOf(g,b)&&h.dom.isEditable(g)){const h=null!==(f=c.getDoc().elementFromPoint(d.clientX,d.clientY))&&void 0!==f?f:c.getBody();Zc(c,"drop",h,u.dataTransfer,d).isDefaultPrevented()||c.undoManager.transact(()=>{((g,b)=>{const p=g.getParent(b.parentNode,g.isBlock);OE(b),p&&p!==g.getRoot()&&g.isEmpty(p)&&Wo(O(p))})(c.dom,u.element),(g=>{const b=g.getData("text/html");return""===b?w.none():w.some(b)})(u.dataTransfer).each(g=>c.insertContent(g)),c._selectionOverrides.hideFakeCaret()})}Zc(c,"dragend",c.getBody(),u.dataTransfer,d)}}),RE(l)})(e,t),a=((l,c)=>d=>TE(l,c,w.some(d)))(e,t);var l,c;t.on("mousedown",r),t.on("mousemove",s),t.on("mouseup",i),n.bind(o,"mousemove",s),n.bind(o,"mouseup",a),t.on("remove",()=>{n.unbind(o,"mousemove",s),n.unbind(o,"mouseup",a)}),t.on("keydown",l=>{l.keyCode===lt.ESC&&TE(e,t,w.none())})})(p=t),Lk(p)&&(v=>{const _=x=>{if(!x.isDefaultPrevented()){const N=x.dataTransfer;N&&(gt(N.types,"Files")||N.files.length>0)&&(x.preventDefault(),"drop"===x.type&&zu(v,"Dropped file type is not supported"))}},C=x=>{Cu(v,x.target)&&_(x)},k=()=>{const x=Qt.DOM,N=v.dom,D=document,B=v.inline?v.getBody():v.getDoc(),P=["drop","dragover"];W(P,j=>{x.bind(D,j,C),N.bind(B,j,_)}),v.on("remove",()=>{W(P,j=>{x.unbind(D,j,C),N.unbind(B,j,_)})})};v.on("init",()=>{uo.setEditorTimeout(v,k,0)})})(p),(p=>{const v=Qd(()=>{if(!p.removed&&p.getBody().contains(document.activeElement)){const _=p.selection.getRng();if(_.collapsed){const C=dp(p,_,!1);p.selection.setRng(C)}}},0);p.on("focus",()=>{v.throttle()}),p.on("blur",()=>{v.cancel()})})(t),(p=>{p.on("init",()=>{p.on("focusin",v=>{const _=v.target;if(Ze(_)){const C=Li(p.getBody(),_),k=Zt(C)?C:_;p.selection.getNode()!==k&&jc(p,k).each(x=>p.selection.setRng(x))}})})})(t)),{showCaret:c,showBlockCaretContainer:p=>{p.hasAttribute("data-mce-caret")&&(Xl(p),e.scrollIntoView(p))},hideFakeCaret:b,destroy:()=>{r.destroy(),a=null}};var p},hR=(t,e)=>{let n=e;for(let o=t.previousSibling;X(o);o=o.previousSibling)n+=o.data.length;return n},BE=(t,e,n,o,r)=>{if(X(n)&&(o<0||o>n.data.length))return[];const s=r&&X(n)?[hR(n,o)]:[o];let i=n;for(;i!==e&&i.parentNode;)s.push(t.nodeIndex(i,r)),i=i.parentNode;return i===e?s.reverse():[]},lh=(t,e,n,o,r,s,i=!1)=>({start:BE(t,e,n,o,i),end:BE(t,e,r,s,i)}),LE=(t,e)=>{const n=e.slice(),o=n.pop();return Tn(o)?Me(n,(r,s)=>r.bind(i=>w.from(i.childNodes[s])),w.some(t)).bind(r=>X(r)&&(o<0||o>r.data.length)?w.none():w.some({node:r,offset:o})):w.none()},PE=(t,e)=>LE(t,e.start).bind(({node:n,offset:o})=>LE(t,e.end).map(({node:r,offset:s})=>{const i=document.createRange();return i.setStart(n,o),i.setEnd(r,s),i})),tl=(t,e,n)=>{if(e&&t.isEmpty(e)&&!n(e)){const o=e.parentNode;t.remove(e,X(e.firstChild)&&E(e.firstChild.data)),tl(t,o,n)}},hm=(t,e,n,o=!0)=>{const r=e.startContainer.parentNode,s=e.endContainer.parentNode;e.deleteContents(),o&&!n(e.startContainer)&&(X(e.startContainer)&&0===e.startContainer.data.length&&t.remove(e.startContainer),X(e.endContainer)&&0===e.endContainer.data.length&&t.remove(e.endContainer),tl(t,r,n),r!==s&&tl(t,s,n))},ch=(t,e)=>w.from(t.dom.getParent(e.startContainer,t.dom.isBlock)),ME=(t,e,n)=>{const o=t.dynamicPatternsLookup({text:n,block:e});return{...t,blockPatterns:cb(o).concat(t.blockPatterns),inlinePatterns:db(o).concat(t.inlinePatterns)}},IE=(t,e,n,o)=>{const r=t.createRng();return r.setStart(e,0),r.setEnd(n,o),r.toString()},FE=(t,e,n)=>{((o,r,s)=>{if(X(o)&&0>=o.length)return w.some(Zo(o,0));{const i=Ci(Ju);return w.from(i.forwards(o,0,Zu(o),s)).map(a=>Zo(a.container,0))}})(e,0,e).each(o=>{const r=o.container;Yw(r,n.start.length,e).each(a=>{const l=t.createRng();l.setStart(r,0),l.setEnd(a.container,a.offset),hm(t,l,c=>c===e)});const s=O(r),i=Vo(s);var a,l;/^\s[^\s]/.test(i)&&(a=s,l=i.slice(1),Vl.set(a,l))})},jE=(t,e)=>t.create("span",{"data-mce-type":"bookmark",id:e}),bm=(t,e)=>{const n=t.createRng();return n.setStartAfter(e.start),n.setEndBefore(e.end),n},$E=(t,e,n)=>{const o=PE(t.getRoot(),n).getOrDie("Unable to resolve path range"),r=o.startContainer,s=o.endContainer,i=0===o.endOffset?s:s.splitText(o.endOffset),a=0===o.startOffset?r:r.splitText(o.startOffset),l=a.parentNode;return{prefix:e,end:i.parentNode.insertBefore(jE(t,e+"-end"),i),start:l.insertBefore(jE(t,e+"-start"),a)}},UE=(t,e,n)=>{tl(t,t.get(e.prefix+"-end"),n),tl(t,t.get(e.prefix+"-start"),n)},dh=t=>0===t.start.length,zE=(t,e,n,o)=>{const r=e.start;var s;return Bp(t,o.container,o.offset,(s=r,(i,a)=>{const l=i.data.substring(0,a),c=l.lastIndexOf(s.charAt(s.length-1)),d=l.lastIndexOf(s);return-1!==d?d+s.length:-1!==c?c+1:-1}),n).bind(i=>{var a,l;const c=null!==(l=null===(a=n.textContent)||void 0===a?void 0:a.indexOf(r))&&void 0!==l?l:-1;if(-1!==c&&i.offset>=c+r.length){const d=t.createRng();return d.setStart(i.container,i.offset-r.length),d.setEnd(i.container,i.offset),w.some(d)}return Dp(i.container,i.offset-r.length,n).map(u=>{const f=t.createRng();return f.setStart(u.container,u.offset),f.setEnd(i.container,i.offset),f}).filter(u=>u.toString()===r).orThunk(()=>zE(t,e,n,Zo(i.container,0)))})},bR=(t,e,n,o)=>{const r=t.dom,s=r.getRoot(),i=n.pattern,a=n.position.container,l=n.position.offset;return Dp(a,l-n.pattern.end.length,e).bind(c=>{const d=lh(r,s,c.container,c.offset,a,l,o);if(dh(i))return w.some({matches:[{pattern:i,startRng:d,endRng:d}],position:c});{const u=vm(t,n.remainingPatterns,c.container,c.offset,e,o),f=u.getOr({matches:[],position:c}),h=f.position;return((b,p,v,_,C,k=!1)=>{if(0===p.start.length&&!k){const x=b.createRng();return x.setStart(v,_),x.setEnd(v,_),w.some(x)}return Rp(v,_,C).bind(x=>zE(b,p,C,x).bind(N=>{var D;return k&&(N.endContainer===x.container&&N.endOffset===x.offset||0===x.offset&&(null===(D=N.endContainer.textContent)||void 0===D?void 0:D.length)===N.endOffset)?w.none():w.some(N)}))})(r,i,h.container,h.offset,e,u.isNone()).map(b=>{const p=((v,_,C,k=!1)=>lh(v,_,C.startContainer,C.startOffset,C.endContainer,C.endOffset,k))(r,s,b,o);return{matches:f.matches.concat([{pattern:i,startRng:p,endRng:d}]),position:Zo(b.startContainer,b.startOffset)}})}})},vm=(t,e,n,o,r,s)=>{const i=t.dom;return Rp(n,o,i.getRoot()).bind(a=>{const l=IE(i,r,n,o);for(let c=0;c<e.length;c++){const d=e[c];if(!rn(l,d.end))continue;const u=e.slice();u.splice(c,1);const f=bR(t,r,{pattern:d,remainingPatterns:u,position:a},s);if(f.isNone()&&o>0)return vm(t,e,n,o-1,r,s);if(f.isSome())return f}return w.none()})},HE=(t,e,n)=>{t.selection.setRng(n),"inline-format"===e.type?W(e.format,o=>{t.formatter.apply(o)}):t.execCommand(e.cmd,!1,e.value)},qE=(t,e,n,o,r,s)=>{var i;return((a,l)=>{const c=sr(a,d=>le(l,u=>d.pattern.start===u.pattern.start&&d.pattern.end===u.pattern.end));return a.length===l.length?c?a:l:a.length>l.length?a:l})(vm(t,r.inlinePatterns,n,o,e,s).fold(()=>[],a=>a.matches),vm(t,(i=r.inlinePatterns,ir(i,(a,l)=>l.end.length-a.end.length)),n,o,e,s).fold(()=>[],a=>a.matches))},VE=(t,e)=>{if(0===e.length)return;const n=t.dom,o=t.selection.getBookmark(),r=((s,i)=>{const a=cc("mce_textpattern"),l=Uo(i,(c,d)=>{const u=$E(s,a+`_end${c.length}`,d.endRng);return c.concat([{...d,endMarker:u}])},[]);return Uo(l,(c,d)=>{const u=l.length-c.length-1,f=dh(d.pattern)?d.endMarker:$E(s,a+`_start${u}`,d.startRng);return c.concat([{...d,startMarker:f}])},[])})(n,e);W(r,s=>{const i=n.getParent(s.startMarker.start,n.isBlock),a=l=>l===i;dh(s.pattern)?((l,c,d,u)=>{const f=bm(l.dom,d);hm(l.dom,f,u),HE(l,c,f)})(t,s.pattern,s.endMarker,a):((l,c,d,u,f)=>{const h=l.dom,g=bm(h,u),b=bm(h,d);hm(h,b,f),hm(h,g,f);const v=bm(h,{prefix:d.prefix,start:d.end,end:u.start});HE(l,c,v)})(t,s.pattern,s.startMarker,s.endMarker,a),UE(n,s.endMarker,a),UE(n,s.startMarker,a)}),t.selection.moveToBookmark(o)},WE=(t,e,n)=>{for(let o=0;o<t.length;o++)if(n(t[o],e))return!0;return!1},uh=Qt.DOM,_R=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,mh=t=>ms(t,e=>!1===Ne(e)),KE=t=>{const e=t.options.get,n=t.editorUpload.blobCache;return mh({allow_conditional_comments:e("allow_conditional_comments"),allow_html_data_urls:e("allow_html_data_urls"),allow_svg_data_urls:e("allow_svg_data_urls"),allow_html_in_named_anchor:e("allow_html_in_named_anchor"),allow_script_urls:e("allow_script_urls"),allow_unsafe_link_target:e("allow_unsafe_link_target"),convert_fonts_to_spans:e("convert_fonts_to_spans"),fix_list_elements:e("fix_list_elements"),font_size_legacy_values:e("font_size_legacy_values"),forced_root_block:e("forced_root_block"),forced_root_block_attrs:e("forced_root_block_attrs"),preserve_cdata:e("preserve_cdata"),inline_styles:e("inline_styles"),root_name:_R(t),sanitize:e("xss_sanitization"),validate:!0,blob_cache:n,document:t.getDoc()})},YE=t=>{const e=t.options.get;return mh({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html"),padd_empty_block_inline_children:e("format_empty_lines")})},XE=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,GE=t=>{const e=XE(t),n=Cb(t),o=t.contentCSS,r=()=>{e.unloadAll(o),t.inline||t.ui.styleSheetLoader.unloadAll(n)},s=()=>{t.removed?r():t.on("remove",r)};if(t.contentStyles.length>0){let l="";Q.each(t.contentStyles,c=>{l+=c+"\r\n"}),t.dom.addStyle(l)}const i=Promise.all(((l,c,d)=>{const u=[XE(l).loadAll(c)];return l.inline?u:u.concat([l.ui.styleSheetLoader.loadAll(d)])})(t,o,n)).then(s).catch(s),a=fk(t);return a&&((l,c)=>{const d=O(l.getBody()),u=Dn(gr(d)),f=Re("style");fe(f,"type","text/css"),ge(f,ws(c)),ge(u,f),l.on("remove",()=>{ne(f)})})(t,a),i},fh=t=>{var e;!0!==t.removed&&(Nr(e=t)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,e.dispatch("Init"),e.focus(!0),(o=>{const r=o.dom.getRoot();o.inline||uu(o)&&o.selection.getStart(!0)!==r||nn(r).each(s=>{const i=s.getNode(),a=qo(i)?nn(i).getOr(s):s;o.selection.setRng(a.toRange())})})(e),e.nodeChanged({initial:!0});const n=jk(e);Ut(n)&&n.call(e,e),(o=>{const r=Uk(o);r&&uo.setEditorTimeout(o,()=>{let s;s=!0===r?o:o.editorManager.get(r),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)})(e)})(t))},QE=t=>{const e=t.getElement();let n=t.getDoc();t.inline&&(uh.addClass(e,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);const o=t.getBody();var i,a;o.disabled=!0,t.readonly=xb(t),t._editableRoot=Dk(t),!t.readonly&&t.hasEditableRoot()&&(t.inline&&"static"===uh.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,t.editorUpload=(t=>{const e=(()=>{let b=[];const p=C=>{if(!C.blob||!C.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const k=C.id||"blobid"+WA+++(()=>{const B=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+B()+B()+B()})(),x=C.name||k,N=C.blob;var D;return{id:st(k),name:st(x),filename:st(C.filename||x+"."+(D=N.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[D.toLowerCase()]||"dat")),blob:st(N),base64:st(C.base64),blobUri:st(C.blobUri||URL.createObjectURL(N)),uri:st(C.uri)}},v=C=>ye(b,C).getOrUndefined(),_=C=>v(k=>k.id()===C);return{create:(C,k,x,N,D)=>{if(ht(C))return p({id:C,name:N,filename:D,blob:k,base64:x});if(Pe(C))return p(C);throw new Error("Unknown input type")},add:C=>{_(C.id())||b.push(C)},get:_,getByUri:C=>v(k=>k.blobUri()===C),getByData:(C,k)=>v(x=>x.base64()===C&&x.blob().type===k),findFirst:v,removeByUri:C=>{b=xt(b,k=>k.blobUri()!==C||(URL.revokeObjectURL(k.blobUri()),!1))},destroy:()=>{W(b,C=>{URL.revokeObjectURL(C.blobUri())}),b=[]}}})();let n,o;const r=rC(),s=[],i=b=>p=>t.selection?b(p):[],a=(b,p,v)=>{let _=0;do{_=b.indexOf(p,_),-1!==_&&(b=b.substring(0,_)+v+b.substr(_+p.length),_+=v.length-p.length+1)}while(-1!==_);return b},l=(b,p,v)=>(b=a(b,`src="${p}"`,`src="${v}"${v===Rt.transparentSrc?' data-mce-placeholder="1"':""}`),a(b,'data-mce-src="'+p+'"','data-mce-src="'+v+'"')),c=(b,p)=>{W(t.undoManager.data,v=>{"fragmented"===v.type?v.fragments=Mt(v.fragments,_=>l(_,b,p)):v.content=l(v.content,b,p)})},d=()=>(n||(n=iC(t,r)),h().then(i(b=>{const p=Mt(b,v=>v.blobInfo);return n.upload(p,sC(t)).then(i(v=>{const _=[];let C=!1;const k=Mt(v,(x,N)=>{const{blobInfo:D,image:B}=b[N];let P=!1;return x.status&&ok(t)?(x.url&&!be(B.src,x.url)&&(C=!0),e.removeByUri(B.src),Nr(t)||((j,A)=>{const T=t.convertURL(A,"src");var I;c(j.src,A),xo(O(j),{src:bb(t)?(I=A,I+(-1===I.indexOf("?")?"?":"&")+(new Date).getTime()):A,"data-mce-src":T})})(B,x.url)):x.error&&(x.error.remove&&(c(B.src,Rt.transparentSrc),_.push(B),P=!0),zu(t,Yo.translate(["Failed to upload image: {0}",x.error.message]))),{element:B,status:x.status,uploadUri:x.url,blobInfo:D,removed:P}});return _.length>0&&!Nr(t)?t.undoManager.transact(()=>{W(ma(_),x=>{const N=Vn(x);var D;ne(x),N.each((D=t,B=>{var P,j;(P=D).dom.isEmpty((j=B).dom)&&ot(P.schema.getTextBlockElements()[Wt(j)])&&ge(B,mr('<br data-mce-bogus="1" />'))})),e.removeByUri(x.dom.src)})}):C&&t.undoManager.dispatchChange(),k}))}))),u=()=>hb(t)?d():Promise.resolve([]),f=b=>sr(s,p=>p(b)),h=()=>(o||(o=((t,e)=>{const n={};return{findAll:(o,r=me)=>{const s=xt((a=o)?Ye(a.getElementsByTagName("img")):[],a=>{const l=a.src;return!a.hasAttribute("data-mce-bogus")&&!a.hasAttribute("data-mce-placeholder")&&!(!l||l===Rt.transparentSrc)&&(Gt(l,"blob:")?!t.isUploaded(l)&&r(a):!!Gt(l,"data:")&&r(a))}),i=Mt(s,a=>{const l=a.src;if(Ot(n,l))return n[l].then(c=>ht(c)?c:{image:a,blobInfo:c.blobInfo});{const c=((d,u)=>{const f=()=>Promise.reject("Invalid data URI");if(Gt(u,"blob:")){const b=d.getByUri(u);return ot(b)?Promise.resolve(b):(h=u,Gt(h,"blob:")?(p=h,fetch(p).then(v=>v.ok?v.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${p} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):Gt(h,"data:")?(g=h,new Promise((p,v)=>{$g(g).bind(({type:_,data:C,base64Encoded:k})=>i_(_,C,k)).fold(()=>v("Invalid data URI"),p)})):Promise.reject("Unknown URI format")).then(p=>a_(p).then(v=>l_(v,!1,_=>w.some(c_(d,p,_))).getOrThunk(f)))}var p,h,g;return Gt(u,"data:")?d_(d,u).fold(f,b=>Promise.resolve(b)):Promise.reject("Unknown image data format")})(e,l).then(d=>(delete n[l],{image:a,blobInfo:d})).catch(d=>(delete n[l],d));return n[l]=c,c}});var a;return Promise.all(i)}}})(r,e)),o.findAll(t.getBody(),f).then(i(b=>{const p=xt(b,v=>ht(v)?(zu(t,v),!1):"blob"!==v.uriType);return Nr(t)||W(p,v=>{c(v.image.src,v.blobInfo.blobUri()),v.image.src=v.blobInfo.blobUri(),v.image.removeAttribute("data-mce-src")}),p}))),g=b=>b.replace(/src="(blob:[^"]+)"/g,(p,v)=>{const _=r.getResultUri(v);if(_)return'src="'+_+'"';let C=e.getByUri(v);return C||(C=Me(t.editorManager.get(),(k,x)=>k||x.editorUpload&&x.editorUpload.blobCache.getByUri(v),void 0)),C?'src="data:'+C.blob().type+";base64,"+C.base64()+'"':p});return t.on("SetContent",()=>{hb(t)?u():h()}),t.on("RawSaveContent",b=>{b.content=g(b.content)}),t.on("GetContent",b=>{b.source_view||"raw"===b.format||"tree"===b.format||(b.content=g(b.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",b=>{W(b,p=>{const v=p.attr("src");if(!v||e.getByUri(v))return;const _=r.getResultUri(v);_&&p.attr("src",_)})})}),{blobCache:e,addFilter:b=>{s.push(b)},uploadImages:d,uploadImagesAuto:u,scanForImages:h,destroy:()=>{e.destroy(),r.destroy(),o=n=null}}})(t),t.schema=xn(YE(t)),t.dom=Qt(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:ck(t),referrerPolicy:df(t),onSetAttrib:i=>{t.dispatch("SetAttrib",i)}}),t.parser=(i=>{const a=qa(KE(i),i.schema);return a.addAttributeFilter("src,href,style,tabindex",(l,c)=>{const d=i.dom,u="data-mce-"+c;let f=l.length;for(;f--;){const h=l[f];let g=h.attr(c);if(g&&!h.attr(u)){if(0===g.indexOf("data:")||0===g.indexOf("blob:"))continue;"style"===c?(g=d.serializeStyle(d.parseStyle(g),h.name),g.length||(g=null),h.attr(u,g),h.attr(c,g)):"tabindex"===c?(h.attr(u,g),h.attr(c,null)):h.attr(u,i.convertURL(g,c,h.name))}}}),a.addNodeFilter("script",l=>{let c=l.length;for(;c--;){const d=l[c],u=d.attr("type")||"no/type";0!==u.indexOf("mce-")&&d.attr("type","mce-"+u)}}),sS(i)&&a.addNodeFilter("#cdata",l=>{var c;let d=l.length;for(;d--;){const u=l[d];u.type=8,u.name="#comment",u.value="[CDATA["+i.dom.encode(null!==(c=u.value)&&void 0!==c?c:"")+"]]"}}),a.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let c=l.length;const d=i.schema.getNonEmptyElements();for(;c--;){const u=l[c];u.isEmpty(d)&&0===u.getAll("br").length&&u.append(new Nn("br",1))}}),a})(t),t.serializer=Y_((i=>{const a=i.options.get;return{...KE(i),...YE(i),...mh({remove_trailing_brs:a("remove_trailing_brs"),pad_empty_with_br:a("pad_empty_with_br"),url_converter:a("url_converter"),url_converter_scope:a("url_converter_scope"),element_format:a("element_format"),entities:a("entities"),entity_encoding:a("entity_encoding"),indent:a("indent"),indent_after:a("indent_after"),indent_before:a("indent_before")})}})(t),t),t.selection=K_(t.dom,t.getWin(),t.serializer,t),t.annotator=Ev(t),t.formatter=cC(t),t.undoManager=uC(t),t._nodeChangeDispatcher=new $T(t),t._selectionOverrides=pR(t),(i=>{const a=Bs(),l=je(!1),c=Jm(d=>{i.dispatch("longpress",{...d,type:"longpress"}),l.set(!0)},400);i.on("touchstart",d=>{vw(d).each(u=>{c.cancel();const f={x:u.clientX,y:u.clientY,target:d.target};c.throttle(d),l.set(!1),a.set(f)})},!0),i.on("touchmove",d=>{c.cancel(),vw(d).each(u=>{a.on(f=>{((h,g)=>{const b=Math.abs(h.clientX-g.x),p=Math.abs(h.clientY-g.y);return b>5||p>5})(u,f)&&(a.clear(),l.set(!1),i.dispatch("longpresscancel"))})})},!0),i.on("touchend touchcancel",d=>{c.cancel(),"touchcancel"!==d.type&&a.get().filter(u=>u.target.isEqualNode(d.target)).each(()=>{l.get()?d.preventDefault():i.dispatch("tap",{...d,type:"tap"})})},!0)})(t),(a=i=t).on("click",l=>{a.dom.getParent(l.target,"details")&&l.preventDefault()}),(a=>{a.parser.addNodeFilter("details",l=>{const c=cS(a);W(l,d=>{"expanded"===c?d.attr("open","open"):"collapsed"===c&&d.attr("open",null)})}),a.serializer.addNodeFilter("details",l=>{const c=dS(a);W(l,d=>{"expanded"===c?d.attr("open","open"):"collapsed"===c&&d.attr("open",null)})})})(i),(i=>{const a="contenteditable",l=" "+Q.trim(oS(i))+" ",c=" "+Q.trim(Nb(i))+" ",d=Cw(l),u=Cw(c),f=rS(i);f.length>0&&i.on("BeforeSetContent",h=>{((g,b,p)=>{let v=b.length,_=p.content;if("raw"!==p.format){for(;v--;)_=_.replace(b[v],IO(g,_,Nb(g)));p.content=_}})(i,f,h)}),i.parser.addAttributeFilter("class",h=>{let g=h.length;for(;g--;){const b=h[g];d(b)?b.attr(a,"true"):u(b)&&b.attr(a,"false")}}),i.serializer.addAttributeFilter(a,h=>{let g=h.length;for(;g--;){const b=h[g];(d(b)||u(b))&&(f.length>0&&b.attr("data-mce-content")?(b.name="#text",b.type=3,b.raw=!0,b.value=b.attr("data-mce-content")):b.attr(a,null))}})})(t),Nr(t)||((i=>{i.on("mousedown",a=>{a.detail>=3&&(a.preventDefault(),(t=>{const e=((n,o)=>{const r=z.fromRangeStart(n).getNode(),s=(d=o,To(O(r),u=>Bn(u.dom)||Ln(u),vE(d)).getOr(O(d)).dom),i=_E(r,s,!1),a=_E(r,s,!0),l=document.createRange();var d;return yE(i,s).fold(()=>{bE(i)?l.setStart(i,0):l.setStartBefore(i)},c=>l.setStartBefore(c.dom)),yE(a,s).fold(()=>{bE(a)?l.setEnd(a,a.data.length):l.setEndAfter(a)},c=>l.setEndAfter(c.dom)),l})(t.selection.getRng(),t.getBody());t.selection.setRng(xg(e))})(i))})})(t),(i=>{(a=>{const l=[",",".",";",":","!","?"],c=[32],d=()=>{return h=eS(a),g=nS(a),{inlinePatterns:db(h),blockPatterns:cb(h),dynamicPatternsLookup:g};var h,g},u=()=>a.options.isSet("text_patterns_lookup");a.on("keydown",h=>{if(13===h.keyCode&&!lt.modifierPressed(h)&&a.selection.isCollapsed()){const g=d();(g.inlinePatterns.length>0||g.blockPatterns.length>0||u())&&((t,e)=>{const n=t.selection.getRng();return ch(t,n).map(o=>{var r;const s=Math.max(0,n.startOffset),i=ME(e,o,null!==(r=o.textContent)&&void 0!==r?r:""),a=qE(t,o,n.startContainer,s,i,!0),l=((c,d,u,f)=>{var h;const g=c.dom,b=en(c);if(!g.is(d,b))return[];const p=null!==(h=d.textContent)&&void 0!==h?h:"";return((v,_)=>{const C=ir(v,(N,D)=>D.start.length-N.start.length),k=_.replace(Ee," ");return ye(C,x=>0===_.indexOf(x.start)||0===k.indexOf(x.start))})(u.blockPatterns,p).map(v=>Q.trim(p).length===v.start.length?[]:[{pattern:v,range:lh(g,g.getRoot(),d,0,d,0,!0)}]).getOr([])})(t,o,i);return(l.length>0||a.length>0)&&(t.undoManager.add(),t.undoManager.extra(()=>{t.execCommand("mceInsertNewLine")},()=>{t.insertContent(xe,{preserve_zwsp:!0}),VE(t,a),((u,f)=>{if(0===f.length)return;const h=u.selection.getBookmark();W(f,g=>((b,p)=>{const _=p.pattern,C=PE(b.dom.getRoot(),p.range).getOrDie("Unable to resolve path range");return ch(b,C).each(k=>{"block-format"===_.type?((x,N)=>{const D=N.get(x);return Kt(D)&&Ae(D).exists(B=>Ot(B,"block"))})(_.format,b.formatter)&&b.undoManager.transact(()=>{FE(b.dom,k,_),b.formatter.apply(_.format)}):"block-command"===_.type&&b.undoManager.transact(()=>{FE(b.dom,k,_),b.execCommand(_.cmd,!1,_.value)})}),!0})(u,g)),u.selection.moveToBookmark(h)})(t,l);const c=t.selection.getRng(),d=Rp(c.startContainer,c.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),d.each(u=>{const f=u.container;"\ufeff"===f.data.charAt(u.offset-1)&&(f.deleteData(u.offset-1,1),tl(t.dom,f.parentNode,h=>h===t.dom.getRoot()))})}),!0)}).getOr(!1)})(a,g)&&h.preventDefault()}},!0);const f=()=>{if(a.selection.isCollapsed()){const h=d();(h.inlinePatterns.length>0||u())&&((g,b)=>{const p=g.selection.getRng();ch(g,p).map(v=>{const _=Math.max(0,p.startOffset-1),C=IE(g.dom,v,p.startContainer,_),k=ME(b,v,C),x=qE(g,v,p.startContainer,_,k,!1);x.length>0&&g.undoManager.transact(()=>{VE(g,x)})})})(a,h)}};a.on("keyup",h=>{WE(c,h,(g,b)=>g===b.keyCode&&!lt.modifierPressed(b))&&f()}),a.on("keypress",h=>{WE(l,h,(g,b)=>g.charCodeAt(0)===b.charCode)&&uo.setEditorTimeout(a,f)})})(i)})(t));const r=jT(t);((t,e)=>{t.addCommand("delete",()=>{var n;bw(n=t,e,!1).fold(()=>{dg(n),ug(n)},it)}),t.addCommand("forwardDelete",()=>{var n;bw(n=t,e,!0).fold(()=>G0(n,"ForwardDelete"),it)})})(t,r),(i=>{i.on("NodeChange",ft(MO,i))})(t),(i=>{var a;const l=i.dom,c=en(i),d=null!==(a=bk(i))&&void 0!==a?a:"",u=(f,h)=>{if((p=>{if(fC(p)){const v=p.keyCode;return!gC(p)&&(lt.metaKeyPressed(p)||p.altKey||v>=112&&v<=123||gt(ZA,v))}return!1})(f))return;const g=i.getBody(),b=!(fC(p=f)&&!(gC(p)||"keyup"===p.type&&229===p.keyCode))&&((p,v,_)=>{if(rt(O(v),!1)){const C=v.firstElementChild;return!C||!p.getStyle(v.firstElementChild,"padding-left")&&!p.getStyle(v.firstElementChild,"padding-right")&&_===C.nodeName.toLowerCase()}return!1})(l,g,c);var p;(""!==l.getAttrib(g,mC)!==b||h)&&(l.setAttrib(g,mC,b?d:null),l.setAttrib(g,"aria-placeholder",b?d:null),((p,v)=>{p.dispatch("PlaceholderToggle",{state:v})})(i,b),i.on(b?"keydown":"keyup",u),i.off(b?"keyup":"keydown",u))};Qe(d)&&i.on("init",f=>{u(f,!0),i.on("change SetContent ExecCommand",u),i.on("paste",h=>uo.setEditorTimeout(i,()=>u(h)))})})(t),(t=>{const e=je(!1),n=je(Jk(t)?"text":"html"),o=(r=>{const s=je(null);return{create:()=>((i,a)=>{const{dom:l,selection:c}=i,d=i.getBody();a.set(c.getRng());const u=l.add(i.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},eE);Rt.browser.isFirefox()&&l.setStyle(u,"left","rtl"===l.getStyle(d,"direction",!0)?65535:-65535),l.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),c.select(u,!0)})(r,s),remove:()=>((i,a)=>{const l=i.dom;if(nh(i)){let c;const d=a.get();for(;c=nh(i);)l.remove(c),l.unbind(c);d&&i.selection.setRng(d)}a.set(null)})(r,s),getEl:()=>nh(r),getHtml:()=>(i=>{const a=i.dom,l=(f,h)=>{f.appendChild(h),a.remove(h,!0)},[c,...d]=xt(i.getBody().childNodes,YT);W(d,f=>{l(c,f)});const u=a.select("div[id=mcepastebin]",c);for(let f=u.length-1;f>=0;f--){const h=a.create("div");c.insertBefore(h,u[f]),l(h,u[f])}return c?c.innerHTML:""})(r),getLastRng:s.get}})(t);var r,s,i;r=t,(Rt.browser.isChromium()||Rt.browser.isSafari())&&(i=eR,(s=r).on("PastePreProcess",a=>{a.content=i(s,a.content,a.internal)})),((r,s)=>{r.addCommand("mceTogglePlainTextPaste",()=>{((i,a)=>{"text"===a.get()?(a.set("html"),Tv(i,!1)):(a.set("text"),Tv(i,!0)),i.focus()})(r,s)}),r.addCommand("mceInsertClipboardContent",(i,a)=>{a.html&&gm(r,a.html,a.internal,!1),a.text&&sh(r,a.text,!1)})})(t,n),(r=>{const s=l=>c=>{l(r,c)},i=Vk(r);Ut(i)&&r.on("PastePreProcess",s(i));const a=Wk(r);Ut(a)&&r.on("PastePostProcess",s(a))})(t),t.on("PreInit",()=>{(r=>{r.on("cut",(s=>i=>{!i.isDefaultPrevented()&&fE(s)&&dE(i,mE(s),uE(s),()=>{if(Rt.browser.isChromium()||Rt.browser.isFirefox()){const a=s.selection.getRng();uo.setEditorTimeout(s,()=>{s.selection.setRng(a),s.execCommand("Delete")},0)}else s.execCommand("Delete")})})(r)),r.on("copy",(s=>i=>{!i.isDefaultPrevented()&&fE(s)&&dE(i,mE(s),uE(s),Tt)})(r))})(t),((r,s)=>{qk(r)&&r.on("dragend dragover draggesture dragdrop drop drag",i=>{i.preventDefault(),i.stopPropagation()}),ou(r)||r.on("drop",i=>{const a=i.dataTransfer;a&&le(a.files,c=>/^image\//.test(c.type))&&i.preventDefault()}),r.on("drop",i=>{if(i.isDefaultPrevented())return;const a=gE(r,i);if(he(a))return;const l=aE(i.dataTransfer),c=qs(l,fm());if((!lE(l)||(g=>{const b=g["text/plain"];return!!b&&0===b.indexOf("file://")})(l))&&cE(r,i,a))return;const d=l[fm()],u=d||l["text/html"]||l["text/plain"],f=((g,b,p,v)=>{const _=g.getParent(p,C=>Ht(b,C));if(!se(g.getParent(p,"summary")))return!0;if(_&&Ot(v,"text/html")){const C=(new DOMParser).parseFromString(v["text/html"],"text/html").body;return!se(C.querySelector(_.nodeName.toLowerCase()))}return!1})(r.dom,r.schema,a.startContainer,l),h=s.get();h&&!f||u&&(i.preventDefault(),uo.setEditorTimeout(r,()=>{r.undoManager.transact(()=>{(d||h&&f)&&r.execCommand("Delete"),pE(r,a);const g=rE(u);l["text/html"]?gm(r,g,c,!0):sh(r,g,!0)})}))}),r.on("dragstart",i=>{s.set(!0)}),r.on("dragover dragend",i=>{ou(r)&&!s.get()&&(i.preventDefault(),pE(r,gE(r,i))),"dragend"===i.type&&s.set(!1)}),(i=>{i.on("input",a=>{const l=c=>se(c.querySelector("summary"));if("deleteByDrag"===a.inputType){const c=xt(i.dom.select("details"),l);W(c,d=>{ce(d.firstChild)&&d.firstChild.remove();const u=i.dom.create("summary");u.appendChild(ui().dom),d.prepend(u)})}})})(r)})(t,e),((t,e,n)=>{((o,r,s)=>{let i;o.on("keydown",a=>{var l;(lt.metaKeyPressed(l=a)&&86===l.keyCode||l.shiftKey&&45===l.keyCode)&&!a.isDefaultPrevented()&&(i=a.shiftKey&&86===a.keyCode)}),o.on("paste",a=>{if(a.isDefaultPrevented()||(d=a,Rt.os.isAndroid()&&0===(null===(f=null===(u=d.clipboardData)||void 0===u?void 0:u.items)||void 0===f?void 0:f.length)))return;var d,u,f;const l="text"===s.get()||i;i=!1;const c=aE(a.clipboardData);!lE(c)&&cE(o,a,r.getLastRng()||o.selection.getRng())||(qs(c,"text/html")?(a.preventDefault(),ih(o,c,c["text/html"],l,!0)):qs(c,"text/plain")&&qs(c,"text/uri-list")?(a.preventDefault(),ih(o,c,c["text/plain"],l,!0)):(r.create(),uo.setEditorTimeout(o,()=>{const d=r.getHtml();r.remove(),ih(o,c,d,l,!1)},0)))})})(t,e,n),(o=>{const r=i=>Gt(i,"webkit-fake-url"),s=i=>Gt(i,"data:");o.parser.addNodeFilter("img",(i,a,l)=>{if(!ou(o)&&!0===(null===(d=l.data)||void 0===d?void 0:d.paste))for(const c of i){const d=c.attr("src");ht(d)&&!c.attr("data-mce-object")&&d!==Rt.transparentSrc&&(r(d)||!tS(o)&&s(d))&&c.remove()}var d})})(t)})(t,o,n)})})(t);const s=(i=>{const a=i;return(l=i,Jt(l.plugins,"rtc").bind(c=>w.from(c.setup))).fold(()=>(a.rtcInstance=U_(i),w.none()),l=>(a.rtcInstance=(()=>{const c=st(null),d=st("");return{init:{bindEvents:Tt},undoManager:{beforeChange:Tt,add:c,undo:c,redo:c,clear:Tt,reset:Tt,hasUndo:ee,hasRedo:ee,transact:c,ignore:Tt,extra:Tt},formatter:{match:ee,matchAll:st([]),matchNode:st(void 0),canApply:ee,closest:d,apply:Tt,remove:Tt,toggle:Tt,formatChanged:st({unbind:Tt})},editor:{getContent:d,setContent:st({content:"",html:""}),insertContent:st(""),addVisual:Tt},selection:{getContent:d},autocompleter:{addDecoration:Tt,removeDecoration:Tt},raw:{getModel:st(w.none())}}})(),w.some(()=>l().then(c=>(a.rtcInstance=(d=>{const u=C=>Pe(C)?C:{},{init:f,undoManager:h,formatter:g,editor:b,selection:p,autocompleter:v,raw:_}=d;return{init:{bindEvents:f.bindEvents},undoManager:{beforeChange:h.beforeChange,add:h.add,undo:h.undo,redo:h.redo,clear:h.clear,reset:h.reset,hasUndo:h.hasUndo,hasRedo:h.hasRedo,transact:(C,k,x)=>h.transact(x),ignore:(C,k)=>h.ignore(k),extra:(C,k,x,N)=>h.extra(x,N)},formatter:{match:(C,k,x,N)=>g.match(C,u(k),N),matchAll:g.matchAll,matchNode:g.matchNode,canApply:C=>g.canApply(C),closest:C=>g.closest(C),apply:(C,k,x)=>g.apply(C,u(k)),remove:(C,k,x,N)=>g.remove(C,u(k)),toggle:(C,k,x)=>g.toggle(C,u(k)),formatChanged:(C,k,x,N,D)=>g.formatChanged(k,x,N,D)},editor:{getContent:C=>b.getContent(C),setContent:(C,k)=>({content:b.setContent(C,k),html:""}),insertContent:(C,k)=>(b.insertContent(C),""),addVisual:b.addVisual},selection:{getContent:(C,k)=>p.getContent(k)},autocompleter:{addDecoration:v.addDecoration,removeDecoration:v.removeDecoration},raw:{getModel:()=>w.some(_.getRawModel())}}})(c),c.rtc.isRemote)))));var l})(t);(i=>{const a=i.getDoc(),l=i.getBody();i.dispatch("PreInit"),zk(i)||(a.body.spellcheck=!1,uh.setAttrib(l,"spellcheck","false")),i.quirks=(t=>{const e=Q.each,n=lt.BACKSPACE,o=lt.DELETE,r=t.dom,s=t.selection,i=t.parser,a=Rt.browser,l=a.isFirefox(),c=a.isChromium()||a.isSafari(),d=Rt.deviceType.isiPhone()||Rt.deviceType.isiPad(),u=Rt.os.isMacOS()||Rt.os.isiOS(),f=(A,T)=>{try{t.getDoc().execCommand(A,!1,String(T))}catch{}},h=A=>A.isDefaultPrevented(),g=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},b=()=>{t.inline||r.bind(t.getDoc(),"mousedown mouseup",A=>{let T;if(A.target===t.getDoc().documentElement)if(T=s.getRng(),t.getBody().focus(),"mousedown"===A.type){if(mn(T.startContainer))return;s.placeCaretAt(A.clientX,A.clientY)}else s.setRng(T)})},p=()=>{Range.prototype.getClientRects||t.on("mousedown",A=>{if(!h(A)&&"HTML"===A.target.nodeName){const T=t.getBody();T.blur(),uo.setEditorTimeout(t,()=>{T.focus()})}})},v=()=>{const A=Sb(t);t.on("click",T=>{const I=T.target;/^(IMG|HR)$/.test(I.nodeName)&&r.isEditable(I.parentNode)&&(T.preventDefault(),t.selection.select(I),t.nodeChanged()),"A"===I.nodeName&&r.hasClass(I,A)&&0===I.childNodes.length&&r.isEditable(I.parentNode)&&(T.preventDefault(),s.select(I))})},_=()=>{t.on("keydown",A=>{if(!h(A)&&A.keyCode===n&&s.isCollapsed()&&0===s.getRng().startOffset){const T=s.getNode().previousSibling;if(T&&T.nodeName&&"table"===T.nodeName.toLowerCase())return A.preventDefault(),!1}return!0})},C=()=>{xb(t)||t.on("BeforeExecCommand mousedown",()=>{f("StyleWithCSS",!1),f("enableInlineTableEditing",!1),wb(t)||f("enableObjectResizing",!1)})},k=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},x=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},N=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",A=>{let T;"HTML"===A.target.nodeName&&(T=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(T),t.selection.normalize(),t.nodeChanged())}))},D=()=>{u&&t.on("keydown",A=>{!lt.metaKeyPressed(A)||A.shiftKey||37!==A.keyCode&&39!==A.keyCode||(A.preventDefault(),t.selection.getSel().modify("move",37===A.keyCode?"backward":"forward","lineboundary"))})},B=()=>{t.on("click",A=>{let T=A.target;do{if("A"===T.tagName)return void A.preventDefault()}while(T=T.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},P=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",A=>{A.preventDefault()})})},j=Tt;return Nr(t)?(c&&(b(),v(),P(),g(),d&&(x(),N(),B())),l&&(p(),C(),k(),D())):(t.on("keydown",A=>{if(h(A)||A.keyCode!==lt.BACKSPACE)return;let T=s.getRng();const I=T.startContainer,q=T.startOffset,at=r.getRoot();let G=I;if(T.collapsed&&0===q){for(;G.parentNode&&G.parentNode.firstChild===G&&G.parentNode!==at;)G=G.parentNode;"BLOCKQUOTE"===G.nodeName&&(t.formatter.toggle("blockquote",void 0,G),T=r.createRng(),T.setStart(I,0),T.setEnd(I,0),s.setRng(T))}}),(()=>{const A=T=>{const I=r.create("body"),q=T.cloneContents();return I.appendChild(q),s.serializer.serialize(I,{format:"html"})};t.on("keydown",T=>{const I=T.keyCode;if(!h(T)&&(I===o||I===n)&&t.selection.isEditable()){const q=t.selection.isCollapsed(),at=t.getBody();if(q&&(!r.isEmpty(at)||(G=>{const pt=O(G);return le(De(pt,'[contenteditable="true"]'),mt=>ri(mt).exists(kt=>!Hr(kt)))})(at))||!q&&!(G=>{const pt=A(G),mt=r.createRng();return mt.selectNode(t.getBody()),pt===A(mt)})(t.selection.getRng()))return;T.preventDefault(),t.setContent(""),at.firstChild&&r.isBlock(at.firstChild)?t.selection.setCursorLocation(at.firstChild,0):t.selection.setCursorLocation(at,0),t.nodeChanged()}})})(),Rt.windowsPhone||t.on("keyup focusin mouseup",A=>{lt.modifierPressed(A)||(T=>{const I=T.getBody(),q=T.selection.getRng();return q.startContainer===q.endContainer&&q.startContainer===I&&0===q.startOffset&&q.endOffset===I.childNodes.length})(t)||s.normalize()},!0),c&&(b(),v(),t.on("init",()=>{f("DefaultParagraphSeparator",en(t))}),P(),_(),i.addNodeFilter("br",A=>{let T=A.length;for(;T--;)"Apple-interchange-newline"===A[T].attr("class")&&A[T].remove()}),d?(x(),N(),B()):g()),l&&(t.on("keydown",A=>{if(!h(A)&&A.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&0===s.getRng().startOffset){const T=s.getNode(),I=T.previousSibling;if("HR"===T.nodeName)return r.remove(T),void A.preventDefault();I&&I.nodeName&&"hr"===I.nodeName.toLowerCase()&&(r.remove(I),A.preventDefault())}}}),p(),(()=>{const A=()=>{const I=r.getAttribs(s.getStart().cloneNode(!1));return()=>{const q=s.getStart();q!==t.getBody()&&(r.setAttrib(q,"style",null),e(I,at=>{q.setAttributeNode(at.cloneNode(!0))}))}},T=()=>!s.isCollapsed()&&r.getParent(s.getStart(),r.isBlock)!==r.getParent(s.getEnd(),r.isBlock);t.on("keypress",I=>{let q;return!(!(h(I)||8!==I.keyCode&&46!==I.keyCode)&&T()&&(q=A(),t.getDoc().execCommand("delete",!1),q(),I.preventDefault(),1))}),r.bind(t.getDoc(),"cut",I=>{if(!h(I)&&T()){const q=A();uo.setEditorTimeout(t,()=>{q()})}})})(),C(),t.on("SetContent ExecCommand",A=>{"setcontent"!==A.type&&"mceInsertLink"!==A.command||e(r.select("a:not([data-mce-block])"),T=>{var I;let q=T.parentNode;const at=r.getRoot();if(q?.lastChild===T){for(;q&&!r.isBlock(q);){if((null===(I=q.parentNode)||void 0===I?void 0:I.lastChild)!==q||q===at)return;q=q.parentNode}r.add(q,"br",{"data-mce-bogus":1})}})}),k(),D(),_(),t.on("drop",A=>{var T;const I=null===(T=A.dataTransfer)||void 0===T?void 0:T.getData("text/html");ht(I)&&/^<img[^>]*>$/.test(I)&&t.dispatch("dragend",new window.DragEvent("dragend",A))}))),{refreshContentEditable:j,isHidden:()=>{if(!l||t.removed)return!1;const A=t.selection.getSel();return!A||!A.rangeCount||0===A.rangeCount}}})(i),i.dispatch("PostRender");const c=gk(i);void 0!==c&&(l.dir=c);const d=Hk(i);d&&i.on("BeforeSetContent",u=>{Q.each(d,f=>{u.content=u.content.replace(f,h=>"\x3c!--mce:protected "+escape(h)+"--\x3e")})}),i.on("SetContent",()=>{i.addVisual(i.getBody())}),i.on("compositionstart compositionend",u=>{i.composing="compositionstart"===u.type})})(t),s.fold(()=>{const i=(a=>{let l=!1;const c=setTimeout(()=>{l||a.setProgressState(!0)},500);return()=>{clearTimeout(c),l=!0,a.setProgressState(!1)}})(t);GE(t).then(()=>{fh(t),i()})},i=>{t.setProgressState(!0),GE(t).then(()=>{i().then(a=>{t.setProgressState(!1),fh(t),z_(t)},a=>{t.notificationManager.open({type:"error",text:String(a)}),fh(t),z_(t)})})})},CR=me,gh=Qt.DOM,JE=Qt.DOM,ZE=(t,e)=>({editorContainer:t,iframeContainer:e,api:{}}),tx=t=>{const e=t.getElement();return t.inline?ZE(null):(n=>{const o=JE.create("div");return JE.insertAfter(o,n),ZE(o,o)})(e)},wR=async t=>{t.dispatch("ScriptsLoaded"),(n=>{const o=Q.trim(vb(n)),r=n.ui.registry.getAll().icons,s={...Uu.get("default").icons,...Uu.get(o).icons};Xt(s,(i,a)=>{Ot(r,a)||n.ui.registry.addIcon(a,i)})})(t),(n=>{const o=Da(n);if(ht(o)){const r=Fi.get(o);n.theme=r(n,Fi.urls[o])||{},Ut(n.theme.init)&&n.theme.init(n,Fi.urls[o]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(t),(n=>{const o=uf(n),r=Va.get(o);n.model=r(n,Va.urls[o])})(t),(n=>{const o=[];W(nu(n),r=>{((s,i,a)=>{const l=Wa.get(a),c=Wa.urls[a]||s.documentBaseUrl.replace(/\/$/,"");if(a=Q.trim(a),l&&-1===Q.inArray(i,a)){if(s.plugins[a])return;try{const d=l(s,c)||{};s.plugins[a]=d,Ut(d.init)&&(d.init(s,c),i.push(a))}catch(d){((u,f,h)=>{const g=Yo.translate(["Failed to initialize plugin: {0}",f]);kv(u,"PluginLoadError",{message:g}),Hu(g,h),zu(u,g)})(s,a,d)}}})(n,o,r.replace(/^\-/,""))})})(t);const e=await(n=>{const o=n.getElement();return n.orgDisplay=o.style.display,ht(Da(n))?(r=>{const s=r.theme.renderUI;return s?s():tx(r)})(n):Ut(Da(n))?(r=>{const s=r.getElement(),i=Da(r)(r,s);return i.editorContainer.nodeType&&(i.editorContainer.id=i.editorContainer.id||r.id+"_parent"),i.iframeContainer&&i.iframeContainer.nodeType&&(i.iframeContainer.id=i.iframeContainer.id||r.id+"_iframecontainer"),i.height=i.iframeHeight?i.iframeHeight:s.offsetHeight,i})(n):tx(n)})(t);var n,o;((n,o)=>{const r={show:w.from(o.show).getOr(Tt),hide:w.from(o.hide).getOr(Tt),isEnabled:w.from(o.isEnabled).getOr(me),setEnabled:s=>{n.mode.isReadOnly()||w.from(o.setEnabled).each(i=>i(s))}};n.ui={...n.ui,...r}})(t,w.from(e.api).getOr({})),t.editorContainer=e.editorContainer,(n=t).contentCSS=n.contentCSS.concat(oC(o=n,mk(o)),(o=>oC(o,Cb(o)))(n)),t.inline?QE(t):((n,o)=>{((r,s)=>{const i=r.translate("Rich Text Area"),a=ko(O(r.getElement()),"tabindex").bind(Zs),l=((c,d,u,f)=>{const h=Re("iframe");return f.each(g=>fe(h,"tabindex",g)),xo(h,u),xo(h,{id:c+"_ifr",frameBorder:"0",allowTransparency:"true",title:d}),Ur(h,"tox-edit-area__iframe"),h})(r.id,i,Kx(r),a).dom;l.onload=()=>{l.onload=null,r.dispatch("load")},r.contentAreaContainer=s.iframeContainer,r.iframeElement=l,r.iframeHTML=(c=>{let d=Yx(c)+"<html><head>";gb(c)!==c.documentBaseUrl&&(d+='<base href="'+c.documentBaseURI.getURI()+'" />'),d+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const u=Xx(c),f=Gx(c),h=c.translate(Ik(c));return pb(c)&&(d+='<meta http-equiv="Content-Security-Policy" content="'+pb(c)+'" />'),d+=`</head><body id="${u}" class="mce-content-body ${f}" data-id="${c.id}" aria-label="${h}"><br></body></html>`,d})(r),gh.add(s.iframeContainer,l)})(n,o),o.editorContainer&&(o.editorContainer.style.display=n.orgDisplay,n.hidden=gh.isHidden(o.editorContainer)),n.getElement().style.display="none",gh.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(r=>{const s=r.iframeElement,i=()=>{r.contentDocument=s.contentDocument,QE(r)};if(aS(r)||Rt.browser.isFirefox()){const l=r.getDoc();l.open(),l.write(r.iframeHTML),l.close(),i()}else{const l=((t,e,n,o)=>((r,s,i,a,l)=>{const c=(d=i,u=a,f=>{d(f)&&u((h=>{const g=O(Fl(h).getOr(h.target)),b=()=>h.stopPropagation(),p=()=>h.preventDefault(),v=yo(p,b);return{target:g,x:h.clientX,y:h.clientY,stop:b,prevent:p,kill:v,raw:h}})(f))});var d,u;return r.dom.addEventListener(s,c,!1),{unbind:ft(Wr,r,s,c,!1)}})(t,"load",n,()=>{l.unbind(),i()}))(O(s),0,CR);s.srcdoc=r.iframeHTML}})(n)})(t,{editorContainer:e.editorContainer,iframeContainer:e.iframeContainer})},$i=Qt.DOM,ex=t=>"-"===t.charAt(0),nx=(t,e,n)=>w.from(e).filter(o=>Qe(o)&&!Uu.has(o)).map(o=>({url:`${t.editorManager.baseURL}/icons/${o}/icons${n}.js`,name:w.some(o)})),ox=Hn().deviceType,rx=ox.isPhone(),xR=ox.isTablet(),ed=t=>{if(he(t))return[];{const e=Kt(t)?t:t.split(/[ ,]/),n=Mt(e,Oe);return xt(n,Qe)}},ph=(t,e)=>Ot(t.sections(),e),SR=(t,e)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Jt(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...e?{menubar:!1}:{}}),NR=(t,e)=>{var n;const o=null!==(n=e.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?Q.extend({},t.external_plugins,o):o},TR=(t,e)=>{const n=t.selection,o=t.dom;return/^ | $/.test(e)?((r,s,i)=>{const a=O(r.getRoot());return i=Tc(a,z.fromRangeStart(s))?i.replace(/^ /,"&nbsp;"):i.replace(/^&nbsp;/," "),Rc(a,z.fromRangeEnd(s))?i.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):i.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),e):e},ym=(t,e)=>{if(t.selection.isEditable()){const{content:n,details:o}=(r=>{if("string"!=typeof r){const s=Q.extend({paste:r.paste,data:{paste:r.paste}},r);return{content:r.content,details:s}}return{content:r,details:{}}})(e);Qg(t,{...o,content:TR(t,n),format:"html",set:!1,selection:!0}).each(r=>{const s=(a=r.content,l=o,rp(t).editor.insertContent(a,l));var a,l;Jg(t,s,r),t.addVisual()})}},RR={"font-size":"size","font-family":"face"},DR=ei("font"),sx=t=>(e,n)=>w.from(n).map(O).filter(ln).bind(o=>{return(r=t,s=e,i=o.dom,Ag(O(i),a=>{return dn(l=a,r).orThunk(()=>DR(l)?Jt(RR,r).bind(c=>ko(l,c)):w.none());var l},a=>zt(O(s),a))).or(((r,s)=>w.from(Qt.DOM.getStyle(s,r,!0)))(t,o.dom));var r,s,i}).getOr(""),BR=sx("font-size"),LR=yo(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),sx("font-family")),PR=t=>nn(t.getBody()).bind(e=>{const n=e.container();return w.from(X(n)?n.parentNode:n)}),hh=(t,e)=>{return n=t,o=dl(w.some,e),(r=n,w.from(r.selection.getRng()).bind(s=>{const i=r.getBody();return s.startContainer===i&&0===s.startOffset?w.none():w.from(r.selection.getStart(!0))})).orThunk(ft(PR,n)).map(O).filter(ln).bind(o);var n,o,r},ix=(t,e)=>{if(/^[0-9.]+$/.test(e)){const n=parseInt(e,10);if(n>=1&&n<=7){const o=Q.explode(t.options.get("font_size_style_values")),r=Q.explode(t.options.get("font_size_classes"));return r.length>0?r[n-1]||e:o[n-1]||e}return e}return e},MR=t=>{const e=t.split(/\s*,\s*/);return Mt(e,n=>-1===n.indexOf(" ")||Gt(n,'"')||Gt(n,"'")?n:`'${n}'`).join(",")},ax=(t,e)=>{const n=t.dom,o=t.selection.getRng(),r=e?t.selection.getStart():t.selection.getEnd(),s=e?o.startContainer:o.endContainer,i=Gc(n,s);if(!i||!i.isContentEditable)return;const a=e?Je:Ro,l=en(t);((c,d,u,f)=>{const h=c.dom,g=p=>h.isBlock(p)&&p.parentElement===u,b=g(d)?d:h.getParent(f,g,u);return w.from(b).map(O)})(t,r,i,s).each(c=>{const d=S1(t,s,c.dom,i,!1,l);a(c,O(d)),t.selection.setCursorLocation(d,0),t.dispatch("NewBlock",{newBlock:d}),Xc(t,"insertParagraph")})},FR=["toggleview"],lx=t=>gt(FR,t.toLowerCase());class cx{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,n=!1,o,r){const s=this.editor,i=e.toLowerCase(),a=r?.skip_focus;if(s.removed||("mcefocus"!==i&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(i)||a?Wf(c=s).each(d=>c.selection.setRng(d)):s.focus()),s.dispatch("BeforeExecCommand",{command:e,ui:n,value:o}).isDefaultPrevented()))return!1;var c;const l=this.commands.exec[i];return!!Ut(l)&&(l(i,n,o),s.dispatch("ExecCommand",{command:e,ui:n,value:o}),!0)}queryCommandState(e){if(!lx(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=e.toLowerCase(),o=this.commands.state[n];return!!Ut(o)&&o(n)}queryCommandValue(e){if(!lx(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=e.toLowerCase(),o=this.commands.value[n];return Ut(o)?o(n):""}addCommands(e,n="exec"){const o=this.commands;Xt(e,(r,s)=>{W(s.toLowerCase().split(","),i=>{o[n][i]=r})})}addCommand(e,n,o){const r=e.toLowerCase();this.commands.exec[r]=(s,i,a)=>n.call(o??this.editor,i,a)}queryCommandSupported(e){const n=e.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(e,n,o){this.commands.state[e.toLowerCase()]=()=>n.call(o??this.editor)}addQueryValueHandler(e,n,o){this.commands.value[e.toLowerCase()]=()=>n.call(o??this.editor)}}const Ui="data-mce-contenteditable",bh=(t,e,n)=>{try{t.getDoc().execCommand(e,!1,String(n))}catch{}},_m=(t,e)=>{t.dom.contentEditable=e?"true":"false"},zi=t=>t.readonly,dx=t=>{t.parser.addAttributeFilter("contenteditable",e=>{zi(t)&&W(e,n=>{n.attr(Ui,n.attr("contenteditable")),n.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(Ui,e=>{zi(t)&&W(e,n=>{n.attr("contenteditable",n.attr(Ui))})}),t.serializer.addTempAttr(Ui)},$R=["copy"],UR=Q.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class vh{static isNative(e){return!!UR[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||ee}fire(e,n){return this.dispatch(e,n)}dispatch(e,n){const o=e.toLowerCase(),r=hi(o,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);const s=this.bindings[o];if(s)for(let i=0,a=s.length;i<a;i++){const l=s[i];if(!l.removed){if(l.once&&this.off(o,l.func),r.isImmediatePropagationStopped())return r;if(!1===l.func.call(this.scope,r))return r.preventDefault(),r}}return r}on(e,n,o,r){if(!1===n&&(n=ee),n){const s={func:n,removed:!1};r&&Q.extend(s,r);const i=e.toLowerCase().split(" ");let a=i.length;for(;a--;){const l=i[a];let c=this.bindings[l];c||(c=[],this.toggleEvent(l,!0)),c=o?[s,...c]:[...c,s],this.bindings[l]=c}}return this}off(e,n){if(e){const o=e.toLowerCase().split(" ");let r=o.length;for(;r--;){const s=o[r];let i=this.bindings[s];if(!s)return Xt(this.bindings,(a,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(i){if(n){const a=$o(i,l=>l.func===n);i=a.fail,this.bindings[s]=i,W(a.pass,l=>{l.removed=!0})}else i.length=0;i.length||(this.toggleEvent(e,!1),delete this.bindings[s])}}}else Xt(this.bindings,(o,r)=>{this.toggleEvent(r,!1)}),this.bindings={};return this}once(e,n,o){return this.on(e,n,o,{once:!0})}has(e){e=e.toLowerCase();const n=this.bindings[e];return!(!n||0===n.length)}}const nd=t=>(t._eventDispatcher||(t._eventDispatcher=new vh({scope:t,toggleEvent:(e,n)=>{vh.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher),yh={fire(t,e,n){return this.dispatch(t,e,n)},dispatch(t,e,n){const o=this;if(o.removed&&"remove"!==t&&"detach"!==t)return hi(t.toLowerCase(),e??{},o);const r=nd(o).dispatch(t,e);if(!1!==n&&o.parent){let s=o.parent();for(;s&&!r.isPropagationStopped();)s.dispatch(t,r,!1),s=s.parent?s.parent():void 0}return r},on(t,e,n){return nd(this).on(t,e,n)},off(t,e){return nd(this).off(t,e)},once(t,e){return nd(this).once(t,e)},hasEventListeners(t){return nd(this).has(t)}},Cm=Qt.DOM;let Hi;const wm=(t,e)=>{if("selectionchange"===e)return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(e))return t.getDoc().documentElement;const n=Eb(t);return n?(t.eventRoot||(t.eventRoot=Cm.select(n)[0]),t.eventRoot):t.getBody()},ux=(t,e,n)=>{var o;(o=t).hidden||zi(o)?zi(t)&&((o,r)=>{if("click"!==r.type||lt.metaKeyPressed(r))gt($R,r.type)&&o.dispatch(r.type,r);else{const s=O(r.target);(i=o,a=s,pr(a,"a",l=>zt(l,O(i.getBody()))).bind(l=>ko(l,"href"))).each(i=>{if(r.preventDefault(),/^#/.test(i)){const a=o.dom.select(`${i},[name="${pd(i,"#")}"]`);a.length&&o.selection.scrollIntoView(a[0],!0)}else window.open(i,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var i,a})(t,n):t.dispatch(e,n)},mx=(t,e)=>{if(t.delegates||(t.delegates={}),t.delegates[e]||t.removed)return;const n=wm(t,e);if(Eb(t)){if(Hi||(Hi={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||Hi&&(Xt(Hi,(r,s)=>{t.dom.unbind(wm(t,s))}),Hi=null)})),Hi[e])return;const o=r=>{const s=r.target,i=t.editorManager.get();let a=i.length;for(;a--;){const l=i[a].getBody();(l===s||Cm.isChildOf(s,l))&&ux(i[a],e,r)}};Hi[e]=o,Cm.bind(n,e,o)}else{const o=r=>{ux(t,e,r)};Cm.bind(n,e,o),t.delegates[e]=o}},fx={...yh,bindPendingEventDelegates(){const t=this;Q.each(t._pendingNativeEvents,e=>{mx(t,e)})},toggleNativeEvent(t,e){const n=this;"focus"!==t&&"blur"!==t&&(n.removed||(e?n.initialized?mx(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&n.delegates&&(n.dom.unbind(wm(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents(){const t=this,e=t.getBody(),n=t.dom;t.delegates&&(Xt(t.delegates,(o,r)=>{t.dom.unbind(wm(t,r),r,o)}),delete t.delegates),!t.inline&&e&&n&&(e.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(e),n.unbind(t.getContainer()))}},zR=t=>ht(t)?{value:t.split(/[ ,]/),valid:!0}:Lr(t,ht)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},gx=(t,e)=>t+(Co(e.message)?"":`. ${e.message}`),px=t=>t.valid,_h=(t,e,n="")=>{const o=e(t);return rr(o)?o?{value:t,valid:!0}:{valid:!1,message:n}:o},HR=["design","readonly"],hx=(t,e,n,o)=>{const r=n[e.get()],s=n[o];try{s.activate()}catch(i){return void console.error(`problem while activating editor mode ${o}:`,i)}var i;r.deactivate(),r.editorReadOnly!==s.editorReadOnly&&((t,e)=>{const n=O(t.getBody());var o,r,s;s=e,ca(o=n,r="mce-content-readonly")&&!s?ni(o,r):s&&Ur(o,r),e?(t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),(o=>{w.from(o.selection.getNode()).each(r=>{r.removeAttribute("data-mce-selected")})})(t),t.readonly=!0,_m(n,!1),W(De(n,'*[contenteditable="true"]'),o=>{fe(o,Ui,"true"),_m(o,!1)})):(t.readonly=!1,t.hasEditableRoot()&&_m(n,!0),W(De(n,`*[${Ui}="true"]`),o=>{Te(o,Ui),_m(o,!0)}),bh(t,"StyleWithCSS",!1),bh(t,"enableInlineTableEditing",!1),bh(t,"enableObjectResizing",!1),(o=>Ri(o)||(r=>{const s=gr(O(r.getElement()));return qf(s).filter(i=>!Yf(i.dom)&&Cu(r,i.dom)).isSome()})(o))(t)&&t.focus(),(o=>{o.selection.setRng(o.selection.getRng())})(t),t.nodeChanged())})(t,s.editorReadOnly),e.set(o),(i=t).dispatch("SwitchMode",{mode:o})},Ch=Q.each,wh=Q.explode,qR={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},bx=Q.makeMap("alt,ctrl,shift,meta,access"),VR=t=>{const e={},n=Rt.os.isMacOS()||Rt.os.isiOS();Ch(wh(t.toLowerCase(),"+"),s=>{s in bx?e[s]=!0:/^[0-9]{2,}$/.test(s)?e.keyCode=parseInt(s,10):(e.charCode=s.charCodeAt(0),e.keyCode=qR[s]||s.toUpperCase().charCodeAt(0))});const o=[e.keyCode];let r;for(r in bx)e[r]?o.push(r):e[r]=!1;return e.id=o.join(","),e.access&&(e.alt=!0,n?e.ctrl=!0:e.shift=!0),e.meta&&(n?e.meta=!0:(e.ctrl=!0,e.meta=!1)),e};class vx{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const n=this;e.on("keyup keypress keydown",o=>{!n.hasModifier(o)&&!n.isFunctionKey(o)||o.isDefaultPrevented()||(Ch(n.shortcuts,r=>{n.matchShortcut(o,r)&&(n.pendingPatterns=r.subpatterns.slice(0),"keydown"===o.type&&n.executeShortcutAction(r))}),n.matchShortcut(o,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===o.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(e,n,o,r){const s=this,i=s.normalizeCommandFunc(o);return Ch(wh(Q.trim(e)),a=>{const l=s.createShortcut(a,n,i,r);s.shortcuts[l.id]=l}),!0}remove(e){const n=this.createShortcut(e);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(e){const n=this,o=e;return"string"==typeof o?()=>{n.editor.execCommand(o,!1,null)}:Q.isArray(o)?()=>{n.editor.execCommand(o[0],o[1],o[2])}:o}createShortcut(e,n,o,r){const s=Q.map(wh(e,">"),VR);return s[s.length-1]=Q.extend(s[s.length-1],{func:o,scope:r||this.editor}),Q.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,n){return!!n&&n.ctrl===e.ctrlKey&&n.meta===e.metaKey&&n.alt===e.altKey&&n.shift===e.shiftKey&&!!(e.keyCode===n.keyCode||e.charCode&&e.charCode===n.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const WR=()=>{const t=(()=>{const e={},n={},o={},r={},s={},i={},a={},l={},c=(d,u)=>(f,h)=>{d[f.toLowerCase()]={...h,type:u}};return{addButton:c(e,"button"),addGroupToolbarButton:c(e,"grouptoolbarbutton"),addToggleButton:c(e,"togglebutton"),addMenuButton:c(e,"menubutton"),addSplitButton:c(e,"splitbutton"),addMenuItem:c(n,"menuitem"),addNestedMenuItem:c(n,"nestedmenuitem"),addToggleMenuItem:c(n,"togglemenuitem"),addAutocompleter:c(o,"autocompleter"),addContextMenu:c(s,"contextmenu"),addContextToolbar:c(i,"contexttoolbar"),addContextForm:c(i,"contextform"),addSidebar:c(a,"sidebar"),addView:c(l,"views"),addIcon:(d,u)=>r[d.toLowerCase()]=u,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:s,contextToolbars:i,sidebars:a,views:l})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,getAll:t.getAll}},qi=Qt.DOM,yx=Q.extend,KR=Q.each;class Em{constructor(e,n,o){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=o,this.documentBaseUrl=o.documentBaseURL,yx(this,fx);const r=this;this.id=e,this.hidden=!1;const s=((t,e,n,o,r)=>{var s;const i=t?{mobile:SR(null!==(s=r.mobile)&&void 0!==s?s:{},e)}:{},a=((t,e)=>{const n=((s,i)=>{const a={},l={};return dd(s,(c,d)=>gt(t,d),ml(a),ml(l)),{t:a,f:l}})(e);return r=n.f,{sections:st(n.t),options:st(r)};var r})(["mobile"],Ip(i,r)),l=Q.extend(n,o,a.options(),t&&ph(a,"mobile")?((c,d,u={})=>{const f=c.sections(),h=Jt(f,d).getOr({});return Q.extend({},u,h)})(a,"mobile"):{},{external_plugins:NR(o,a.options())});return((c,d,u,f)=>{const h=ed(u.forced_plugins),g=ed(f.plugins),b=ph(_=d,"mobile")?_.sections().mobile:{},p=((_,C,k,x)=>_&&ph(C,"mobile")?x:k)(c,d,g,b.plugins?ed(b.plugins):g),v=((_,C)=>[...ed(_),...ed(C)])(h,p);var _;return Q.extend(f,{forced_plugins:h,plugins:v})})(t,a,o,l)})(rx||xR,rx,g=n,o.defaultOptions,g);var g;this.options=((h,g)=>{const b={},p={},v=(C,k,x)=>{const N=_h(k,x);return px(N)?(p[C]=N.value,!0):(console.warn(gx(`Invalid value passed for the ${C} option`,N)),!1)},_=C=>Ot(b,C);return{register:(C,k)=>{const x=ht(k.processor)?(D=>{const B=(()=>{switch(D){case"array":return Kt;case"boolean":return rr;case"function":return Ut;case"number":return Tn;case"object":return Pe;case"string":return ht;case"string[]":return zR;case"object[]":return P=>Lr(P,Pe);case"regexp":return P=>or(P,RegExp);default:return me}})();return P=>_h(P,B,`The value must be a ${D}.`)})(k.processor):k.processor,N=((D,B,P)=>{if(!Ne(B)){const j=_h(B,P);if(px(j))return j.value;console.error(gx(`Invalid default value passed for the "${D}" option`,j))}})(C,k.default,x);b[C]={...k,default:N,processor:x},Jt(p,C).orThunk(()=>Jt(g,C)).each(D=>v(C,D,x))},isRegistered:_,get:C=>Jt(p,C).orThunk(()=>Jt(b,C).map(k=>k.default)).getOrUndefined(),set:(C,k)=>{if(_(C)){const x=b[C];return x.immutable?(console.error(`"${C}" is an immutable option and cannot be updated`),!1):v(C,k,x.processor)}return console.warn(`"${C}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:C=>{const k=_(C);return k&&delete p[C],k},isSet:C=>Ot(p,C)}})(0,s),(h=>{const g=h.options.register;g("id",{processor:"string",default:h.id}),g("selector",{processor:"string"}),g("target",{processor:"object"}),g("suffix",{processor:"string"}),g("cache_suffix",{processor:"string"}),g("base_url",{processor:"string"}),g("referrer_policy",{processor:"string",default:""}),g("language_load",{processor:"boolean",default:!0}),g("inline",{processor:"boolean",default:!1}),g("iframe_attrs",{processor:"object",default:{}}),g("doctype",{processor:"string",default:"<!DOCTYPE html>"}),g("document_base_url",{processor:"string",default:h.documentBaseUrl}),g("body_id",{processor:fb(h,"tinymce"),default:"tinymce"}),g("body_class",{processor:fb(h),default:""}),g("content_security_policy",{processor:"string",default:""}),g("br_in_pre",{processor:"boolean",default:!0}),g("forced_root_block",{processor:b=>{const p=ht(b)&&Qe(b);return p?{value:b,valid:p}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),g("forced_root_block_attrs",{processor:"object",default:{}}),g("newline_behavior",{processor:b=>{const p=gt(["block","linebreak","invert","default"],b);return p?{value:b,valid:p}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),g("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),g("no_newline_selector",{processor:"string",default:""}),g("keep_styles",{processor:"boolean",default:!0}),g("end_container_on_empty_block",{processor:b=>rr(b)||ht(b)?{valid:!0,value:b}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),g("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),g("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),g("font_size_classes",{processor:"string",default:""}),g("automatic_uploads",{processor:"boolean",default:!0}),g("images_reuse_filename",{processor:"boolean",default:!1}),g("images_replace_blob_uris",{processor:"boolean",default:!0}),g("icons",{processor:"string",default:""}),g("icons_url",{processor:"string",default:""}),g("images_upload_url",{processor:"string",default:""}),g("images_upload_base_path",{processor:"string",default:""}),g("images_upload_credentials",{processor:"boolean",default:!1}),g("images_upload_handler",{processor:"function"}),g("language",{processor:"string",default:"en"}),g("language_url",{processor:"string",default:""}),g("entity_encoding",{processor:"string",default:"named"}),g("indent",{processor:"boolean",default:!0}),g("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_use_margin",{processor:"boolean",default:!1}),g("indentation",{processor:"string",default:"40px"}),g("content_css",{processor:b=>{const p=!1===b||ht(b)||Lr(b,ht);return p?ht(b)?{value:Mt(b.split(","),Oe),valid:p}:Kt(b)?{value:b,valid:p}:!1===b?{value:[],valid:p}:{value:b,valid:p}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:mf(h)?[]:["default"]}),g("content_style",{processor:"string"}),g("content_css_cors",{processor:"boolean",default:!1}),g("font_css",{processor:b=>{const p=ht(b)||Lr(b,ht);return p?{value:Kt(b)?b:Mt(b.split(","),Oe),valid:p}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),g("inline_boundaries",{processor:"boolean",default:!0}),g("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),g("object_resizing",{processor:b=>{const p=rr(b)||ht(b);return p?!1===b||lf.isiPhone()||lf.isiPad()?{value:"",valid:p}:{value:!0===b?"table,img,figure.image,div,video,iframe":b,valid:p}:{valid:!1,message:"Must be boolean or a string"}},default:!Vx}),g("resize_img_proportional",{processor:"boolean",default:!0}),g("event_root",{processor:"object"}),g("service_message",{processor:"string"}),g("theme",{processor:b=>!1===b||ht(b)||Ut(b),default:"silver"}),g("theme_url",{processor:"string"}),g("formats",{processor:"object"}),g("format_empty_lines",{processor:"boolean",default:!1}),g("format_noneditable_selector",{processor:"string",default:""}),g("preview_styles",{processor:b=>{const p=!1===b||ht(b);return p?{value:!1===b?"":b,valid:p}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),g("custom_ui_selector",{processor:"string",default:""}),g("hidden_input",{processor:"boolean",default:!0}),g("submit_patch",{processor:"boolean",default:!0}),g("encoding",{processor:"string"}),g("add_form_submit_trigger",{processor:"boolean",default:!0}),g("add_unload_trigger",{processor:"boolean",default:!0}),g("custom_undo_redo_levels",{processor:"number",default:0}),g("disable_nodechange",{processor:"boolean",default:!1}),g("readonly",{processor:"boolean",default:!1}),g("editable_root",{processor:"boolean",default:!0}),g("plugins",{processor:"string[]",default:[]}),g("external_plugins",{processor:"object"}),g("forced_plugins",{processor:"string[]"}),g("model",{processor:"string",default:h.hasPlugin("rtc")?"plugin":"dom"}),g("model_url",{processor:"string"}),g("block_unsupported_drop",{processor:"boolean",default:!0}),g("visual",{processor:"boolean",default:!0}),g("visual_table_class",{processor:"string",default:"mce-item-table"}),g("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),g("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),g("setup",{processor:"function"}),g("init_instance_callback",{processor:"function"}),g("url_converter",{processor:"function",default:h.convertURL}),g("url_converter_scope",{processor:"object",default:h}),g("urlconverter_callback",{processor:"function"}),g("allow_conditional_comments",{processor:"boolean",default:!1}),g("allow_html_data_urls",{processor:"boolean",default:!1}),g("allow_svg_data_urls",{processor:"boolean"}),g("allow_html_in_named_anchor",{processor:"boolean",default:!1}),g("allow_script_urls",{processor:"boolean",default:!1}),g("allow_unsafe_link_target",{processor:"boolean",default:!1}),g("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),g("fix_list_elements",{processor:"boolean",default:!1}),g("preserve_cdata",{processor:"boolean",default:!1}),g("remove_trailing_brs",{processor:"boolean",default:!0}),g("pad_empty_with_br",{processor:"boolean",default:!1}),g("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),g("element_format",{processor:"string",default:"html"}),g("entities",{processor:"string"}),g("schema",{processor:"string",default:"html5"}),g("convert_urls",{processor:"boolean",default:!0}),g("relative_urls",{processor:"boolean",default:!0}),g("remove_script_host",{processor:"boolean",default:!0}),g("custom_elements",{processor:"string"}),g("extended_valid_elements",{processor:"string"}),g("invalid_elements",{processor:"string"}),g("invalid_styles",{processor:cf}),g("valid_children",{processor:"string"}),g("valid_classes",{processor:cf}),g("valid_elements",{processor:"string"}),g("valid_styles",{processor:cf}),g("verify_html",{processor:"boolean",default:!0}),g("auto_focus",{processor:b=>ht(b)||!0===b}),g("browser_spellcheck",{processor:"boolean",default:!1}),g("protect",{processor:"array"}),g("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),g("deprecation_warnings",{processor:"boolean",default:!0}),g("a11y_advanced_options",{processor:"boolean",default:!1}),g("api_key",{processor:"string"}),g("paste_block_drop",{processor:"boolean",default:!1}),g("paste_data_images",{processor:"boolean",default:!0}),g("paste_preprocess",{processor:"function"}),g("paste_postprocess",{processor:"function"}),g("paste_webkit_styles",{processor:"string",default:"none"}),g("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),g("paste_merge_formats",{processor:"boolean",default:!0}),g("smart_paste",{processor:"boolean",default:!0}),g("paste_as_text",{processor:"boolean",default:!1}),g("paste_tab_spaces",{processor:"number",default:4}),g("text_patterns",{processor:b=>Lr(b,Pe)||!1===b?{value:ub(!1===b?[]:b),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),g("text_patterns_lookup",{processor:b=>{return Ut(b)?{value:(p=b,v=>{const _=p(v);return ub(_)}),valid:!0}:{valid:!1,message:"Must be a single function"};var p},default:b=>[]}),g("noneditable_class",{processor:"string",default:"mceNonEditable"}),g("editable_class",{processor:"string",default:"mceEditable"}),g("noneditable_regexp",{processor:b=>Lr(b,mb)?{value:b,valid:!0}:mb(b)?{value:[b],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),g("table_tab_navigation",{processor:"boolean",default:!0}),g("highlight_on_focus",{processor:"boolean",default:!1}),g("xss_sanitization",{processor:"boolean",default:!0}),g("details_initial_state",{processor:b=>{const p=gt(["inherited","collapsed","expanded"],b);return p?{value:b,valid:p}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("details_serialized_state",{processor:b=>{const p=gt(["inherited","collapsed","expanded"],b);return p?{value:b,valid:p}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("init_content_sync",{processor:"boolean",default:!1}),g("newdocument_content",{processor:"string",default:""}),h.on("ScriptsLoaded",()=>{g("directionality",{processor:"string",default:Yo.isRtl()?"rtl":void 0}),g("placeholder",{processor:"string",default:Wx.getAttrib(h.getElement(),"placeholder")})})})(r);const i=this.options.get;i("deprecation_warnings")&&((h,g)=>{((b,p)=>{const v=(t=>{const e=G_(t,BA),n=t.forced_root_block;return!1!==n&&""!==n||e.push("forced_root_block (false only)"),ir(e)})(b),_=(t=>Q_(t,PA))(p),C=_.length>0,k=v.length>0,x="mobile"===p.theme;if(C||k||x){const N="\n- ",D=x?`\n\nThemes:${N}mobile`:"",B=C?`\n\nPlugins:${N}${_.join(N)}`:"",P=k?`\n\nOptions:${N}${v.join(N)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+D+B+P)}})(h,g),((b,p)=>{const v=(t=>G_(t,LA))(b),_=(t=>Q_(t,X_.map(e=>e.name)))(p),C=_.length>0,k=v.length>0;if(C||k){const x="\n- ",N=C?`\n\nPlugins:${x}${_.map($A).join(x)}`:"",D=k?`\n\nOptions:${x}${v.join(x)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+N+D)}})(h,g)})(n,s);const a=i("suffix");a&&(o.suffix=a),this.suffix=o.suffix;const l=i("base_url");l&&o._setBaseUrl(l),this.baseUri=o.baseURI;const c=df(r);c&&(ts.ScriptLoader._setReferrerPolicy(c),Qt.DOM.styleSheetLoader._setReferrerPolicy(c));const d=kb(r);ot(d)&&Qt.DOM.styleSheetLoader._setContentCssCors(d),pn.languageLoad=i("language_load"),pn.baseURL=o.baseURL,this.setDirty(!1),this.documentBaseURI=new Jo(gb(r),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=mf(r),this.hasVisual=Pk(r),this.shortcuts=new vx(this),this.editorCommands=new cx(this),(t=>{var e;(t=>{(e=>{const n=o=>()=>{W("left,center,right,justify".split(","),r=>{o!==r&&e.formatter.remove("align"+r)}),"none"!==o&&(e.formatter.toggle("align"+o,void 0),e.nodeChanged())};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(t),(e=>{const n=o=>()=>{const r=e.selection,s=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return le(s,i=>ot(e.formatter.matchNode(i,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(t)})(t),(e=t).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if("paste"!==n||o.queryCommandEnabled(n)||(r=!0),r||!o.queryCommandSupported(n)){let s=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Rt.os.isMacOS()||Rt.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:s,type:"error"})}}}),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(t),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let s=0;e.dom.getParent(e.selection.getNode(),i=>!ct(i)||s++!==r||(e.selection.select(i),!1),e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Bn);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})})(t),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{ym(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{ym(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{ym(e,r)},mceInsertContent:(n,o,r)=>{ym(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(Kk(e))}})})(t),(e=>{const n=(o,r,s)=>{const i=ht(s)?{href:s}:s,a=e.dom.getParent(e.selection.getNode(),"a");Pe(i)&&ht(i.href)&&(i.href=i.href.replace(/ /g,"%20"),a&&i.href||e.formatter.remove("link"),i.href&&e.formatter.apply("link",i,a))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");return void(o&&e.dom.remove(o,!0))}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(t),(e=>{e.editorCommands.addCommands({Indent:()=>{gw(e,"indent")},Outdent:()=>{pw(e)}}),e.editorCommands.addCommands({Outdent:()=>uw(e)},"state")})(t),(e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{ax(e,!0)},InsertNewBlockAfter:()=>{ax(e,!1)}})})(t),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{dm(O1,e)},mceInsertNewLine:(n,o,r)=>{M1(e,r)},InsertLineBreak:(n,o,r)=>{dm(D1,e)}})})(t),(e=>{var n;(n=e).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":o=>{n.getDoc().execCommand(o);const r=n.dom.getParent(n.selection.getNode(),"ol,ul");if(r){const s=r.parentNode;if(s&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const i=n.selection.getBookmark();n.dom.split(s,r),n.selection.moveToBookmark(i)}}}}),(n=>{n.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":o=>{const r=n.dom.getParent(n.selection.getNode(),"ul,ol");return r&&("insertunorderedlist"===o&&"UL"===r.tagName||"insertorderedlist"===o&&"OL"===r.tagName)}},"state")})(e)})(t),(e=>{(n=>{const o=(r,s)=>{n.formatter.toggle(r,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>{o(r)},"ForeColor,HiliteColor":(r,s,i)=>{o(r,{value:i})},BackColor:(r,s,i)=>{o("hilitecolor",{value:i})},FontName:(r,s,i)=>{((a,l)=>{const c=ix(a,l);a.formatter.toggle("fontname",{value:MR(c)}),a.nodeChanged()})(n,i)},FontSize:(r,s,i)=>{var a;(a=n).formatter.toggle("fontsize",{value:ix(a,i)}),a.nodeChanged()},LineHeight:(r,s,i)=>{var a;(a=n).formatter.toggle("lineheight",{value:String(i)}),a.nodeChanged()},Lang:(r,s,i)=>{var a;o(r,{value:i.code,customValue:null!==(a=i.customCode)&&void 0!==a?a:null})},RemoveFormat:r=>{n.formatter.remove(r)},mceBlockQuote:()=>{o("blockquote")},FormatBlock:(r,s,i)=>{o(ht(i)?i:"p")},mceToggleFormat:(r,s,i)=>{o(i)}})})(e),(n=>{const o=r=>n.formatter.match(r);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>o(r),mceBlockQuote:()=>o("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return hh(r=n,s=>LR(r.getBody(),s.dom)).getOr("");var r}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return hh(r=n,s=>BR(r.getBody(),s.dom)).getOr("");var r}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return hh(r=n,s=>{const i=O(r.getBody());return Ag(s,l=>dn(l,"line-height"),ft(zt,i)).getOrThunk(()=>{const l=parseFloat(oo(s,"line-height")),c=parseFloat(oo(s,"font-size"));return String(l/c)})}).getOr("");var r})})(e)})(t),(e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const s=r??e.selection.getNode();if(s!==e.getBody()){const i=e.selection.getBookmark();e.dom.remove(s,!0),e.selection.moveToBookmark(i)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{var s;(s=e).removed||(!0===r?Qf(s):(a=>{const l=a.selection,c=a.getBody();let d=l.getRng();a.quirks.refreshContentEditable(),ot(a.bookmark)&&!Ri(a)&&Wf(a).each(f=>{a.selection.setRng(f),d=f});const u=(f=a,h=l.getNode(),f.dom.getParent(h,g=>"true"===f.dom.getContentEditable(g)));var f,h;if(u&&a.dom.isChildOf(u,c))return Gf(u),n0(a,d),void Qf(a);a.inline||(Rt.browser.isOpera()||Gf(c),a.getWin().focus()),(Rt.browser.isFirefox()||a.inline)&&(Gf(c),n0(a,d)),Qf(a)})(s))},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(t)})(this);const u=i("cache_suffix");u&&(Rt.cacheSuffix=u.replace(/^[\?\&]+/,"")),this.ui={registry:WR(),styleSheetLoader:void 0,show:Tt,hide:Tt,setEnabled:Tt,isEnabled:me},this.mode=(h=>{const g=je("design"),b=je({design:{activate:Tt,deactivate:Tt,editorReadOnly:!1},readonly:{activate:Tt,deactivate:Tt,editorReadOnly:!0}});return(p=h).serializer?dx(p):p.on("PreInit",()=>{dx(p)}),(p=>{p.on("ShowCaret",v=>{zi(p)&&v.preventDefault()}),p.on("ObjectSelected",v=>{zi(p)&&v.preventDefault()})})(h),{isReadOnly:()=>zi(h),set:p=>((v,_,C,k)=>{if(k!==C.get()){if(!Ot(_,k))throw new Error(`Editor mode '${k}' is invalid`);v.initialized?hx(v,C,_,k):v.on("init",()=>hx(v,C,_,k))}})(h,b.get(),g,p),get:()=>g.get(),register:(p,v)=>{b.set(((_,C,k)=>{if(gt(HR,C))throw new Error(`Cannot override default mode ${C}`);return{..._,[C]:{...k,deactivate:()=>{try{k.deactivate()}catch(x){console.error(`problem while deactivating editor mode ${C}:`,x)}}}}})(b.get(),p,v))}};var p})(r),o.dispatch("SetupEditor",{editor:this});const f=Fk(r);Ut(f)&&f.call(r,r)}render(){(e=>{const n=e.id;Yo.setCode(yb(e));const o=()=>{$i.unbind(window,"ready",o),e.render()};if(!Zr.Event.domLoaded)return void $i.bind(window,"ready",o);if(!e.getElement())return;const r=O(e.getElement()),s=Ol(r);var l;e.on("remove",()=>{ad(r.dom.attributes,a=>Te(r,a.name)),xo(r,s)}),e.ui.styleSheetLoader=wn.forElement(r,{contentCssCors:kb(l=e),referrerPolicy:df(l)}),mf(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const i=e.getElement().form||$i.getParent(n,"form");i&&(e.formElement=i,Sk(e)&&!ql(e.getElement())&&($i.insertAfter($i.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=a=>{e.dispatch(a.type,a)},$i.bind(i,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!Nk(e)||i.submit.nodeType||i.submit.length||i._mceOldSubmit||(i._mceOldSubmit=i.submit,i.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),i._mceOldSubmit(i)))),e.windowManager=eC(e),e.notificationManager=tC(e),"xml"===e.options.get("encoding")&&e.on("GetContent",a=>{a.save&&(a.content=$i.encode(a.content))}),Ak(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Ok(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),((t,e)=>{const n=ts.ScriptLoader,o=()=>{!t.removed&&(r=>{const s=Da(r);return!ht(s)||ot(Fi.get(s))})(t)&&(r=>{const s=uf(r);return ot(Va.get(s))})(t)&&wR(t)};((r,s)=>{const i=Da(r);if(ht(i)&&!ex(i)&&!Ot(Fi.urls,i)){const a=yk(r),l=a?r.documentBaseURI.toAbsolute(a):`themes/${i}/theme${s}.js`;Fi.load(i,l).catch(()=>{Ic(r,"ThemeLoadError",Fc("theme",l,i))})}})(t,e),((r,s)=>{const i=uf(r);if("plugin"!==i&&!Ot(Va.urls,i)){const a=_k(r),l=ht(a)?r.documentBaseURI.toAbsolute(a):`models/${i}/model${s}.js`;Va.load(i,l).catch(()=>{Ic(r,"ModelLoadError",Fc("model",l,i))})}})(t,e),((r,s)=>{const i=yb(s),a=dk(s);if(!Yo.hasCode(i)&&"en"!==i){const l=Qe(a)?a:`${s.editorManager.baseURL}/langs/${i}.js`;r.add(l).catch(()=>{Ic(s,"LanguageLoadError",Fc("language",l,i))})}})(n,t),((r,s,i)=>{const a=nx(s,"default",i),l=(c=s,w.from(rk(c)).filter(Qe).map(d=>({url:d,name:w.none()}))).orThunk(()=>nx(s,vb(s),""));var c;W((c=>{const d=[],u=f=>{d.push(f)};for(let f=0;f<c.length;f++)c[f].each(u);return d})([a,l]),c=>{r.add(c.url).catch(()=>{var d,u,f;d=s,u=c.url,f=c.name.getOrUndefined(),Ic(d,"IconsLoadError",Fc("icons",u,f))})})})(n,t,e),((r,s)=>{const i=(a,l)=>{Wa.load(a,l).catch(()=>{Ic(r,"PluginLoadError",Fc("plugin",l,a))})};Xt(Bk(r),(a,l)=>{i(l,a),r.options.set("plugins",nu(r).concat(l))}),W(nu(r),a=>{!(a=Q.trim(a))||Wa.urls[a]||ex(a)||i(a,`plugins/${a}/plugin${s}.js`)})})(t,e),n.loadQueue().then(o,o)})(e,e.suffix)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return Ri(this)}translate(e){return Yo.translate(e)}getParam(e,n,o){const r=this.options;return r.isRegistered(e)||(ot(o)?r.register(e,{processor:o,default:n}):r.register(e,{processor:me,default:n})),r.isSet(e)||Ne(n)?r.get(e):n}hasPlugin(e,n){return!(!gt(nu(this),e)||n&&void 0===Wa.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,n,o){this.editorCommands.addCommand(e,n,o)}addQueryStateHandler(e,n,o){this.editorCommands.addQueryStateHandler(e,n,o)}addQueryValueHandler(e,n,o){this.editorCommands.addQueryValueHandler(e,n,o)}addShortcut(e,n,o,r){this.shortcuts.add(e,n,o,r)}execCommand(e,n,o,r){return this.editorCommands.execCommand(e,n,o,r)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(qi.show(e.getContainer()),qi.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(qi.hide(e.getContainer()),qi.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,n){this.dispatch("ProgressState",{state:e,time:n})}load(e={}){const n=this,o=n.getElement();if(n.removed)return"";if(o){const r={...e,load:!0},s=ql(o)?o.value:o.innerHTML,i=n.setContent(s,r);return r.no_events||n.dispatch("LoadContent",{...r,element:o}),i}return""}save(e={}){const n=this;let o=n.getElement();if(!o||!n.initialized||n.removed)return"";const r={...e,save:!0,element:o};let s=n.getContent(r);const i={...r,content:s};if(i.no_events||n.dispatch("SaveContent",i),"raw"===i.format&&n.dispatch("RawSaveContent",i),s=i.content,ql(o))o.value=s;else{!e.is_removing&&n.inline||(o.innerHTML=s);const a=qi.getParent(n.id,"form");a&&KR(a.elements,l=>l.name!==n.id||(l.value=s,!1))}return i.element=r.element=o=null,!1!==i.set_dirty&&n.setDirty(!1),s}setContent(e,n){return sp(this,e,n)}getContent(e){return((n,o={})=>{const r=(s=o,i=o.format?o.format:"html",{...s,format:i,get:!0,getInner:!0});var s,i;return O_(n,r).fold(Ke,s=>{const i=(l=s,rp(n).editor.getContent(l));var l;return T_(n,i,s)})})(this,e)}insertContent(e,n){n&&(e=yx({content:e},n)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?sp(this,this.startContent,{format:"raw"}):sp(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const n=!this.isNotDirty;this.isNotDirty=!e,e&&e!==n&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=e.editorContainer||qi.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=qi.get(this.id)),this.targetElm}getWin(){const e=this;if(!e.contentWindow){const n=e.iframeElement;n&&(e.contentWindow=n.contentWindow)}return e.contentWindow}getDoc(){const e=this;if(!e.contentDocument){const n=e.getWin();n&&(e.contentDocument=n.document)}return e.contentDocument}getBody(){var e,n;const o=this.getDoc();return null!==(n=null!==(e=this.bodyElement)&&void 0!==e?e:o?.body)&&void 0!==n?n:null}convertURL(e,n,o){const r=this,s=r.options.get,i=$k(r);return Ut(i)?i.call(r,e,o,!0,n):!s("convert_urls")||"link"===o||Pe(o)&&"LINK"===o.nodeName||0===e.indexOf("file:")||0===e.length?e:s("relative_urls")?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,s("remove_script_host"))}addVisual(e){((n,o)=>{var s;s=o,ve(this).editor.addVisual(s)})(0,e)}setEditableRoot(e){var n,o;(n=this)._editableRoot!==(o=e)&&(n._editableRoot=o,n.readonly||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),n.dispatch("EditableRootStateChange",{state:o}))}hasEditableRoot(){return this._editableRoot}remove(){(e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),s=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&ot(s?.nextSibling)&&ju.remove(s.nextSibling),e.dispatch("remove"),e.editorManager.remove(e),!e.inline&&r&&ju.setStyle((i=e).id,"display",i.orgDisplay),(i=>{i.dispatch("detach")})(e),ju.remove(e.getContainer()),$u(n),$u(o),e.destroy()}var i})(this)}destroy(e){((n,o)=>{const{selection:r,dom:s}=n;n.destroyed||(o||n.removed?(o||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),$u(r),$u(s)),(i=>{const a=i.formElement;a&&(a._mceOldSubmit&&(a.submit=a._mceOldSubmit,delete a._mceOldSubmit),ju.unbind(a,"submit reset",i.formEventDelegate))})(n),(i=>{const a=i;a.contentAreaContainer=a.formElement=a.container=a.editorContainer=null,a.bodyElement=a.contentDocument=a.contentWindow=null,a.iframeElement=a.targetElm=null;const l=i.selection;l&&(a.selection=l.win=l.dom=l.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const el=Qt.DOM,xm=Q.each;let km,_x=!1,An=[];const Sm=t=>{const e=t.type;xm(Vs.get(),n=>{switch(e){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},Cx=t=>{if(t!==_x){const e=Qt.DOM;t?(e.bind(window,"resize",Sm),e.bind(window,"scroll",Sm)):(e.unbind(window,"resize",Sm),e.unbind(window,"scroll",Sm)),_x=t}},wx=t=>{const e=An;return An=xt(An,n=>t!==n),Vs.activeEditor===t&&(Vs.activeEditor=An.length>0?An[0]:null),Vs.focusedEditor===t&&(Vs.focusedEditor=null),e.length!==An.length},YR="CSS1Compat"!==document.compatMode,Vs={...yh,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"7.3",releaseDate:"2023-11-15",i18n:Yo,activeEditor:null,focusedEditor:null,setup(){const t=this;let e="",n="",o=Jo.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/"));const r=window.tinymce||window.tinyMCEPreInit;if(r)e=r.base||r.baseURL,n=r.suffix;else{const i=document.getElementsByTagName("script");for(let a=0;a<i.length;a++){const l=i[a].src||"";if(""===l)continue;const c=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){-1!==c.indexOf(".min")&&(n=".min"),e=l.substring(0,l.lastIndexOf("/"));break}}if(!e&&document.currentScript){const a=document.currentScript.src;-1!==a.indexOf(".min")&&(n=".min"),e=a.substring(0,a.lastIndexOf("/"))}}var s;t.baseURL=new Jo(o).toAbsolute(e),t.documentBaseURL=o,t.baseURI=new Jo(t.baseURL),t.suffix=n,(s=t).on("AddEditor",ft(JS,s)),s.on("RemoveEditor",ft(ZS,s))},overrideDefaults(t){const e=t.base_url;e&&this._setBaseUrl(e);const n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;const o=t.plugin_base_urls;void 0!==o&&Xt(o,(r,s)=>{pn.PluginManager.urls[s]=r})},init(t){const e=this;let n;const o=Q.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let r=i=>{n=i};const s=()=>{let i=0;const a=[];let l;var c;el.unbind(window,"ready",s),(c=>{const d=t.onpageload;d&&d.apply(e,[])})(),l=((c,d)=>{const u=[],f=Ut(d)?h=>le(u,g=>d(g,h)):h=>gt(u,h);for(let h=0,g=c.length;h<g;h++){const b=c[h];f(b)||u.push(b)}return u})((c=t,Rt.browser.isIE()||Rt.browser.isEdge()?(Hu("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):YR?(Hu("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):ht(c.selector)?el.select(c.selector):ot(c.target)?[c.target]:[])),Q.each(l,c=>{var d;(d=e.get(c.id))&&d.initialized&&!(d.getContainer()||d.getBody()).parentNode&&(wx(d),d.unbindAllNativeEvents(),d.destroy(!0),d.removed=!0)}),l=Q.grep(l,c=>!e.get(c.id)),0===l.length?r([]):xm(l,c=>{t.inline&&c.tagName.toLowerCase()in o?Hu("Could not initialize inline editor on invalid inline target element",c):((d,u,f)=>{const h=new Em(d,u,e);a.push(h),h.on("init",()=>{++i===l.length&&r(a)}),h.targetElm=h.targetElm||f,h.render()})((d=>{let u=d.id;return u||(u=Jt(d,"name").filter(f=>!el.get(f)).getOrThunk(el.uniqueId),d.setAttribute("id",u)),u})(c),t,c)})};return el.bind(window,"ready",s),new Promise(i=>{n?i(n):r=a=>{i(a)}})},get(t){return 0===arguments.length?An.slice(0):ht(t)?ye(An,e=>e.id===t).getOr(null):Tn(t)&&An[t]?An[t]:null},add(t){const e=this,n=e.get(t.id);return n===t||(null===n&&An.push(t),Cx(!0),e.activeEditor=t,e.dispatch("AddEditor",{editor:t}),km||(km=o=>{const r=e.dispatch("BeforeUnload");if(r.returnValue)return o.preventDefault(),o.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",km))),t},createEditor(t,e){return this.add(new Em(t,e,this))},remove(t){const e=this;let n;if(t){if(!ht(t))return n=t,se(e.get(n.id))?null:(wx(n)&&e.dispatch("RemoveEditor",{editor:n}),0===An.length&&window.removeEventListener("beforeunload",km),n.remove(),Cx(An.length>0),n);xm(el.select(t),o=>{n=e.get(o.id),n&&e.remove(n)})}else for(let o=An.length-1;o>=0;o--)e.remove(An[o])},execCommand(t,e,n){var o;const r=this,s=Pe(n)?null!==(o=n.id)&&void 0!==o?o:n.index:n;switch(t){case"mceAddEditor":return r.get(s)||new Em(s,n.options,r).render(),!0;case"mceRemoveEditor":{const i=r.get(s);return i&&i.remove(),!0}case"mceToggleEditor":{const i=r.get(s);return i?(i.isHidden()?i.show():i.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}}return!!r.activeEditor&&r.activeEditor.execCommand(t,e,n)},triggerSave:()=>{xm(An,t=>{t.save()})},addI18n:(t,e)=>{Yo.add(t,e)},translate:t=>Yo.translate(t),setActive(t){const e=this.activeEditor;this.activeEditor!==t&&(e&&e.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new Jo(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new Jo(this.baseURL)}};Vs.setup();const XR=(()=>{const t=Bs();return{FakeClipboardItem:e=>({items:e,types:Xe(e),getType:n=>Jt(e,n).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),Ex=Math.min,nl=Math.max,Nm=Math.round,xx=(t,e,n)=>{let o=e.x,r=e.y;const s=t.w,i=t.h,a=e.w,l=e.h,c=(n||"").split("");return"b"===c[0]&&(r+=l),"r"===c[1]&&(o+=a),"c"===c[0]&&(r+=Nm(l/2)),"c"===c[1]&&(o+=Nm(a/2)),"b"===c[3]&&(r-=i),"r"===c[4]&&(o-=s),"c"===c[3]&&(r-=Nm(i/2)),"c"===c[4]&&(o-=Nm(s/2)),ol(o,r,s,i)},ol=(t,e,n,o)=>({x:t,y:e,w:n,h:o}),GR={inflate:(t,e,n)=>ol(t.x-e,t.y-n,t.w+2*e,t.h+2*n),relativePosition:xx,findBestRelativePosition:(t,e,n,o)=>{for(let r=0;r<o.length;r++){const s=xx(t,e,o[r]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return o[r]}return null},intersect:(t,e)=>{const n=nl(t.x,e.x),o=nl(t.y,e.y),r=Ex(t.x+t.w,e.x+e.w),s=Ex(t.y+t.h,e.y+e.h);return r-n<0||s-o<0?null:ol(n,o,r-n,s-o)},clamp:(t,e,n)=>{let o=t.x,r=t.y,s=t.x+t.w,i=t.y+t.h;const a=e.x+e.w,l=e.y+e.h,c=nl(0,e.x-o),d=nl(0,e.y-r),u=nl(0,s-a),f=nl(0,i-l);return o+=c,r+=d,n&&(s+=c,i+=d,o-=u,r-=f),s-=u,i-=f,ol(o,r,s-o,i-r)},create:ol,fromClientRect:t=>ol(t.left,t.top,t.width,t.height)},QR=(()=>{const t={},e={};return{load:(n,o)=>{const r=`Script at URL "${o}" failed to load`,s=`Script at URL "${o}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==t[n])return t[n];{const i=new Promise((a,l)=>{const c=((d,u,f=1e3)=>{let h=!1,g=null;const b=_=>(...C)=>{h||(h=!0,null!==g&&(clearTimeout(g),g=null),_.apply(null,C))},p=b(d),v=b(u);return{start:(..._)=>{h||null!==g||(g=setTimeout(()=>v.apply(null,_),f))},resolve:p,reject:v}})(a,l);e[n]=c.resolve,ts.ScriptLoader.loadScript(o).then(()=>c.start(s),()=>c.reject(r))});return t[n]=i,i}},add:(n,o)=>{void 0!==e[n]&&(e[n](o),delete e[n]),t[n]=Promise.resolve(o)},unload:n=>{delete t[n]}}})();let od;try{const t="__storage_test__";od=window.localStorage,od.setItem(t,t),od.removeItem(t)}catch{od=(()=>{let e={},n=[];const o={getItem:r=>e[r]||null,setItem:(r,s)=>{n.push(r),e[r]=String(s)},key:r=>n[r],removeItem:r=>{n=n.filter(s=>s===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})()}const JR={geom:{Rect:GR},util:{Delay:uo,Tools:Q,VK:lt,URI:Jo,EventDispatcher:vh,Observable:yh,I18n:Yo,LocalStorage:od,ImageUploader:t=>{const e=rC(),n=iC(t,e);return{upload:(o,r=!0)=>n.upload(o,r?sC(t):void 0)}}},dom:{EventUtils:Zr,TreeWalker:Ce,TextSeeker:Ci,DOMUtils:Qt,ScriptLoader:ts,RangeUtils:Ti,Serializer:Y_,StyleSheetLoader:we,ControlSelection:Dv,BookmarkManager:kc,Selection:K_,Event:Zr.Event},html:{Styles:Rs,Entities:io,Node:Nn,Schema:xn,DomParser:qa,Writer:_0,Serializer:Fs},Env:Rt,AddOnManager:pn,Annotator:Ev,Formatter:cC,UndoManager:uC,EditorCommands:cx,WindowManager:eC,NotificationManager:tC,EditorObservable:fx,Shortcuts:vx,Editor:Em,FocusManager:e0,EditorManager:Vs,DOM:Qt.DOM,ScriptLoader:ts.ScriptLoader,PluginManager:Wa,ThemeManager:Fi,ModelManager:Va,IconManager:Uu,Resource:QR,FakeClipboard:XR,trim:Q.trim,isArray:Q.isArray,is:Q.is,toArray:Q.toArray,makeMap:Q.makeMap,each:Q.each,map:Q.map,grep:Q.grep,inArray:Q.inArray,extend:Q.extend,walk:Q.walk,resolve:Q.resolve,explode:Q.explode,_addCacheSuffix:Q._addCacheSuffix},kx=Q.extend(Vs,JR);(t=>{window.tinymce=t,window.tinyMCE=t})(kx),(t=>{if("object"==typeof module)try{module.exports=t}catch{}})(kx)}();